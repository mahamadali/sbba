(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-918b36d2"],{"4ea1":function(e,s,n){"use strict";n.r(s);var t=function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("base-modal",{attrs:{id:"questions-modal",mount:"",scrollable:"","no-close-on-backdrop":!1,modalHeaderClass:"questions-modal__header",modalBodyClass:"questions-modal__body",modalFooterClass:"questions-modal__footer",modalContentClass:"questions-modal__content"},on:{onShow:e.handleOnShow},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"header-content"},[n("span",{staticClass:"modal-title"},[e._v("About "+e._s(e.name))]),n("button",{staticClass:"close",on:{click:e.closeModal}},[n("span",{staticClass:"icon-ic-modal-close"})])])]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"questions-main"},[n("div",{staticClass:"questions-text__container"},[n("div",{key:e.componentKey}),e.loading?n("div",{staticClass:"questions-loading"},[n("b-spinner",{staticClass:"questions-loading__spinner"})],1):e._l(e.questions,(function(s){return n("div",{key:s.id,staticClass:"question-wrapper"},[e.isProfileOwner||""!==e.answers[s.id]?[n("span",{staticClass:"question-wrapper__left",class:{"question-wrapper__left-alt":!e.isProfileOwner}},[""!==e.answers[s.id]&&e.isProfileOwner?n("b-icon-check2",{staticClass:"answer-check"}):n("div",{staticClass:"answer-check__none"}),n("div",{staticClass:"question-wrapper__question",class:{"question-wrapper__question--alt":!e.isProfileOwner}},[e._v(" "+e._s(s.question)+" ")])],1),n("div",{staticClass:"question-wrapper__input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.answers[s.id],expression:"answers[question.id]"}],staticClass:"questions-input",attrs:{readonly:!e.isProfileOwner,disabled:!e.isProfileOwner,type:"text"},domProps:{value:e.answers[s.id]},on:{input:[function(n){n.target.composing||e.$set(e.answers,s.id,n.target.value)},e.increaseKey]}})])]:e._e()],2)})),e.loading?e._e():n("div",{staticClass:"submit-wrapper"},[n("button",{staticClass:"ui-btn btn-primary",on:{click:e.saveQuestions}},[e.saving?n("b-spinner",{attrs:{small:""}}):n("span",[e._v("Done")])],1)])],2)])]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"questions-footer"})]},proxy:!0}])})},o=[],r=n("1da1"),a=(n("96cf"),n("b0c0"),n("159b"),n("7299")),i=n("7db5"),l={components:{BaseModal:a["default"]},data:function(){return{questions:[],answers:[],saving:!1,componentKey:1,loading:!1}},computed:{username:function(){return this.$route.params.username||this.$store.getters["profile/getProfile"].handle},name:function(){return"ProfilePersonalWithUsername"!==this.$route.name||this.isProfileOwner?(console.log("personal profile"),this.$store.getters["profile/getProfileTitle"]):(console.log("others profile"),this.$store.getters["user/getProfileTitle"])},isProfileOwner:function(){return!this.username||this.username===this.$store.getters["profile/getProfile"].handle},storeNameSpace:function(){return this.isProfileOwner?"profile/":"user/"},hasOnboardingAnswers:function(){return console.log("Store Name space",this.storeNameSpace),this.$store.getters[this.storeNameSpace+"getProfileHasOnboardingAnswers"]}},methods:{handleOnShow:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var n,t,o,r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.loading=!0,!e.isProfileOwner){s.next=8;break}return s.next=4,e.$store.dispatch("profile/getProfileOnboardingAnswers");case 4:n=s.sent,console.log("Has Onboarding Answers",e.hasOnboardingAnswers),s.next=12;break;case 8:return s.next=10,e.$store.dispatch("user/fetchOnboardingAnswers",e.username);case 10:n=s.sent,console.log("Has Onboarding Answers",e.hasOnboardingAnswers);case 12:return t={},n.forEach((function(e){t[e.question.id]=e.answer})),o=e.$store.getters["auth/getUserAuthToken"],r={headers:{Authorization:"Bearer ".concat(o)}},s.next=18,i["a"].get("/onboarding-questions",r);case 18:a=s.sent,e.questions=a.data,e.questions.forEach((function(s){e.answers[s.id]=t[s.id]||""})),e.loading=!1;case 22:case"end":return s.stop()}}),s)})))()},saveQuestions:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.isProfileOwner){s.next=7;break}return e.saving=!0,s.next=4,e.$store.dispatch("auth/answerQuestions",e.answers);case 4:return s.next=6,e.$store.dispatch("profile/fetchProfile");case 6:e.saving=!1;case 7:e.$bvModal.hide("questions-modal");case 8:case"end":return s.stop()}}),s)})))()},closeModal:function(){this.$bvModal.hide("questions-modal")},increaseKey:function(){this.componentKey++}}},c=l,u=(n("98b1"),n("ac8e"),n("2877")),d=Object(u["a"])(c,t,o,!1,null,"1079f7e4",null);s["default"]=d.exports},"98b1":function(e,s,n){"use strict";n("9d27")},"9d27":function(e,s,n){},ac8e:function(e,s,n){"use strict";n("b1dd")},b1dd:function(e,s,n){}}]);