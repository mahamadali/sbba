(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8335e1f2"],{"0475":function(t,e,s){"use strict";s("eb33")},"065b":function(t,e,s){t.exports=s.p+"img/video-pause.1c162245.svg"},"0af5":function(t,e,s){t.exports=s.p+"img/ic-btn-feed-comment.ad726f71.svg"},"0b3f":function(t,e,s){t.exports=s.p+"img/ic-btn-feed-share.562de1ec.svg"},"0f9c":function(t,e,s){"use strict";s("1590")},1590:function(t,e,s){},3444:function(t,e,s){t.exports=s.p+"img/ic-btn-feed-save.050c9bbd.svg"},"3a10":function(t,e,s){},"3f8b":function(t,e,s){},"471a":function(t,e,s){},4925:function(t,e,s){"use strict";s("b250")},"4adc":function(t,e,s){},"50d3a":function(t,e,s){},"55da":function(t,e,s){"use strict";s("63e3")},6062:function(t,e,s){"use strict";var n=s("6d61"),o=s("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},"63e3":function(t,e,s){},6566:function(t,e,s){"use strict";var n=s("9bf2").f,o=s("7c73"),i=s("e2cc"),a=s("0366"),r=s("19aa"),c=s("2266"),l=s("7dd0"),u=s("2626"),d=s("83ab"),p=s("f183").fastKey,m=s("69f3"),f=m.set,h=m.getterFor;t.exports={getConstructor:function(t,e,s,l){var u=t((function(t,n){r(t,u,e),f(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=n&&c(n,t[l],{that:t,AS_ENTRIES:s})})),m=h(e),g=function(t,e,s){var n,o,i=m(t),a=v(t,e);return a?a.value=s:(i.last=a={index:o=p(e,!0),key:e,value:s,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),d?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},v=function(t,e){var s,n=m(t),o=p(e);if("F"!==o)return n.index[o];for(s=n.first;s;s=s.next)if(s.key==e)return s};return i(u.prototype,{clear:function(){var t=this,e=m(t),s=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete s[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,s=m(e),n=v(e,t);if(n){var o=n.next,i=n.previous;delete s.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),s.first==n&&(s.first=o),s.last==n&&(s.last=i),d?s.size--:e.size--}return!!n},forEach:function(t){var e,s=m(this),n=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:s.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!v(this,t)}}),i(u.prototype,s?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),d&&n(u.prototype,"size",{get:function(){return m(this).size}}),u},setStrong:function(t,e,s){var n=e+" Iterator",o=h(e),i=h(n);l(t,e,(function(t,e){f(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,s=t.last;while(s&&s.removed)s=s.previous;return t.target&&(t.last=s=s?s.next:t.state.first)?"keys"==e?{value:s.key,done:!1}:"values"==e?{value:s.value,done:!1}:{value:[s.key,s.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),s?"entries":"values",!s,!0),u(e)}}},"6d61":function(t,e,s){"use strict";var n=s("23e7"),o=s("da84"),i=s("94ca"),a=s("6eeb"),r=s("f183"),c=s("2266"),l=s("19aa"),u=s("861d"),d=s("d039"),p=s("1c7e"),m=s("d44e"),f=s("7156");t.exports=function(t,e,s){var h=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=h?"set":"add",b=o[t],w=b&&b.prototype,k=b,_={},C=function(t){var e=w[t];a(w,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:function(t,s){return e.call(this,0===t?0:t,s),this})},y=i(t,"function"!=typeof b||!(g||w.forEach&&!d((function(){(new b).entries().next()}))));if(y)k=s.getConstructor(e,t,h,v),r.REQUIRED=!0;else if(i(t,!0)){var x=new k,P=x[v](g?{}:-0,1)!=x,I=d((function(){x.has(1)})),M=p((function(t){new b(t)})),T=!g&&d((function(){var t=new b,e=5;while(e--)t[v](e,e);return!t.has(-0)}));M||(k=e((function(e,s){l(e,k,t);var n=f(new b,e,k);return void 0!=s&&c(s,n[v],{that:n,AS_ENTRIES:h}),n})),k.prototype=w,w.constructor=k),(I||T)&&(C("delete"),C("has"),h&&C("get")),(T||P)&&C(v),g&&w.clear&&delete w.clear}return _[t]=k,n({global:!0,forced:k!=b},_),m(k,t),g||s.setStrong(k,t,h),k}},"7c89":function(t,e,s){t.exports=s.p+"img/ic-profile-count.2ea9645d.svg"},8295:function(t,e,s){"use strict";s("dfc0")},"88ce":function(t,e,s){t.exports=s.p+"img/ic-btn-feed-follow.2255e1e6.svg"},8987:function(t,e,s){t.exports=s.p+"img/ic_btn_pin.bd64297e.svg"},"89b4":function(t,e,s){},"89c5":function(t,e,s){"use strict";s("3a10")},"952f":function(t,e,s){t.exports=s.p+"img/like.c325f9fd.svg"},"9be6":function(t,e,s){"use strict";s("d322")},a508:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{key:t.componentKey,staticClass:"feed-item",attrs:{id:"feed-item--"+(this.post.activity?this.post.activity.id:this.post.id)}},[t.post.activity&&"publish"!==t.post.activity.type?s("div",{staticClass:"feed-item__latest-liked"},[s("div",{staticClass:"feed-item__latest-liked--profile"},[s("img",{staticClass:"user-image clickable",attrs:{src:t.post.activity.profile.picture.formats&&t.post.activity.profile.picture.formats.thumbnail?t.post.activity.profile.picture.formats.thumbnail.url:t.post.activity.profile.picture.url},on:{click:t.showUserProfile}}),s("span",{staticClass:"user-name clickable",on:{click:function(e){return t.showUserProfile(t.post.activity.profile.handle)}}},[t._v(t._s(t.post.activity.profile.title))]),t.post.activity.activityCount-1>0?s("span",{staticClass:"user-desc"},[t._v(t._s(" and "+(t.post.activity.activityCount-1)+" "+(t.post.activity.activityCount-1>1?"others":"other")))]):t._e(),s("span",{staticClass:"user-desc"},[t._v(t._s(t.lastActivityText))]),"share"!==t.post.activity.type||t.networkFeed?t._e():s("span",{staticClass:"ui-flex posted-in",on:{click:function(e){return t.goToNetwork(t.post.activity.network.slug)}}},[s("label",{staticClass:"post-tag clickable"},[t._v(t._s(t.post.activity.network.name))])]),s("span",{staticClass:"user-desc"},[t._v(" "+t._s(t._f("moment")(t.post.activity.publishedAt,"from","now"))+" ")])]),!t.post.activity||"comment"!==t.post.activity.type&&"share"!==t.post.activity.type?t._e():s("div",{on:{click:t.postContentClick}},[s("span",{staticClass:"feed-item__latest-liked--content",class:t.seeFullActivityText?"":"see-less",domProps:{innerHTML:t._s((t.seeFullActivityText?t.parsePost(t.activityContent):t.parsePost(t.activityContent.slice(0,t.maxActivityText)))+" "+(t.activityContent.length>t.maxActivityText&&!t.seeFullActivityText?"...":""))}}),t.activityContent.length>t.maxActivityText?s("span",{staticClass:"see-more-button",on:{click:t.toggleFullActivityText}},[t._v(" "+t._s(t.seeFullActivityText?"See less":"See more")+" ")]):t._e()])]):t._e(),s("div",{staticClass:"feed-item__container",class:[0===t.post.commentsNumber&&0===t.post.interests.length?"feed-item__container--null-comment":"",0===t.post.upvotesCount&&t.post.reactions&&0===t.post.reactions.length?"feed-item__container--null-reaction":""]},[s("div",{staticClass:"f-profile-img highlighted"},[s("img",{staticClass:"user-image clickable",attrs:{src:t.profilePicture},on:{click:t.showUserProfile}})]),s("div",{staticClass:"f-profile-title"},[s("p",{staticClass:"user-name clickable",on:{click:t.showUserProfile}},[t._v(" "+t._s(t.post.profile.title)+" ")]),t.post.profile.verified?s("img",{staticClass:"user-badge",attrs:{src:t.ic_badge1}}):t._e(),t._l(t.post.profile.badges,(function(e){return s("label",{key:e.text,staticClass:"user-label--type3",style:{backgroundColor:"#E5E7EB"}},[t._v(t._s(e.badge.text))])}))],2),this.post.profile?s("div",{staticClass:"f-profile-desc"},[s("p",{staticClass:"user-extra",on:{mouseover:t.toggleTitleHover,mouseleave:t.toggleTitleHover}},[t._v(" "+t._s(t.titleText)+" ")])]):t._e(),s("div",{staticClass:"f-profile-timestamp"},[t.isPinnedPost?s("span",{staticClass:"f-profile-timestamp__pinned"},[s("span",{staticClass:"icon-thumb-stack pinned-icon"}),t._v("Pinned "+t._s(t._f("moment")(t.post.publishedAt,"from","now")))]):s("span",{staticClass:"time-stamp"},[t._v(t._s(t._f("moment")(t.post.publishedAt,"from","now")))]),t.post.network?s("div",{staticClass:"ui-flex posted-in",on:{click:function(e){return t.goToNetwork(t.post.network.slug)}}},[s("label",{staticClass:"post-tag clickable"},[t._v(t._s(t.post.network.name)),s("span",{staticClass:"icon-plus"})])]):t._e()]),s("div",{staticClass:"f-profile-labels"},[s("div",{staticClass:"profile-score"},[s("img",{staticClass:"profile-score__icon",attrs:{src:t.ic_count}}),s("span",{staticClass:"profile-score__text"},[t._v(t._s(t.abreviatePoints))])]),t.post.postType?s("div",{staticClass:"post-type"},[s("span",{staticClass:"post-type__icon",class:t.typeIcon}),s("span",{staticClass:"post-type__text"},[t._v(t._s(t.postTypeText))])]):t._e()]),t.isUserAuthenticated&&t.allowActions?s("div",{staticClass:"f-profile-more"},[t.post.isAnnouncement?s("div",[s("span",{staticClass:"icon-annoucement f-annouce-icon"})]):t._e(),s("base-icon-dropdown",{attrs:{"no-caret":"",right:""}},[t.isOwnPost?s("base-list-item-default",{attrs:{icon:"icon-ic-btn-edit",button:""},on:{click:function(e){return t.editPost()}}},[t._v(" Edit ")]):t._e(),t.isOwnPost?t._e():s("base-list-item-default",{attrs:{icon:"icon-ic-mute"}},[t._v("Mute ")]),t.isOwnPost?t._e():s("base-list-item-default",{attrs:{button:"",icon:"icon-user-unfollow"},on:{click:function(e){return t.blockUser(t.post)}}},[t._v("Block User ")]),t.isOwnPost?t._e():s("base-list-item-default",{attrs:{icon:"icon-report"},nativeOn:{click:function(e){return t.reportPost(e)}}},[t._v("Report ")]),t.isOwnPost||"Super Admin"===t.currentUserRole?s("base-list-item-default",{attrs:{icon:"icon-remove",button:""},on:{click:t.showDeletePostWarningModal}},[t._v(" "+t._s(t.isOwnPost?"Delete":"Admin Delete")+" ")]):t._e(),"Super Admin"===t.currentUserRole?s("base-list-item-default",{attrs:{icon:"ic_pin",button:""},on:{click:t.togglePinPost}},[t._v(" "+t._s(t.isPinnedPost?"Unpin post":"Pin Post")+" ")]):t._e()],1)],1):t._e(),s("div",{staticClass:"f-post feed-link-preview-wrapper"},[s("div",{staticClass:"f-post__text",class:t.post.media.length>1?"f-post__text-media":"",on:{click:t.postContentClick}},[s("div",{staticClass:"f-post__text--read-more"},[t.showReadMore&&!t.readMore?s("p",{class:t.langDir?"text-rtl":"text-ltr",domProps:{innerHTML:t._s(t.formattedSummaryText)}}):s("p",{class:t.langDir?"text-rtl":"text-ltr",domProps:{innerHTML:t._s(t.formattedContentText)}}),t.showReadMore?s("a",{class:t.post.inverseTextDirection?"read-more-btn invertTxtDir":"read-more-btn",attrs:{href:"#"},on:{click:t.activateReadMore}},[t._v(" "+t._s(t.readMore?"Show Less":"Show More")+" ")]):t._e()])]),s("div",{staticClass:"f-post__tags ui-flex"},[s("div",{staticClass:"ui-block ui-flex-grow"},t._l(t.post.interests,(function(e){return s("label",{key:e.id,class:[e.network?"tag-network":"tag-global","post-tag"]},[t._v(t._s(e.title))])})),0)]),!t.post.media.length>0&&t.completeLinkPreview?s("LinkPreview",{attrs:{details:t.post.linkPreview,location:"feed"},on:{linkPreviewClick:t.postLinkClick}}):t._e(),t.post.media.length?s("feed-post-grid-img",{attrs:{post:t.post}}):t._e()],1),s("div",{staticClass:"f-post-action ui-flex"},[s("div",{staticClass:"ui-flex ui-flex-grow ui-align-center feed-react-show-wr"},[t.post.upvotesCount?s("div",{staticClass:"feed-react-show feed-react-bordered clickable",class:t.post.upvoted?"active":"",style:{"background-color":"transparent"},on:{click:function(e){return t.openLikeModal("upvote")}}},[s("img",{staticClass:"react-icon",attrs:{src:t.like}})]):t._e(),t.post.upvotesCount?s("span",{staticClass:"upvotesCount"},[t._v(t._s(t.post.upvotesCount))]):t._e(),t.post.reactions&&t.post.reactions.length>0?s("div",{staticClass:"feed-react-show feed-react-stack clickable",style:{"background-color":"var(--color-feed-reaction-1)"},on:{click:function(e){return t.openLikeModal("reactions")}}},[s("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[0].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>1?s("div",{staticClass:"feed-react-show feed-react-stack clickable",style:{"background-color":"var(--color-feed-reaction-2)"},on:{click:function(e){return t.openLikeModal("reactions")}}},[s("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[1].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>2?s("div",{staticClass:"feed-react-show feed-react-stack clickable",on:{click:function(e){return t.openLikeModal("reactions")}}},[s("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[2].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>0?s("span",{staticClass:"react-text"},[t._v(" "+t._s(t.totalReactions>3?"and "+(t.totalReactions-3)+" "+(t.totalReactions-3>1?"others":"other"):""))]):t._e()]),t.post.bookmarksCount>0?s("p",{staticClass:"ui-flex ui-align-center"},[s("span",{staticClass:"feed-reaction-text"},[t._v(t._s(t.post.bookmarksCount)+" Saved")])]):t._e()])]),t.allowActions?s("div",{staticClass:"feed-item__action"},[s("div",[!t.isOwnPost&&t.isUserOnboarded?s("div",{staticClass:"feed-like-main ui-btn__transparent",class:{active:t.reactionMouseOver},on:{mouseenter:function(e){t.reactionMouseOver=!0},mouseleave:function(e){t.reactionMouseOver=!1}}},[s("div",{staticClass:"feed-like-main__inner"},[s("div",{staticClass:"ui-flex feed-like-main__set"},t._l(t.reactionLists,(function(e){return s("div",{key:e.id},[s("button",{staticClass:"ui-btn__transparent ui-btn__feed-react",on:{click:function(s){return t.react(e.id)}}},[s("span",{staticClass:"ui-btn__feed-react-text"},[t._v(t._s(e.name))]),s("img",{attrs:{src:e.icon.url}})])])})),0)]),t.reacted?t._e():s("button",{staticClass:"ui-btn ui-btn__transparent",class:this.post.upvoted?"active":"",on:{click:function(e){return t.react(t.reactionLists[0].id)}}},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"}})]),t._v(" "+t._s(t.reactionLists[0].name)+" ")]),t.reacted?s("button",{staticClass:"ui-btn ui-btn__transparent active",staticStyle:{color:"#d97706"},on:{click:function(e){return t.react(t.reacted.id)}}},[s("img",{staticClass:"btn-icon",attrs:{src:t.reacted.icon.url}}),s("span",{staticClass:"btn-text--react"},[t._v(t._s(t.reacted.name))])]):t._e()]):t._e()]),s("div",[t.post.public?s("b-dropdown",{staticClass:"base-icon-dropdown",class:t.classDropdown,attrs:{block:"","menu-class":"base-dropdown__menu","toggle-class":"ui-btn ui-btn__transparent","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("div",[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"}})]),s("span",{staticClass:"btn-text--share"},[t._v("Share")])])]},proxy:!0}],null,!1,3739369126)},[s("base-list-item-default",{attrs:{button:""},on:{click:t.openShareOnFeedModal}},[s("svg",{staticClass:"btn-icon",attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M8.7647 4.64706H4.64706C3.73741 4.64706 3 5.38447 3 6.29412V15.3529C3 16.2626 3.73741 17 4.64706 17H13.7059C14.6155 17 15.3529 16.2626 15.3529 15.3529V11.2353M14.1883 3.48241C14.8315 2.8392 15.8744 2.8392 16.5176 3.48241C17.1608 4.12563 17.1608 5.16849 16.5176 5.8117L9.44694 12.8824H7.11765L7.11765 10.5531L14.1883 3.48241Z",stroke:"#111827","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Share on feed ")]),s("base-list-item-default",{attrs:{button:""},on:{click:t.sharePost}},[s("svg",{staticClass:"btn-icon",attrs:{width:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M18.3332 1.66797L9.1665 10.8346","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{d:"M18.3332 1.66797L12.4998 18.3346L9.1665 10.8346L1.6665 7.5013L18.3332 1.66797Z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Send to others ")])],1):t._e()],1),s("button",{staticClass:"ui-btn ui-btn__transparent",class:t.post.bookmarked?"active":"",on:{click:function(e){return t.bookmark(t.post)}}},[t.post.bookmarked?s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"}})]):s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"}})]),s("span",{staticClass:"btn-text--save"},[t._v(t._s(t.post.bookmarked?"Saved":"Save"))])]),t.isUserAuthenticated?s("button",{staticClass:"ui-btn ui-btn__transparent",on:{click:function(e){return t.commentClicked(t.post)}}},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"}})]),s("span",{staticClass:"btn-text--comment"},[t._v("Comment")])]):t._e()]):t._e(),t.post.commentsNumber>0&&t.allowActions?s("div",{class:"feed-item__comments-number ui-flex ui-align-center "+(t.post.uniqueProfilesCommented>0?"ui-justify-space-between":"ui-justify-end")},[t.post.uniqueProfilesCommented>0?s("button",{staticClass:"text-feed-comment",on:{click:function(e){t.isUserAuthenticated&&t.getPostComments()}}},[t._v(" "+t._s(t.post.uniqueProfilesCommented)+" "+t._s(1===t.post.uniqueProfilesCommented?"person is talking about this ":"people are talking about this")+" ")]):t._e(),s("button",{staticClass:"ui-btn btn-view-all",on:{click:function(e){t.isUserAuthenticated&&t.getPostComments()}}},[t._v(" "+t._s(t.showComments?"Hide Comments":"View Comments")+" "+t._s("("+t.post.commentsNumber+")")+" ")])]):t._e(),t.showComments?s("feed-item-comments",{ref:"comments",attrs:{post:t.post,"show-comments":t.showComments,initialCommentsLoading:t.initialCommentsLoading},on:{openCommentModal:t.setCommentId}}):t._e(),s("base-warning-modal",{attrs:{id:"delete-post-warning-modal-"+(this.post.activity?this.post.activity.id:this.post.id),message:"Are you sure you want to delete this post?"},on:{ok:t.deletePost}}),t.showEdit?s("edit-post-modal",{ref:"editPostModal",attrs:{editPost:t.post,"network-feed":t.networkFeed},on:{onClose:t.closeEditModal}}):t._e(),t.showSharePostOnFeed?s("share-on-feed-modal",{ref:"shareOnFeedModal",attrs:{sharePost:t.post,"network-feed":!1},on:{onClose:t.closeShareOnFeedModal}}):t._e(),t.showShare?s("share-post-modal",{ref:"sharePostModal",attrs:{sharePost:t.post},on:{close:t.closeShareModal}}):t._e(),t.showUseReactionListModal?s("user-reaction-list-modal",{ref:"reactUserListModal",attrs:{post:t.post,reactionClicked:t.reactionClicked,commentId:t.commentId},on:{close:t.closeReactListModal}}):t._e()],1)},o=[],i=s("1da1"),a=s("2909"),r=(s("96cf"),s("99af"),s("d81d"),s("caad"),s("2532"),s("fb6a"),s("a15b"),s("466d"),s("ac1f"),s("a4d3"),s("e01a"),s("5319"),s("159b"),s("d3b7"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showComments?s("div",{staticClass:"feed-item-comments-wr"},[s("div",{key:t.keyComponent,ref:"commentInputContainer",staticClass:"feed-item-comments",class:{"feed-item-comments--onboarded":t.post.commentsNumber>0}},[t.allowComment||t.isUserOnboarded?s("feed-item-comment-input",{ref:"commentInput",staticClass:"initial_comment",attrs:{post:t.post,placeholder:"Add a comment...",resourceType:"posts"},on:{submitClicked:t.onSubmitClicked}}):t._e(),t.post.commentsNumber>0?s("div",[s("div",{staticClass:"ui-flex ui-align-center ui-justify-space-between"}),t._l(t.post.comments,(function(e){return s("div",{key:e.id,staticClass:"feed-item-comments__block"},[s("div",{staticClass:"comment-main-wr",class:e.repliesCount&&t.isUserAuthenticated||t.reply_to===e.id?"has-reply-for-comment":""},[s("div",{ref:"comment-"+e.id,refInFor:!0,staticClass:"comment-main",class:t.reply_to===e.id?"make-reply-for-comment":""},[s("feed-item-comment-view",{attrs:{profile:e.profile,comment:e},on:{onCommentUpdate:t.incrementKey,vote:function(s){return t.upvote(e)}}},[s("span",{domProps:{innerHTML:t._s(t.convertMentionsOfContent(e.content))}}),s("div",{staticClass:"comment-media-wr"},t._l(e.media,(function(n,o){return s("div",{key:n.id,staticClass:"comment-img-wr"},[s("img",{staticClass:"comment-img",attrs:{src:t.getMediaUrl(n)},on:{click:function(s){return t.openModal(o,e)}}})])})),0)]),s("div",{staticClass:"ui-flex ui-align-center comment-main__details"},[s("span",{staticClass:"comment-time"},[t._v(t._s(t._f("moment")(e.publishedAt,"from","now")))]),s("p",{staticClass:"comment-like"},[e.upvotesCount?s("span",{staticClass:"clickable",on:{click:function(s){return t.openCommentLikeModal(e.id)}}},[t._v(" "+t._s(e.upvotesCount)+" Likes ")]):t._e()]),s("p",{staticClass:"comment-reply"},[t.isUserAuthenticated?s("span",{staticClass:"clickable",on:{click:function(s){return s.preventDefault(),t.toggleReply(e)}}},[t._v("Reply")]):t._e()])])],1)]),s("div",{staticClass:"comment-sub-wr"},[t._l(e.replies,(function(n){return s("div",{key:n.id,staticClass:"comment-sub",class:t.replyToReply===n.id?"make-reply-for-reply":""},[s("feed-item-comment-view",{attrs:{profile:n.profile,comment:n},on:{onCommentUpdate:t.incrementKey,vote:function(s){return t.upvote(n,e)}}},[s("span",{domProps:{innerHTML:t._s(t.convertMentionsOfContent(n.content))}}),s("div",{staticClass:"comment-media-wr"},t._l(n.media,(function(e,o){return s("div",{key:e.id,staticClass:"comment-img-wr"},[s("img",{staticClass:"comment-img",attrs:{src:t.getMediaUrl(e)},on:{click:function(e){return t.openModal(o,n)}}})])})),0)]),s("div",{staticClass:"ui-flex ui-align-center comment-main__details"},[s("span",{staticClass:"comment-time"},[t._v(t._s(t._f("moment")(n.publishedAt,"from","now")))]),s("p",{staticClass:"comment-like"},[n.upvotesCount?s("span",{staticClass:"clickable",on:{click:function(e){return t.openCommentLikeModal(n.id)}}},[t._v(" "+t._s(n.upvotesCount)+" Likes ")]):t._e()]),s("p",{staticClass:"comment-reply"},[t.isUserAuthenticated?s("span",{staticClass:"clickable",on:{click:function(s){return s.preventDefault(),t.toggleReplyToReply(e,n)}}},[t._v("Reply")]):t._e()])]),t.replyToReply===n.id?s("feed-item-comment-input",{directives:[{name:"show",rawName:"v-show",value:t.allowComment||t.isUserOnboarded,expression:"allowComment || isUserOnboarded"}],attrs:{placeholder:"Write reply",resourceType:"comments",post:t.post,comment:e,reply:n,replyToReply:""},on:{submitClicked:t.onSubmitClicked}}):t._e()],1)})),t.moreReplyCount(e)>0&&t.isUserAuthenticated?s("div",{staticClass:"show-more-replies",on:{click:function(s){return t.showMoreReplies(e)}}},[t.replyLoading?s("span",{staticClass:"show-more-replies__loading"},[t._v("Loading...")]):s("span",{staticClass:"show-more-replies__link clickable"},[t._v(" View more replies ")])]):t._e(),t.reply_to===e.id?s("feed-item-comment-input",{directives:[{name:"show",rawName:"v-show",value:t.allowComment||t.isUserOnboarded,expression:"allowComment || isUserOnboarded"}],attrs:{placeholder:"Write reply",resourceType:"comments",post:t.post,comment:e},on:{submitClicked:t.onSubmitClicked}}):t._e()],2)])})),t.viewMoreComments(t.post)&&!t.moreCommentsLoading?s("div",{staticClass:"ui-link",on:{click:t.showMoreComments}},[t._v(" View more comments ")]):t._e()],2):t._e()],1),t.moreCommentsLoading?s("div",{staticClass:"comment-spinner__container"},[s("b-spinner",{staticClass:"comments-spinner",attrs:{small:""}})],1):t._e(),t.showModal?s("modal-view-img",{attrs:{post:t.currentCommentClicked}}):t._e()],1):t._e()}),c=[],l=s("b85c"),u=(s("c96a"),s("6062"),s("3ca3"),s("ddb0"),s("7db0"),s("4d63"),s("25f0"),s("a1f0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feed-comment-input"},[s("div",{ref:"input",staticClass:"feed-comment-input__container"},[s("div",{staticClass:"f-profile-img ui-relative"},[s("img",{staticClass:"user-image",attrs:{src:t.profilePicture}})]),s("div",{staticClass:"ui-flex ui-flex-grow feed-comment-input__input-wr ui-relative"},[s("vue-tribute",{attrs:{options:t.tributeOptions}},[s("div",{ref:"commentInput",staticClass:"ui-flex-grow feed-comment-input__input ui-relative",attrs:{id:t.commentInputId,placeholder:t.placeholder,contenteditable:!0},on:{input:t.onInput}}),s("div",{staticClass:"ui-flex feed-comment-input__img-wr"},t._l(t.files,(function(e,n){return s("div",{key:e.id},[s("div",{staticClass:"ui-flex feed-comment-input__img"},[e.loading?t._e():[s("div",{staticClass:"ui-relative"},[s("img",{staticClass:"comment-img",attrs:{if:"fileType(file.file) === 'image'",src:e.file.url}}),s("button",{staticClass:"ui-btn ui-btn__rounded",on:{click:function(e){return e.preventDefault(),t.removeImage(n)}}},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}})])])])]],2)])})),0),s("div",{staticClass:"ui-flex ui-flex-col feed-comment-input__img-wr"},t._l(t.files,(function(e,n){return s("div",{key:e.id},[e.loading?s("div",{staticClass:"comment-img-uploading"},[s("div",{staticClass:"uploading-info--file"},[t._v(t._s(e.name))]),s("div",{staticClass:"ui-flex ui-align-center"},[s("div",{staticClass:"upload-img__img-loading ui-flex-grow"},[s("b-progress",{staticClass:"upload-img__img-progress",attrs:{"show-progress":"",solid:"",max:"100"}},[s("b-progress-bar",{staticClass:"upload-img__img-progress-bar",attrs:{value:e.progress}})],1)],1),s("button",{staticClass:"ui-btn ui-btn__rounded",on:{click:function(e){return e.preventDefault(),t.removeImage(n)}}},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}})])])]),s("div",{staticClass:"ui-flex ui-align-center"},[s("span",{staticClass:"uploading-info"},[t._v("532KB")]),s("span",{staticClass:"uploading-info"},[t._v(" "+t._s(e.progress)+"% uploaded")])])]):t._e()])})),0)]),s("div",{staticClass:"feed-comment-input__send-wr"},[s("file-upload",{ref:"upload-comment-"+t.commentInputId,staticClass:"upload-img__new upload__new--img",attrs:{for:"img-upload-"+t.commentInputId,"input-id":"img-upload-"+t.commentInputId,extensions:t.uploadImageParams.extensions,accept:t.uploadImageParams.accept,multiple:t.uploadImageParams.multiple,directory:t.uploadImageParams.directory,thread:t.uploadImageParams.thread,drop:t.uploadImageParams.drop,"drop-directory":t.uploadImageParams.dropDirectory,"add-index":t.uploadImageParams.addIndex},on:{"input-file":t.inputFile,"input-filter":t.inputFilter}},[s("button",{staticClass:"ui-btn ui-btn__transparent feed-comment-input__send-img"},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}})])])]),s("button",{staticClass:"ui-btn ui-btn__transparent feed-comment-input__send",class:{active:!t.isEmpty},on:{click:t.submitComment}},[t._v(" Post ")])],1)],1)])])}),d=[],p=(s("a434"),s("b0c0"),s("2b3d"),s("24cb")),m=s("c2d5"),f=s("708e"),h=function(){return Promise.resolve().then(s.t.bind(null,"8019",7))},g={name:"FeedItemCommentInput",components:{VueTribute:p["a"],FileUpload:h},props:{post:Object,comment:Object,reply:Object,resourceType:String,placeholder:String,replyToReply:{type:Boolean,default:!1}},mounted:function(){if(this.replyToReply){console.log(this.reply);var t=this.reply.profile.title,e=this.reply.profile.id,s='<span id="'.concat(this.commentInputId,'-first-mention" class="mentions-replaced" data-id="').concat(e,'" contenteditable="false">\n            ').concat(t,"</span>&nbsp;"),n=document.getElementById(this.commentInputId);n.innerHTML=s+"&nbsp";var o=document.createRange(),i=window.getSelection();console.log(n.childNodes),o.setStart(n.childNodes[1],1),o.collapse(!0),i.removeAllRanges(),i.addRange(o),n.focus()}},computed:{commentInputId:function(){return"posts"!==this.resourceType?this.replyToReply?"comment-input-".concat(this.comment.id):"comment-input-".concat(this.post.id):"post-comment-input-".concat(this.post.id)},profilePicture:function(){var t,e=this.$store.getters["profile/getProfilePicture"];return e?null!==(t=e.formats)&&void 0!==t&&t.thumbnail?e.formats.thumbnail.url:e.url:null}},data:function(){var t=this;return{isEmpty:!0,isFocused:!0,submitting:!1,content:null,rawText:"",files:[],media:[],previewDetails:null,uploadImageParams:{extensions:"gif,jpg,jpeg,png,webp",accept:"image/png,image/gif,image/jpeg,image/webp",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},tributeOptions:{trigger:"@",allowSpaces:!0,noMatchTemplate:function(){return'<div class="mentions-container__empty-result"> No Result Found </div>'},values:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(s,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.remoteSearch(s,(function(t){return n(t)}));case 2:case"end":return e.stop()}}),e)})));function s(t,s){return e.apply(this,arguments)}return s}(),lookup:"title",fillAttr:"title",positionMenu:!0,containerClass:"mentions-container",itemClass:"mentions-item",selectClass:"mentions-item__selected",loadingItemTemplate:function(){return'<div class="mentions-item__container">\n            Loading...\n            </div>\n            '},selectTemplate:function(t){return'<span class="mentions-replaced" data-id="'.concat(t.original.id,'" contenteditable="false">\n            ').concat(t.original.title,"</span>")},menuItemTemplate:function(e){return'<div class="mentions-item__container">\n            <img class="mentions-item__img" src='.concat(t.avatarImage(e.original),'>\n            <div class="mentions-item__text">').concat(e.string,"</div>\n            </div>\n            ")},requireLeadingSpace:!1}}},methods:{fileType:function(t){return"image/"===t.type.substr(0,6)?"image":"video/"===t.type.substr(0,6)?"video":"doc"},removeImage:function(t){this.files.splice(t,1),this.media.splice(t,1)},inputFile:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var o,i,a,r,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t||e){n.next=28;break}if(s.loading||(s.loading=!0),!(t.size>=0&&t.size<s.uploadImageParams.size)){n.next=28;break}if(o=s.media.length+1,i=s.files.push({file:null,order:o,loading:!0,progress:0,name:t.name}),a=500,r=setInterval((function(){s.files[i-1].progress<90?s.files[i-1].progress+=10:s.files[i-1].progress<99&&(s.files[i-1].progress+=3,a=1e3)}),a),s.media.push({file:null,order:o}),"video/"!==t.type.substr(0,6)){n.next=21;break}return n.next=11,Object(f["a"])(t.blob,{quality:.6});case 11:return l=n.sent,n.next=14,l[0].blob.arrayBuffer();case 14:return u=n.sent,d=new File([u],"thumbnail.jpeg",{type:"image/jpeg"}),console.log(d),n.next=19,s.$store.dispatch("profile/uploadImage",{newFile:d});case 19:c=n.sent,console.log(c);case 21:return n.next=23,s.$store.dispatch("profile/uploadImage",{newFile:t,thumbId:c});case 23:p=n.sent,console.log(t),m=s.fileType(t.file),"video"!==m?(s.media[i-1].file=p,s.files[i-1].file=t,s.files[i-1].progress=100,setTimeout((function(){s.files[i-1].loading=!1,clearInterval(r)}),1e3)):setTimeout((function(){s.media[i-1].file=p,s.files[i-1].file=t,s.files[i-1].progress=100,setTimeout((function(){s.files[i-1].loading=!1,clearInterval(r)}),1e3)}),2e3),s.loading&&(s.loading=!1);case 28:case"end":return n.stop()}}),n)})))()},inputFilter:function(t,e,s){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var i,a,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t||e){o.next=26;break}if(!(t.size>=0&&t.size>n.uploadImageParams.size)){o.next=6;break}return n.modalMessageType="error",n.modalMessage="Upload is too large, it can't be more than 1GB",n.$nextTick((function(){n.$refs.showErrorModal.onShow(),n.$nextTick((function(){n.$bvModal.show("error-modal")}))})),o.abrupt("return",s());case 6:if(!/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name)){o.next=8;break}return o.abrupt("return",s());case 8:if(!/\.(php5?|html?|jsx?)$/i.test(t.name)){o.next=10;break}return o.abrupt("return",s());case 10:if(!t||""!==t.error||!t.file||e&&t.file===e.file){o.next=25;break}if(t.blob="",i=window.URL||window.webkitURL,i&&(t.blob=i.createObjectURL(t.file)),t.url="",!t.blob||"image/"!==t.type.substr(0,6)){o.next=19;break}t.url=t.blob,o.next=25;break;case 19:if(!t.blob||"video/"!==t.type.substr(0,6)){o.next=25;break}return o.next=22,Object(f["a"])(t.blob,{quality:.6});case 22:a=o.sent,t.url=t.blob,t.poster=a[1].blob;case 25:!t||""!==t.error||"image/"!==t.type.substr(0,6)||!t.blob||e&&t.blob===e.blob||(t.error="image parsing",r=new Image,r.onload=function(){n.$refs["upload-comment-".concat(n.commentInputId)].update(t,{error:"",height:r.height,width:r.width})},r.Î¿nerrÎ¿r=function(){n.$refs["upload-comment-".concat(n.commentInputId)].update(t,{error:"parsing image size"})},r.src=t.blob);case 26:case"end":return o.stop()}}),o)})))()},getLinkDetails:function(t){this.previewDetails=t},onInput:function(t){this.content=t.target.innerHTML,this.rawText=t.target.innerHTML,this.isEmpty=!1},submitComment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.submitting||!t.content){e.next=11;break}return t.submitting=!0,t.replaceMentionsString(),s="posts"===t.resourceType?t.post:t.comment,e.next=6,t.$store.dispatch("feeds/submitComment",{post:t.post,resource:s,resourceType:t.resourceType,content:t.content,media:t.media});case 6:t.submitting=!1,t.content="",n=document.getElementById(t.commentInputId),n.innerHTML="",t.$emit("submitClicked");case 11:case"end":return e.stop()}}),e)})))()},enterPressed:function(t){t.ctrlKey||t.metaKey?console.log("New Line",t):console.log("Submit",t)},avatarImage:function(t){var e,s,n;return"undefined"!=typeof t&&null!==t&&void 0!==t&&t.picture?(null===(e=t.picture)||void 0===e||null===(s=e.formats)||void 0===s||null===(n=s.thumbnail)||void 0===n?void 0:n.url)||t.picture.url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"},remoteSearch:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.$store.dispatch("post/fetchUserListForMention",t);case 3:o=n.sent,e(o),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},replaceMentionsString:function(){var t=this,e=document.getElementById(this.commentInputId),s=e.getElementsByClassName("mentions-replaced");s.length&&Object(a["a"])(s).forEach((function(e){var s=e.getAttribute("data-id"),n=e.innerText;t.content=t.content.replace(e.outerHTML,"@[".concat(n,"]{").concat(s,"}"))})),this.content=Object(m["htmlToText"])(this.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0})},focus:function(){this.$refs.commentInput.focus()}}},v=g,b=(s("4925"),s("2877")),w=Object(b["a"])(v,u,d,!1,null,"5b64bb5f",null),k=w.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feed-comment-view ui-flex"},[s("div",{staticClass:"f-profile-img"},[s("img",{staticClass:"user-image clickable",attrs:{src:t.profilePicture},on:{click:t.showUserProfile}})]),s("div",{staticClass:"feed-comment-view__wr"},[s("div",{staticClass:"feed-comment-view__comment",on:{click:t.commentContentClick}},[s("div",{staticClass:"feed-comment-view__comment-text"},[s("span",{staticClass:"clickable user-name",on:{click:t.showUserProfile}},[t._v(t._s(t.profile.title))]),t._t("default")],2)]),s("div",{staticClass:"feed-comment-view__action ui-text-right"},[t.isUserAuthenticated&&!t.isOwnComment?s("div",{class:t.comment.upvoted?"comment-like active":"comment-like",on:{click:t.vote}},[t.comment.upvoted?s("button",{staticClass:"ui-btn ui-btn__rounded"},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"}})])]):s("button",{staticClass:"ui-btn ui-btn__rounded"},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"}})])])]):t._e(),t.isUserAuthenticated?s("base-icon-dropdown",{attrs:{"no-caret":"",right:""}},[t.isOwnComment?s("base-list-item-default",{attrs:{button:""},on:{click:function(e){return t.editComment()}}},[t._v(" Edit ")]):t._e(),t.isOwnComment?s("base-list-item-default",{attrs:{button:""},on:{click:t.deleteComment}},[t._v(" Delete ")]):t._e(),t.isOwnComment?t._e():s("base-list-item-default",{attrs:{icon:"icon-report"},nativeOn:{click:function(e){return t.reportComment(e)}}},[t._v(" Report ")])],1):t._e()],1)]),t.showEdit?s("EditCommentModal",{ref:"editCommentModal",attrs:{"edit-comment":t.comment},on:{onClose:t.closeEditModal,onCommentUpdate:function(e){return t.$emit("onCommentUpdate")}}}):t._e()],1)},C=[],y=s("b65d"),x=s("8f1b"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("base-modal",{attrs:{id:"edit-comment-modal",scrollable:"",mount:t.show,"short-height":!0,size:"md"},on:{onClose:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(e){var n=e.close;return[s("div",{staticClass:"image-network-container"},[t.profilePicture?s("img",{staticClass:"user-image",attrs:{src:t.profilePicture,alt:"user"}}):s("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}}),s("div",{staticClass:"header"},[t._v("Edit Comment")])],1),s("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return t.closeModal(n)}}},[s("span",{staticClass:"icon-ic-modal-close"})])]}},{key:"body",fn:function(){return[s("div",{staticClass:"feed-item-new-post"},[s("div",{staticClass:"feed-item-new-post__main"},[s("mentionable-text-area",{ref:"commentField",attrs:{content:t.comment.content},on:{input:function(e){return t.comment.content=e},"mentions-replaced":t.onMentionsReplaced}})],1)])]},proxy:!0},{key:"footer",fn:function(e){var n=e.save;return[s("div",{staticClass:"feed-item-new-post__action"},[s("span",{attrs:{id:"save-button-disabled-container",tabindex:"0"}},[s("button",{staticClass:"ui-btn btn-primary ui-btn__post",attrs:{disabled:!t.comment.content||t.loading},on:{click:function(e){return e.preventDefault(),t.updateComment(n)}}},[t.loading?s("b-spinner",{attrs:{small:"",label:"loader"}}):[t._v(" Save ")]],2)])])]}}],null,!1,221230430)}):t._e()},I=[],M=s("5530"),T=s("7299"),L=s("4f3e"),$=s.n(L),R=s("a6ae"),O=s.n(R),S=s("c0e6"),j=s.n(S),N=s("c627"),E=s.n(N),F=s("ed35"),A={name:"EditCommentModal",components:{BaseModal:T["default"],MentionableTextArea:F["a"]},emits:["onClose","onCommentUpdate"],props:{editComment:{type:Object,required:!0},networkFeed:{type:Boolean,required:!1,default:!1}},data:function(){return{ic_close:E.a,feed_t1:$.a,feed_t2:O.a,feed_t3:j.a,contentClass:"content-class",show:!1,loading:!1,replacedData:null,comment:{id:null,content:null,post:null,parentComment:null}}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n,o,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=t.editComment,n=s.id,o=s.content,i=s.post,a=s.parentComment,console.log("ðŸš€ ~ file: EditCommentModal.vue ~ line 110 ~ mounted ~ this.editComment",t.editComment),t.comment=Object(M["a"])(Object(M["a"])({},t.comment),{},{id:n,content:o,post:i,parentComment:a}),setTimeout((function(){t.editableArea()}),500);case 4:case"end":return e.stop()}}),e)})))()},computed:{profilePicture:function(){var t,e=this.$store.getters["profile/getProfilePicture"];return e?null!==(t=e.formats)&&void 0!==t&&t.thumbnail?e.formats.thumbnail.url:e.url:null}},methods:{editableArea:function(){var t=this.$refs.commentField.$el.firstChild;t.focus(),this.placeCaretAtEnd(t)},placeCaretAtEnd:function(t){if(t.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(e)}else if("undefined"!=typeof document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t),n.collapse(!1),n.select()}},closeModal:function(t){this.resetComment(),t(),this.$emit("onClose")},resetComment:function(){this.comment={id:null,content:null}},toggleModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=t},updateComment:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.loading=!0,e.replaceMentionsString(),s.next=4,e.$store.dispatch("feeds/updateComment",{id:e.comment.id,content:e.comment.content,post:null!==(n=e.comment.post)&&void 0!==n?n:null,parentComment:null!==(o=e.comment.parentComment)&&void 0!==o?o:null});case 4:e.loading=!1,e.$emit("onCommentUpdate"),e.closeModal(t);case 7:case"end":return s.stop()}}),s)})))()},onMentionsReplaced:function(t){this.replacedData=Object(a["a"])(t)},replaceMentionsString:function(){var t=this,e=document.getElementById("mentions-textarea"),s=e.getElementsByClassName("mentions-replaced");s.length&&Object(a["a"])(s).forEach((function(e){var s=e.getAttribute("data-id"),n=e.innerText;t.comment.content=t.comment.content.replace(e.outerHTML,"@[".concat(n,"]{").concat(s,"}"))})),this.comment.content=Object(m["htmlToText"])(this.comment.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0})}}},D=A,U=(s("b8f6"),s("0f9c"),Object(b["a"])(D,P,I,!1,null,"16ff0aeb",null)),B=U.exports,H={name:"FeedItemCommentView",components:{EditCommentModal:B,BaseIconDropdown:y["a"],BaseListItemDefault:x["a"]},props:{profile:Object,comment:Object},computed:{profilePicture:function(){var t,e;return this.profile&&null!==(t=this.profile.picture)&&void 0!==t&&null!==(e=t.formats)&&void 0!==e&&e.thumbnail?this.profile.picture.formats.thumbnail.url:null},isOwnComment:function(){return this.comment.my},isUserAuthenticated:function(){return this.$store.getters["auth/getAuthStatus"]}},data:function(){return{showEdit:!1}},methods:{reportComment:function(){this.$eventBus.$emit("OPEN_REPORT_MODAL",{type:"comment",entityId:this.comment.id,action:"feeds/report",successMessage:"The report has been submitted successfully ",errorMessage:"An error accured while submitting this report please try again later"})},vote:function(){this.$emit("vote")},showUserProfile:function(){var t=this.profile.handle;this.$router.push({path:"/profiles/"+t})},commentContentClick:function(t){var e=this;if(console.log(t),t.target.matches(".mention")){var s=t.target.attributes["data-id"].value;this.$store.dispatch("feeds/getSlugForProfileId",s).then((function(t){if(t){var s="/profiles/"+t;e.$router.push({path:s})}}))}},editComment:function(){var t=this;this.showEdit=!0,this.$nextTick((function(){t.$refs.editCommentModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("edit-comment-modal")}))}))},deleteComment:function(){this.$store.dispatch("feeds/deleteComment",this.comment),this.$emit("onCommentUpdate")},closeEditModal:function(){this.showEdit=!1},openCommentLikeModal:function(t){this.$emit("openCommentModal",{type:"upvote",commentId:t})}}},z=H,V=(s("ce4d"),Object(b["a"])(z,_,C,!1,null,"a3cff718",null)),q=V.exports,W=s("d64d"),K=s.n(W),G=s("be02"),Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{ref:"viewFeed",attrs:{"content-class":"feed-modal",id:"modal-view-img-"+t.post.id,size:"xl",centered:"","modal-class":"view-img-modal","hide-footer":"","dialog-class":"feed-dialog"},scopedSlots:t._u([{key:"modal-header",fn:function(t){var e=t.close;return[s("button",{staticClass:"close",on:{click:function(t){return e()}}},[s("span",{staticClass:"icon-ic-modal-close"})])]}}])},[s("b-row",{staticClass:"img-view-wr",attrs:{"align-h":"center"}},[s("b-col",{staticClass:"img-view-wr__content"},[t.post?s("slider",{attrs:{animation:"normal",autoplay:!1,value:t.slideIndex,height:"100%",width:"100%",speed:300,stopOnHover:!0,"control-btn":1!==t.post.media.length,indicators:!1},on:{change:t.pause}},t._l(t.post.media,(function(e){return s("slider-item",{key:e.id},[e.file&&e.file.mime?s("div",[e.file.mime.includes("image")?s("blur-hash-img",{attrs:{src:e.file,blurhash:e.file.blurHash,imageClass:"img-view-wr__slides",height:517}}):s("b-embed",{attrs:{type:"video",allowfullscreen:"",controls:"",aspect:"1by1",controlsList:"nodownload"},on:{canplay:t.updatePaused,playing:t.updatePaused,pause:t.updatePaused}},[s("source",{attrs:{src:e.file.url}})])],1):t._e()])})),1):t._e()],1),t.post?s("b-col",{staticClass:"info-col"},[s("div",{staticClass:"info-wr"},[s("div",{staticClass:"info-wr__user"},[s("div",{staticClass:"user-profile-img"},[s("img",{staticClass:"user-image clickable",attrs:{src:t.post.profile.picture.formats&&t.post.profile.picture.formats.thumbnail?t.post.profile.picture.formats.thumbnail.url:t.post.profile.picture.url},on:{click:t.showUserProfile}}),s("span",{staticClass:"user-status user-status--online"})]),s("div",{staticClass:"user-profile-title"},[s("p",{staticClass:"user-name clickable",on:{click:t.showUserProfile}},[t._v(" "+t._s(t.post.profile.title)+" ")]),s("img",{staticClass:"user-badge",attrs:{src:t.ic_badge1}})]),s("div",{staticClass:"user-profile-desc"},[s("p",{staticClass:"user-extra"},[t._v(t._s(t.post.profile.subtitle))])])]),s("div",{staticClass:"info-wr__desc",on:{click:t.postContentClick}},[s("p",{domProps:{innerHTML:t._s(t.formattedText)}})]),s("div",{staticClass:"info-wr__reaction ui-flex"},[s("div",{staticClass:"ui-flex ui-flex-grow ui-align-center feed-react-show-wr"},[s("div",{staticClass:"\n                  ui-flex ui-flex-grow ui-align-center\n                  feed-react-show-wr clickable",on:{click:function(e){return t.openLikeModal()}}},[t.post.reactions&&t.post.reactions.length>0?s("div",{staticClass:"feed-react-show feed-react-stack click",style:{"background-color":"var(--color-feed-reaction-1)"}},[s("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[0].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>1?s("div",{staticClass:"feed-react-show feed-react-stack",style:{"background-color":"var(--color-feed-reaction-2)"}},[s("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[1].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>2?s("div",{staticClass:"feed-react-show feed-react-stack"},[s("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[2].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>0?s("span",{staticClass:"feed-reaction-text"},[t._v(" "+t._s(t.totalReactions>3?"and "+(t.totalReactions-3)+" "+(t.totalReactions-3>1?"others":"other"):""))]):t._e()]),t.post.bookmarksCount>0?s("p",{staticClass:"ui-flex ui-align-center"},[s("span",{staticClass:"feed-reaction-text"},[t._v(t._s(t.post.bookmarksCount)+" Saved")])]):t._e(),t.post.commentsNumber>0?s("p",{staticClass:"ui-flex ui-align-center"},[s("span",{staticClass:"feed-reaction-text"},[t._v(t._s(t.post.commentsNumber)+" "+t._s(t.post.commentsNumber>1?"Comments":"Comment"))])]):t._e()]),s("div")]),"posts"!==t.post.resourceType&&"comments"!==t.post.resourceType?s("div",{staticClass:"info-wr__action",class:t.isOwnPost?"feed-item__action-two-col":""},[t.isOwnPost?t._e():s("div",{staticClass:"feed-like-main"},[s("div",{staticClass:"feed-like-main__inner"},[s("div",{staticClass:"ui-flex feed-like-main__set"},t._l(t.reactionLists,(function(e){return s("button",{key:e.id,staticClass:"ui-btn__transparent ui-btn__feed-react",on:{click:function(s){return t.react(e._id)}}},[s("span",{staticClass:"ui-btn__feed-react-text"},[t._v(t._s(e.name))]),s("img",{attrs:{src:e.icon.url}})])})),0)]),t.reacted?t._e():s("button",{staticClass:"ui-btn ui-btn__transparent",class:this.post.upvoted?"active":"",on:{click:function(e){return t.react(t.reactionLists[0].id)}}},[s("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"}})]),t._v(" "+t._s(t.reactionLists[0].name)+" ")]),t.reacted?s("button",{staticClass:"ui-btn ui-btn__transparent active",staticStyle:{color:"#D97706"},on:{click:function(e){return t.react(t.reacted.id)}}},[s("img",{staticClass:"btn-icon",attrs:{src:t.reacted.icon.url}}),s("span",{staticClass:"btn-text--react"},[t._v(t._s(t.reacted.name))])]):t._e()]),s("button",{staticClass:"ui-btn ui-btn__transparent",on:{click:t.sharePost}},[s("span",{staticClass:"icon-ic-share"}),t._v("Share ")])]):t._e()])]):t._e()],1),t.showShare?s("share-post-modal",{ref:"sharePostModal",attrs:{sharePost:t.post},on:{close:t.closeShareModal}}):t._e(),s("user-reaction-list-modal",{ref:"reactUserListModal",attrs:{show:t.showUseReactionListModal,post:t.post,reactionClicked:"reactions",commentId:""},on:{close:t.closeReactListModal}})],1)},Q=[],J=s("d0bd"),Z=s.n(J),X=s("cd9a"),tt=s("dfb0"),et=s("7c45"),st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("base-modal",{attrs:{id:"react-user-list-modal","no-close-on-backdrop":!1,modalContentClass:"user-reaction-list",title:t.modalTitle,size:"md",mount:t.show,modalDialogClass:"user-reaction-dialog",hideFooter:!0},on:{hide:t.onHide,onShow:t.onShow,onClose:t.onHide},scopedSlots:t._u([{key:"body",fn:function(){return[s("div",{staticClass:"user-reaction-list__body"},[s("b-tabs",{attrs:{"content-class":"mt-3","nav-class":"custom-tab","nav-wrapper-class":"custom-wrapper",align:"center",fill:""}},t._l(t.reactionLists,(function(e,n){return s("b-tab",{key:n,attrs:{"title-link-class":"custom-nav",active:e.id==t.reactionListId},on:{click:function(s){return t.selectedReactionTab(e.id)}},scopedSlots:t._u(["upvote"!==t.reactionListId?{key:"title",fn:function(){return[e.url?s("div",{staticClass:"reaction-image-icon"},[s("img",{attrs:{src:e.url}}),s("span",{staticClass:"reaction-count"},[t._v(" "+t._s(e.count)+" ")])]):s("div",{staticClass:"reaction-text"},[t._v(" "+t._s(e.text)+" "),s("span",[t._v(" "+t._s(e.count)+" ")])])]},proxy:!0}:null],null,!0)},[t._l(t.showUserReactedLists,(function(n){return s("div",{key:n.id,staticClass:"user-reaction-list__content"},[s("div",{staticClass:"user-reaction-profile-img"},[s("img",{staticClass:"user-image clickable",attrs:{src:n.profile.picture?n.profile.picture.formats&&n.profile.picture.formats.thumbnail?n.profile.picture.formats.thumbnail.url:n.profile.picture.url:t.defaultAvatarImage}}),s("span",{staticClass:"user-status"},["upvote"==t.reactionListId?s("img",{attrs:{src:e.url}}):s("img",{attrs:{src:n.url}})])]),s("div",{staticClass:"user-reaction-list__content__title",on:{click:function(e){return t.redirectToUserProfile(n.profile.handle)}}},[t._v(" "+t._s(n.profile.title)+" ("+t._s(n.profile.handle)+") ")])])})),s("infinite-loading",{ref:"InfiniteLoading",refInFor:!0,attrs:{identifier:t.infiniteId,spinner:""},on:{infinite:t.infiniteHandler}},[s("div",{attrs:{slot:"no-results"},slot:"no-results"}),s("div",{attrs:{slot:"no-more"},slot:"no-more"})])],2)})),1)],1)]},proxy:!0}])})},nt=[],ot=(s("4de4"),s("952f")),it=s.n(ot),at=s("e166"),rt=s.n(at),ct={name:"UserReactionListModal",components:{BaseModal:T["default"],InfiniteLoading:rt.a},props:{post:{type:Object,required:!0},reactionClicked:{type:String,required:!1},commentId:{type:String,required:!1}},data:function(){return{page:1,show:!1,like:it.a,userReactedLists:[],userUpvotedLists:[],infiniteId:new Date,reactionListId:this.reactionClicked,defaultAvatarImage:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"}},watch:{reactionClicked:function(){this.reactionListId=this.reactionClicked}},computed:{modalTitle:function(){return this.commentId?"Comment Likes":"upvote"==this.reactionListId?"Likes":"Reactions"},allreactionLists:function(){return this.$store.getters["feeds/getReactionList"]},reactionLists:function(){if("upvote"==this.reactionListId){var t={url:it.a,id:"upvote",count:this.post.upvotesCount};return[t]}var e={text:"All",id:"reactions",count:this.totalReactions};return[e].concat(Object(a["a"])(this.postReacionList))},postReacionList:function(){return this.post.reactions.map((function(t){return{url:t.reaction.icon.url,id:t.reaction.id,count:t.count}}))},showAllReactionsList:function(){return this.userReactedLists},showUserReactedLists:function(){var t=this,e=[];return e="upvote"==this.reactionListId||"reactions"==this.reactionListId?this.userReactedLists:this.userReactedLists.filter((function(e){return e.reaction==t.reactionListId})),e.map((function(e){var s=t.reactionLists.find((function(t){return t.id===e.reaction}))||{};return Object(M["a"])(Object(M["a"])({},e),{},{url:s.url})}))},totalReactions:function(){for(var t=0,e=this.post.reactions,s=0;s<e.length;s++)t+=e[s].count;return t}},mounted:function(){},methods:{selectedReactionTab:function(t){this.reactionListId=t,"reactions"==this.reactionListId&&this.userReactedLists.length>=20&&(this.infiniteId=new Date),this.page=1},onShow:function(){this.show=!0},toggleModal:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.show=t,this.page=1,this.userReactedLists=[]},onHide:function(){this.show=!1,this.$emit("close")},infiniteHandler:function(t){var e=this;this.getUserReactedLists().then((function(s){s.length?(e.userReactedLists=[].concat(Object(a["a"])(e.userReactedLists),Object(a["a"])(s)),e.page+=1,t.loaded()):t.complete()}))},getUserReactedLists:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.commentId){e.next=4;break}return e.next=3,t.$store.dispatch("feeds/getLikeCommentMemberLists",{commentId:t.commentId,page:t.page,type:t.reactionListId});case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,t.$store.dispatch("feeds/getPostListRectionList",{postId:t.post.id,page:t.page,type:t.reactionListId});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},redirectToUserProfile:function(t){this.$router.push({path:"/profiles/"+t})}}},lt=ct,ut=(s("ca02"),Object(b["a"])(lt,st,nt,!1,null,"570b085d",null)),dt=ut.exports,pt={name:"ModalViewImg",components:{Slider:X["a"],SliderItem:X["b"],SharePostModal:tt["a"],BlurHashImg:et["a"],UserReactionListModal:dt},props:["post"],data:function(){return{showShare:!1,ic_badge1:Z.a,ic_close:E.a,videoElement:null,showUseReactionListModal:!1}},computed:{reactionLists:function(){var t=Object(a["a"])(this.$store.getters["feeds/getReactionList"]);return t.sort((function(t,e){return t.order-e.order}))},isOwnPost:function(){return this.post.my},slideIndex:function(){return this.$store.getters["feeds/getSlideNumberForModal"]},likeText:function(){return this.post.upvoted?"Liked":this.post.downvoted?"Disliked":"Like"},totalReactions:function(){for(var t=0,e=this.post.reactions,s=0;s<e.length;s++)t+=e[s].count;return t},reacted:function(){return this.post.reacted},reaction:function(){return this.post.reacted},formattedText:function(){return Object(G["a"])(this.$sanitize(this.post.summary))}},methods:{closeReactListModal:function(){this.showUseReactionListModal=!1},openLikeModal:function(){var t=this;this.showUseReactionListModal=!0,this.$refs.reactUserListModal.toggleModal(!0),this.$nextTick((function(){t.$bvModal.show("react-user-list-modal")}))},updatePaused:function(t){this.videoElement=t.target},pause:function(){this.videoElement&&this.videoElement.pause()},showUserProfile:function(){this.$refs.viewFeed.hide();var t=this.post.profile.handle;this.$router.push({path:"/profiles/"+t})},sharePost:function(){var t=this;this.showShare=!0,this.$nextTick((function(){t.$nextTick((function(){t.$refs.sharePostModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("share-post-modal-".concat(t.post.id))}))}))}))},upvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.downvoted){s.next=5;break}return s.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"upvote"});case 3:s.next=12;break;case 5:if(!t.upvoted){s.next=10;break}return s.next=8,e.$store.dispatch("feeds/deletePostVote",{post:t});case 8:s.next=12;break;case 10:return s.next=12,e.$store.dispatch("feeds/votePost",{post:t,type:"upvote"});case 12:case"end":return s.stop()}}),s)})))()},downvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.upvoted){s.next=5;break}return s.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"downvote"});case 3:s.next=12;break;case 5:if(!t.downvoted){s.next=10;break}return s.next=8,e.$store.dispatch("feeds/deletePostVote",{post:t});case 8:s.next=12;break;case 10:return s.next=12,e.$store.dispatch("feeds/votePost",{post:t,type:"downvote"});case 12:case"end":return s.stop()}}),s)})))()},react:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.post.reacted||e.post.reacted.id!==t){s.next=6;break}return n={postId:e.post.id},s.next=4,e.$store.dispatch("feeds/deletePostReaction",n);case 4:s.next=9;break;case 6:return o={postId:e.post.id,reactionId:t},s.next=9,e.$store.dispatch("feeds/reactToPost",o);case 9:case"end":return s.stop()}}),s)})))()},closeShareModal:function(){this.showShare=!1},postContentClick:function(t){var e=this;if(t.target.matches(".mention")){console.log(t);var s=t.target.attributes["data-id"].value;this.$store.dispatch("feeds/getSlugForProfileId",s).then((function(t){if(t){var s="/profiles/"+t;e.$router.push({path:s})}}))}}}},mt=pt,ft=(s("b3c6"),Object(b["a"])(mt,Y,Q,!1,null,"0a20713f",null)),ht=ft.exports,gt={name:"FeedItemComments",components:{FeedItemCommentView:q,FeedItemCommentInput:k,ModalViewImg:ht},props:{post:Object,showComments:Boolean,allowComment:Boolean,initialCommentsLoading:{type:Boolean,default:!1}},data:function(){return{ic_like:K.a,reply_to:null,replyToReply:null,keyComponent:0,replyLoading:!1,commentPage:1,currentCommentClicked:{},showModal:!1,moreCommentsLoading:this.initialCommentsLoading}},watch:{initialCommentsLoading:function(t){this.moreCommentsLoading=t},post:function(t){console.log("ðŸš€ ~ file: ItemComments.vue ~ line 151 ~ post ~ value",t)}},computed:{isUserOnboarded:function(){return this.$store.getters["profile/getProfileOnboarded"]},isUserAuthenticated:function(){return this.$store.getters["auth/getAuthStatus"]}},methods:{openModal:function(t,e){var s=this;if(this.currentCommentClicked=e,1==e.media.length&&e.media[0].file.mime.includes("video"))return!1;this.$store.commit("feeds/changeSlideIndex",t),this.showModal=!0,this.$nextTick((function(){s.$bvModal.show("modal-view-img-".concat(e.id))}))},getMediaUrl:function(t){var e,s,n,o;return(null===(e=t.file)||void 0===e||null===(s=e.formats)||void 0===s||null===(n=s.small)||void 0===n?void 0:n.url)||(null===(o=t.file)||void 0===o?void 0:o.url)},openCommentLikeModal:function(t){this.$emit("openCommentModal",{type:"upvote",commentId:t})},viewMoreComments:function(t){return!!(t.comments&&t.topLevelCommentsNumber&&t.topLevelCommentsNumber>t.comments.length)},toggleReply:function(t){this.isUserOnboarded||this.allowComment?(this.replyToReply&&(this.replyToReply=null),this.reply_to===t.id?this.reply_to=null:this.reply_to=t.id):this.$bvModal.show("onboard-modal")},filteredComments:function(t){var e=Object(a["a"])(new Set(t.map((function(t){var e=t.id;return e})))),s=e.map((function(e){return t.find((function(t){return t.id===e}))}));return s},filteredReplies:function(t){if(t&&t.length>0){var e=Object(a["a"])(new Set(t.map((function(t){var e=t.id;return e})))),s=e.map((function(e){return t.find((function(t){return t.id===e}))}));return s}},toggleReplyToReply:function(t,e){this.reply_to&&(this.reply_to=null),this.replyToReply===e.id?this.replyToReply=null:this.replyToReply=e.id},moreReplyCount:function(t){var e=this.filteredReplies(t.replies);return!(!e||!e.length)&&t.repliesCount-e.length},upvote:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s.isUserOnboarded){n.next=3;break}return s.$bvModal.show("onboard-modal"),n.abrupt("return");case 3:if(n.prev=3,!t.downvoted&&!t.upvoted){n.next=9;break}return n.next=7,s.$store.dispatch("feeds/deleteCommentVote",{post:s.post,comment:t,parentComment:e}).then((function(){s.incrementKey()}));case 7:n.next=11;break;case 9:return n.next=11,s.$store.dispatch("feeds/voteComment",{post:s.post,comment:t,parentComment:e,type:"upvote"}).then((function(){s.incrementKey()}));case 11:n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](3),s.$bvToast.toast(n.t0.message,{autoHideDelay:2e3,noCloseButton:!0,variant:"danger",toaster:"b-toaster-top-center",solid:!0});case 16:case"end":return n.stop()}}),n,null,[[3,13]])})))()},incrementKey:function(){this.keyComponent+=1},onSubmitClicked:function(){this.incrementKey(),console.log(this.keyComponent),this.reply_to=null,this.replyToReply=null},focusOnCommentInput:function(){this.$refs.commentInput.focus()},convertMentionsOfContent:function(t){if(null!==t){var e=Object(G["a"])(this.$sanitize(t));t.replace(/(?:\r\n|\r|\n)/g,"<br/>");var s=new RegExp(/@(.*?)\}/g),n=new RegExp(/\[(.*?)\]/g),o=new RegExp(/\{(.*?)\}/g),i=e.match(s);if(i&&i.length){var a,r=Object(l["a"])(i);try{for(r.s();!(a=r.n()).done;){var c,u=a.value,d=void 0,p=void 0,m=Object(l["a"])(u.matchAll(n));try{for(m.s();!(c=m.n()).done;){var f=c.value;d=f[1]}}catch(b){m.e(b)}finally{m.f()}var h,g=Object(l["a"])(u.matchAll(o));try{for(g.s();!(h=g.n()).done;){var v=h.value;p=v[1]}}catch(b){g.e(b)}finally{g.f()}e=e.replace(u,'<button class="mention" data-id="'.concat(p,'" contenteditable="false">\n            ').concat(d,"</button>"))}}catch(b){r.e(b)}finally{r.f()}}return e}return""},showMoreComments:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.moreCommentsLoading=!0,t.commentPage+=1,e.next=4,t.$store.dispatch("feeds/getPostComments",{post:t.post,page:t.commentPage});case 4:t.moreCommentsLoading=!1,t.incrementKey();case 6:case"end":return e.stop()}}),e)})))()},showMoreReplies:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.replyLoading=!0,s.next=3,e.$store.dispatch("feeds/fetchRepliesByComment",{commentId:t.id,offset:t.replies.length,postId:e.post.id});case 3:e.replyLoading=!1,e.incrementKey();case 5:case"end":return s.stop()}}),s)})))()}}},vt=gt,bt=(s("55da"),s("9be6"),Object(b["a"])(vt,r,c,!1,null,"bdb319ba",null)),wt=bt.exports,kt=s("db0f"),_t=s.n(kt),Ct=s("0af5"),yt=s.n(Ct),xt=s("88ce"),Pt=s.n(xt),It=s("0b3f"),Mt=s.n(It),Tt=s("3444"),Lt=s.n(Tt),$t=s("7775"),Rt=s.n($t),Ot=s("8987"),St=s.n(Ot),jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[""!==t.bannerImage?s("div",{on:{click:function(e){return t.openModal(0)}}},[t.bannerImage.file&&t.bannerImage.file.mime&&t.bannerImage.file.mime.includes("image")?s("blur-hash-img",{staticClass:"mb-1",attrs:{src:t.bannerImage.file,blurhash:t.bannerImage.blurHash,imageClass:"banner-image",height:t.height}}):t._e(),t.bannerImage.file.mime&&t.bannerImage.file.mime.includes("video")&&1===this.post.media.length&&t.bannerImage.file?s("div",{staticClass:"video-wrapper mb-1",style:{height:t.height+"px","max-height":"578px"}},[s("div",{staticClass:"video-wrapper__overlay"},[s("img",{staticClass:"play-btn-feed ",attrs:{src:t.ic_play_arrow_white},on:{click:t.play}})]),t.bannerImage.file.thumb&&t.bannerImage.file.thumb.url&&!t.playVideo?s("blur-hash-img",{staticClass:"mb-1",attrs:{src:t.bannerImage.file.thumb,blurhash:t.bannerImage.file.thumb.blurHash,imageClass:"banner-image",height:t.height},on:{playingVideo:t.play}}):s("b-embed",{style:{height:t.height+"px","max-height":"578px"},attrs:{type:"video",allowfullscreen:"",controls:"",autoplay:t.playVideo,aspect:t.aspectRatio,controlsList:"nodownload"}},[s("source",{attrs:{src:t.bannerImage.file.url+"#t=0.1"}})])],1):t._e(),t.bannerImage.file.mime&&t.bannerImage.file.mime.includes("video")&&this.post.media.length>1&&t.bannerImage.file?s("div",{staticClass:"video-wrapper mb-1"},[s("b-embed",{attrs:{type:"video",allowfullscreen:"",controls:"",controlsList:"nodownload",poster:t.bannerImage.file.thumb.url},on:{canplay:t.updatePaused,playing:t.updatePaused,pause:t.updatePaused}},[s("source",{attrs:{src:t.bannerImage.file.url+"#t=0.1",type:t.bannerImage.file.mime}})]),s("span",{staticClass:"icon-video-play video-wrapper__overlay video-wrapper__banner"})],1):t._e()],1):t._e(),t.gridImages.length>0?s("div",{staticClass:"f-post__multiple-img"},t._l(t.gridImages,(function(e,n){return s("div",{key:t.post.id+"-"+(e.file._id?e.file._id:e.file.hash),staticClass:"img-cell flex-fill",class:{"f-post__multiple-img__background-black":e.file.mime.includes("video")},on:{click:function(e){return t.openModal(t.bannerImage?n+1:n)}}},[e.file.mime.includes("video")?s("div",{staticClass:"video-wrapper mb-1"},[s("b-embed",{attrs:{type:"video",aspect:"1by1",allowfullscreen:"",poster:e.file.thumb.url},on:{canplay:t.updatePaused,playing:t.updatePaused,pause:t.updatePaused}},[s("source",{attrs:{src:e.file.url+"#t=0.1",type:e.file.mime}})]),s("span",{staticClass:"icon-video-play video-wrapper__overlay"})],1):s("blur-hash-img",{attrs:{src:e.file,blurhash:e.file.blurHash,imageClass:"banner-image"}}),t.post.media.length>4&&3===n?[s("div",{staticClass:"img-cell__overlay"}),s("div",{staticClass:"img-cell__count"},[t._v("+"+t._s(t.post.media.length-4))])]:t._e()],2)})),0):t._e(),t.showModal?s("modal-view-img",{attrs:{post:t.post}}):t._e()],1)},Nt=[],Et=(s("2ca0"),s("d3f1")),Ft=s.n(Et),At=s("065b"),Dt=s.n(At),Ut=s("e4c8"),Bt=s.n(Ut),Ht={name:"FeedPostGridImg",components:{ModalViewImg:ht,BlurHashImg:et["a"]},props:{post:{type:Object,required:!1}},data:function(){return{videoElement:null,paused:null,ic_play:Ft.a,ic_pause:Dt.a,showModal:!1,playVideo:!1,ic_play_arrow_white:Bt.a}},computed:{videoHeightGreater:function(){var t;return null===(t=this.bannerImage.file)||void 0===t||!t.thumb||this.bannerImage.file.thumb.height>this.bannerImage.file.thumb.width},height:function(){var t,e,s,n;this.bannerImage.file.mime.includes("video")?(t=null===(s=this.bannerImage.file.thumb)||void 0===s?void 0:s.height,e=null===(n=this.bannerImage.file.thumb)||void 0===n?void 0:n.width):(t=this.bannerImage.file.height,e=this.bannerImage.file.width);return t/e*578},aspectRatio:function(){if(this.videoHeightGreater)return"1by1";var t=this.bannerImage.file.thumb.height/this.bannerImage.file.thumb.width*100;switch(t){case 75:return"4by3";default:return"16by9"}},images:function(){return this.post.media.filter((function(t){return t.file})).map((function(t){var e,s,n=(null===(e=t.file)||void 0===e||null===(s=e.formats)||void 0===s?void 0:s.small)||t.file;return n&&(n.url=n.url.startsWith("https")?n.url:"https://".concat(n.url)),{file:n,blurHash:t.file.blurHash}}))},bannerImage:function(){return[1,3].includes(this.images.length)?this.images[0]:""},gridImages:function(){return this.images.slice().splice(this.bannerImage?1:0,this.bannerImage?2:4)},showGridImages:function(){return this.gridImages},playing:function(){return!this.paused}},methods:{isValid:function(){},openModal:function(t){var e=this;if(1==this.post.media.length&&this.post.media[0].file.mime.includes("video"))return!1;this.$store.commit("feeds/changeSlideIndex",t),this.showModal=!0,this.$nextTick((function(){e.$bvModal.show("modal-view-img-".concat(e.post.id))}))},updatePaused:function(t){t.target.pause()},play:function(){this.playVideo=!0}}},zt=Ht,Vt=(s("8295"),Object(b["a"])(zt,jt,Nt,!1,null,"59a732c2",null)),qt=Vt.exports,Wt=s("c6aa"),Kt=s("e832"),Gt=s("7c89"),Yt=s.n(Gt),Qt=s("6302"),Jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("base-modal",{attrs:{id:"share-on-feed-modal",scrollable:"",mount:t.show,size:"md",newPost:""},on:{onClose:t.closeModal,onShow:t.onShow},scopedSlots:t._u([{key:"header",fn:function(e){var n=e.close;return[s("div",{class:""===t.body?"header-wr":"category-header-wr"},[""===t.body?s("div",{staticClass:"new-post__header--left"},[s("div",{staticClass:"new-post-header-content"},[s("div",{staticClass:"user-image"},[t.profilePicture?s("img",{staticClass:"user-image",attrs:{src:t.profilePicture.url,alt:"user"}}):s("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}})],1),s("div",{staticClass:"network-tags__label"},[s("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("network")}}},[s("span",{staticClass:"REPLACE-WITH-FONT-ICON networkBtnTxt"},[t._v(" "+t._s(t.networkTitle)+" ")]),s("span",{staticClass:"REPLACE-WITH-FONT-ICON mobileNetworkBtnTxt"},[t._v(" "+t._s(t.mobileNetworkTitle)+" ")]),s("span",{staticClass:"icon-select-arrow-bottom network-name__icon"})])])])]):s("div",{staticClass:"category-header"},[s("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[s("span",{staticClass:"icon-ic-arrow-back"})]),s("span",{staticClass:"modalTitle"},[t._v(t._s(t.modalTitle))])]),s("div",{staticClass:"modal-top-header"},[s("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return t.closeModal(n)}}},[s("span",{staticClass:"icon-ic-modal-close"})]),""===t.body?s("span",{staticClass:"mobile-view",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[""===t.body?s("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(e){return e.preventDefault(),t.onSharePost(e)}}},[t.posting?s("b-spinner",{attrs:{small:"",label:"loader"}}):s("span",[t._v("Share ")])],1):s("button",{staticClass:"ui-btn btn-primary ui-btn__schedule-post",style:{color:"#ffffff"}},[s("b-spinner",{attrs:{small:"",label:"loader"}})],1)]):t._e()])])]}},{key:"body",fn:function(){return[s("div",{staticClass:"feed-item-new-post"},[s("div",{class:""===t.body?"":"ui-hide"},[s("div",{staticClass:"feed-item-new-post__main",class:t.post.media.length>0?"with-media":null},[s("b-form-textarea",{staticClass:"share-description",attrs:{placeholder:"Add a comment...",rows:"1","max-rows":"7"},model:{value:t.shareDescription,callback:function(e){t.shareDescription=e},expression:"shareDescription"}}),s("div",{staticClass:"feed-item-container"},[s("feed-item",{staticClass:"feed-item",attrs:{allowActions:!1,"network-feed":!1,post:t.post}})],1)],1)]),"network"===t.body?s("div",{staticClass:"network-select-wr"},[s("base-input-search",{attrs:{placeholder:"Search Networks..","clear-on-focus-out":!1},on:{input:t.onNetworkSearchInputChange}}),t._l(t.networkList,(function(e){return s("base-list-item-bold",{key:e.id,staticClass:"network-select",attrs:{href:"#",icon:e.banner?e.banner.url:t.genericNetwork,name:e.name},nativeOn:{click:function(s){return t.selectNetwork(e)}}})}))],2):t._e()])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"footer-wr"},[t.post.networkDisplay&&""===t.body?s("div",{staticClass:"feed-item-new-post__info"},[s("span",{staticClass:"icon-info feed-item-new-post__info__icon"}),s("span",{staticClass:"feed-item-new-post__info__text"},[t._v(t._s(t.post.networkDisplay))])]):t._e(),""===t.body?s("div",{staticClass:"feed-item-new-post__action modal-footer-narrow"},[s("span",{staticClass:"not-mobile",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[""===t.body?s("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(e){return e.preventDefault(),t.onSharePost(e)}}},[t.posting?s("b-spinner",{attrs:{small:"",label:"loader"}}):s("span",[t._v(" Share ")])],1):s("button",{staticClass:"ui-btn btn-primary ui-btn__schedule-post",style:{color:"#ffffff"}},[s("b-spinner",{attrs:{small:"",label:"loader"}})],1)])]):s("button",{staticClass:"noButton"})])]},proxy:!0}],null,!1,1519185098)}):t._e()],1)},Zt=[],Xt=s("efca"),te=s.n(Xt),ee=s("2ef0"),se=s("1222"),ne=function(){return Promise.resolve().then(s.bind(null,"a508"))},oe=function(){return Promise.resolve().then(s.bind(null,"123f"))},ie={name:"ShareOnFeedModal",components:{BaseInputSearch:oe,FeedItem:ne,BaseListItemBold:se["default"],BaseModal:T["default"]},emits:["onClose"],props:{sharePost:{type:Object,required:!1},networkFeed:{type:Boolean,required:!1}},data:function(){return{mobile:!1,posting:!1,body:"",generalError:!1,show:!1,networkSearchText:"",genericNetwork:te.a,post:null,img:{url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"},shareDescription:"",networkDisplay:""}},mounted:function(){this.post=Object(M["a"])(Object(M["a"])({},Object(ee["omit"])(this.sharePost,"activity")),{},{networkId:"5f2b93ddb3ab1f5de0638e9f",networkName:"General"})},computed:{networkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},mobileNetworkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},placeholderText:function(){return"Add a note..."},postButtonStyle:function(){var t={"background-color":"transparent"};return t},modalTitle:function(){return"Select a hub and share"},profile:function(){var t=this.$store.getters["profile/getProfile"];return t},profilePicture:function(){var t=this.$store.getters["profile/getProfilePicture"];return this.profile.fetched?t||this.img:null},networkList:function(){var t=this;return this.networkSearchText?this.$store.getters["networks/getMyNetworks"].filter((function(e){return e.name.toLowerCase().includes(t.networkSearchText.toLowerCase())})):this.$store.getters["networks/getMyNetworks"]}},methods:{goBack:function(){this.networkSearchText="",this.body=""},onSharePost:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.posting=!0,s=t.post.id,n=t.post.networkId,e.prev=3,e.next=6,t.$store.dispatch("feeds/sharePostOnFeed",{postId:s,networkId:n,shareDescription:t.shareDescription});case 6:t.resetPost(),t.$emit("onClose"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:return e.prev=13,t.posting=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},closeWarningModal:function(t){t()},closeWarningandClearModal:function(t){this.resetPost(),t()},closeModal:function(t){this.resetPost(),this.$emit("onClose"),t()},handleBody:function(t){console.log("bodyView",t),this.body=t},toggleModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=t},resetPost:function(){this.post={},this.networkSearchText=""},onShow:function(){},selectNetwork:function(t){this.body="",this.networkSearchText="",this.post.networkId=t.id,this.post.networkName=t.name,this.post.networkDisplay=t.networkDisplay},onNetworkSearchInputChange:function(t){this.networkSearchText=t},openGoToNetworkModal:function(){var t=this;console.log("OPEN GO TO NETWORK MODAL"),console.log(this.post.content),this.post.content&&null!=this.post.content?this.$nextTick((function(){t.$bvModal.show("new-network-warning-modal")})):this.goToNetworkPage()},goToNetworkPage:function(){this.posting=!1,this.resetPost(),this.$root.$emit("bv::hide::modal","new-post-modal"),this.$router.push({path:"/hubs/discover"})}}},ae=ie,re=(s("0475"),s("89c5"),Object(b["a"])(ae,Jt,Zt,!1,null,"6e8cb213",null)),ce=re.exports,le=s("9029"),ue={name:"FeedItem",metaInfo:function(){return{meta:[{property:"og:type",content:"website"},{property:"og:description",content:this.post.summary},{property:"og:title",content:this.post.title},{property:"og:url",content:"".concat("https://bizfluenceapp.com","/posts/").concat(this.post.slug)},{property:"og:image",content:"https://bizfluence-media.nyc3.cdn.digitaloceanspaces.com/526ba2ce49bac0ab6a7fe72e8f6fc652.png"}]}},components:{BaseWarningModal:Kt["a"],BaseListItemDefault:x["a"],BaseIconDropdown:y["a"],FeedPostGridImg:qt,FeedItemComments:wt,EditPostModal:Wt["a"],SharePostModal:tt["a"],UserReactionListModal:dt,LinkPreview:Qt["default"],ShareOnFeedModal:ce},props:{classDropdown:{type:String},post:{type:Object,required:!1},networkFeed:{type:Boolean,required:!1},isSinglePost:{type:Boolean,required:!1,default:!1},allowActions:{type:Boolean,required:!1,default:!0}},data:function(){return{parsePost:G["a"],seeFullActivityText:!1,maxActivityText:le["isMobileOnly"]?80:180,showSharePostOnFeed:!1,initialCommentsLoading:!1,componentKey:0,showComments:!(!this.isSinglePost||!this.post.comments),showEdit:!1,showShare:!1,showUseReactionListModal:!1,readMore:!1,titleMouseOver:!1,reactionMouseOver:!1,ic_badge1:Z.a,ic_arrow:_t.a,ic_f_comment:yt.a,ic_f_follow:Pt.a,ic_f_share:Mt.a,ic_f_edit:Rt.a,ic_f_save:Lt.a,ic_pin:St.a,ic_count:Yt.a,reactionClicked:"",commentId:"",pointValue:"+4",linkPreview:null,likeImage:{class:"icon-ic-like",src:null},like:it.a}},mounted:function(){this.linkPreview=this.post.linkPreview},computed:{activityContent:function(){switch(this.post.activity.type){case"share":return this.post.activity.shareDescription;case"comment":return this.post.activity.comment.content;default:return""}},lastActivityText:function(){var t="";switch(this.post.activity.type){case"reaction":t=" reacted on this post";break;case"comment":t=" commented on this post";break;case"share":t=" shared this post ".concat(this.networkFeed?"":"to ");break}return t},isAdmin:function(){var t=this.$store.getters["network/getAdmins"].map((function(t){return t.userId}));return this.networkFeed&&t.includes(this.$store.getters["profile/getUserId"])},typeIcon:function(){var t="icon-"+this.post.postType;return t},postTypeText:function(){var t,e=(null===(t=this.post.postType)||void 0===t?void 0:t.charAt(0).toUpperCase())+this.post.postType.slice(1)||"";return e.match(/[A-Z][a-z]+/g).join(" ")},postTypeIcon:function(){var t="icon-"+this.post.postType;return console.log(t),t},langDir:function(){return"Hebrew"===this.post.lang||"Arabic"===this.post.lang||"Kurdish"===this.post.lang||"Persian"===this.post.lang||"Urdu"===this.post.lang},completeLinkPreview:function(){var t=!0;return t=!!this.post.linkPreview&&(!!this.post.linkPreview.display&&(!!this.post.linkPreview.domain&&(!!this.post.linkPreview.title&&(!!this.post.linkPreview.description&&!!this.post.linkPreview.image)))),t},abreviatePoints:function(){var t=this.post.profile.points,e="";return e=t>1e6?Math.round(t/1e5)/10+" m":t>5e3?Math.round(t/100)/10+" k":t,e},profilePicture:function(){var t;return this.post&&this.post.profile&&this.post.profile.picture?null!==(t=this.post.profile.picture.formats)&&void 0!==t&&t.thumbnail?this.post.profile.picture.formats.thumbnail.url:this.post.profile.picture.url:null},imageMode:function(){return this.post&&this.post.media.length?1===this.post.media.length?"single":"multiple":"none"},titleText:function(){return this.titleMouseOver||this.post.profile.subtitle.length<76?this.post.profile.subtitle:this.post.profile.subtitle.substr(0,75)+"..."},isOwnPost:function(){return this.post.my},reacted:function(){return this.post.reacted},reaction:function(){return this.post.reacted},formattedSummaryText:function(){return"questionPost"==this.post.postType?this.setFormattedText(this.post.summary)+"...  ":Object(G["a"])(this.$sanitize(this.post.summary))+"...  "},formattedSummaryTextWithoutEllipses:function(){return Object(G["a"])(this.post.summary)},formattedContentText:function(){return"questionPost"==this.post.postType?this.setFormattedText(this.post.content):Object(G["a"])(this.$sanitize(this.post.content))},totalReactions:function(){for(var t=0,e=this.post.reactions,s=0;s<e.length;s++)t+=e[s].count;return t},showReadMore:function(){return this.post.summary<this.post.content&&!this.isSinglePost&&this.allowActions},isUserOnboarded:function(){return this.$store.getters["profile/getProfileOnboarded"]},isUserAuthenticated:function(){return this.$store.getters["auth/getAuthStatus"]},currentUserRole:function(){return this.$store.getters["profile/getProfileRole"]},isPinnedPost:function(){return this.post.isPinned},reactionLists:function(){var t=Object(a["a"])(this.$store.getters["feeds/getReactionList"]);return t.sort((function(t,e){return t.order-e.order}))}},methods:{toggleFullActivityText:function(){this.seeFullActivityText=!this.seeFullActivityText},editPost:function(){var t=this;this.showEdit=!0,this.$nextTick((function(){t.$refs.editPostModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("edit-post-modal")}))}))},sharePost:function(){var t=this;this.showShare=!0,this.$nextTick((function(){t.$refs.sharePostModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("share-post-modal-".concat(t.post.id))}))}))},openShareOnFeedModal:function(){var t=this;this.showSharePostOnFeed=!0,this.$nextTick((function(){t.$refs.shareOnFeedModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("share-on-feed-modal")}))}))},closeShareOnFeedModal:function(){this.showSharePostOnFeed=!1},setFormattedText:function(t){var e=Object(G["a"])(t);return e=e.replace(/(<br\s*[\\/]?>){2}$/g,""),e='<div class="feed-post__question">'+e.replace(/(\?<br\s*[\\/]?>)/g,"?<br><span>"),e=e.replace(/(<br\s*[\\/]?>){2}/gi,'</span></div><br><div class="feed-post__question">'),e},setCommentId:function(t){this.openLikeModal(t.type,t.commentId)},openLikeModal:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.commentId=s,this.reactionClicked=t,this.showUseReactionListModal=!0,this.$nextTick((function(){e.$refs.reactUserListModal.toggleModal(!0),e.$nextTick((function(){e.$bvModal.show("react-user-list-modal")}))}))},onClick:function(){console.log("Clicked")},singleImageProvider:function(t){var e={backgroundImage:"url("+t.media[0].file.url+")"};return e},blockUser:function(t){this.$store.dispatch("settings/blockUser",t.profile.id);var e="".concat(t.profile.title," has been blocked, you can unblock on the settings page");this.$emit("showToast",e)},upvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.downvoted){s.next=8;break}return s.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"upvote"});case 3:n=s.sent,console.log("ChangeVote"),console.log(n),s.next=21;break;case 8:if(!t.upvoted){s.next=16;break}return s.next=11,e.$store.dispatch("feeds/deletePostVote",{post:t});case 11:n=s.sent,console.log("deleteVote"),console.log(n),s.next=21;break;case 16:return s.next=18,e.$store.dispatch("feeds/votePost",{post:t,type:"upvote"});case 18:n=s.sent,console.log("Vote"),console.log(n);case 21:n.success||e.$bvToast.toast(n.message,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"}),e.reactionMouseOver=!1;case 23:case"end":return s.stop()}}),s)})))()},downvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.upvoted){s.next=6;break}return s.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"downvote"});case 3:n=s.sent,s.next=15;break;case 6:if(!t.downvoted){s.next=12;break}return s.next=9,e.$store.dispatch("feeds/deletePostVote",{post:t});case 9:n=s.sent,s.next=15;break;case 12:return s.next=14,e.$store.dispatch("feeds/votePost",{post:t,type:"downvote"});case 14:n=s.sent;case 15:console.log(n),e.reactionMouseOver=!1;case 17:case"end":return s.stop()}}),s)})))()},react:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.log(e.post.reacted),n=t,!e.post.reacted||e.post.reacted.id!==n){s.next=8;break}return o={postId:e.post.id},s.next=6,e.$store.dispatch("feeds/deletePostReaction",o);case 6:s.next=11;break;case 8:return i={postId:e.post.id,reactionId:n},s.next=11,e.$store.dispatch("feeds/reactToPost",i);case 11:e.reactionMouseOver=!1;case 12:case"end":return s.stop()}}),s)})))()},bookmark:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.bookmarked){s.next=6;break}return s.next=3,e.$store.dispatch("feeds/deletePostBookmark",{post:t});case 3:n=s.sent,s.next=9;break;case 6:return s.next=8,e.$store.dispatch("feeds/bookmarkPost",{post:t});case 8:n=s.sent;case 9:n.success||e.$bvToast.toast(n.message,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"});case 10:case"end":return s.stop()}}),s)})))()},follow:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.followed){s.next=6;break}return s.next=3,e.$store.dispatch("feeds/unfollowPost",{post:t});case 3:n=s.sent,s.next=9;break;case 6:return s.next=8,e.$store.dispatch("feeds/followPost",{post:t});case 8:n=s.sent;case 9:n.success||e.$bvToast.toast(n.message,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"});case 10:case"end":return s.stop()}}),s)})))()},addMyField:function(t){var e=this;t.forEach((function(t){t.my=t.profile.id===e.$store.getters["profile/getProfileId"]}))},getPostComments:function(){var t=this;this.showComments=!this.showComments,this.post.firstComments&&this.post.firstComments.length&&!this.post.fetchedComments?(this.addMyField(this.post.firstComments),this.$store.commit("feeds/appendPostComments",{postId:this.post.id,comments:this.post.firstComments}),this.post.firstComments.forEach((function(e){t.addMyField(e.firstReplies),t.$store.commit("feeds/addMoreRepliesToComment",{replies:e.firstReplies,commentId:e.id,postId:t.post.id})})),this.initialCommentsLoading=!0,this.$store.dispatch("feeds/getPostComments",{post:this.post}).then((function(){t.componentKey+=1})).finally((function(){t.initialCommentsLoading=!1}))):this.post.fetchedComments||this.post.comments.length!==this.post.commentsNumber&&(this.initialCommentsLoading=!0,this.$store.dispatch("feeds/getPostComments",{post:this.post}).then((function(){t.componentKey+=1})).finally((function(){t.initialCommentsLoading=!1})))},commentClicked:function(t){var e=this;this.isUserOnboarded||this.showComments||this.allowCommentOnOwnPost||this.$bvModal.show("onboard-modal"),this.showComments=!this.showComments,this.showComments&&t.commentsNumber>0&&(t.fetchedComments?this.isUserOnboarded&&this.$nextTick((function(){e.$refs.comments.focusOnCommentInput()})):this.$store.dispatch("feeds/getPostComments",{post:t}).then((function(){e.componentKey+=1,e.isUserOnboarded&&e.$nextTick((function(){e.$refs.comments.focusOnCommentInput()}))})))},closeEditModal:function(){this.showEdit=!1},closeShareModal:function(){this.showShare=!1},closeReactListModal:function(){this.showShare=!1},showDeletePostWarningModal:function(){var t=this;this.post.id!==this.$store.getters["profile/getProfilePost"]&&this.post.id!==this.$store.getters["profile/getQuestionsPost"]?this.$nextTick((function(){t.$bvModal.show("delete-post-warning-modal-".concat(t.post.activity?t.post.activity.id:t.post.id))})):this.$bvToast.toast("Welcome post cannot be deleted. Update you profile to update welcome post content.",{autoHideDelay:4e3,noCloseButton:!0,toaster:"b-toaster-top-center",variant:"danger"})},deletePost:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.post.id,console.log("Deleted Post: ",s),e.next=4,t.$store.dispatch("feeds/deletePost",{id:s,role:t.currentUserRole});case 4:n=e.sent,t.$bvToast.toast(n,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"});case 6:case"end":return e.stop()}}),e)})))()},postLinkClick:function(t){this.$emit("showConfirmationLinkBox",t)},postContentClick:function(t){var e=this;if(t.target.matches(".mention")){console.log(t);var s=t.target.attributes["data-id"].value;this.$store.dispatch("feeds/getSlugForProfileId",s).then((function(t){if(t){var s="/profiles/"+t;e.$router.push({path:s})}}))}},showUserProfile:function(t){var e="string"===typeof t?t:this.post.profile.handle;this.$router.push({path:"/profiles/"+e})},goToNetwork:function(t){this.$router.push({path:"/hubs/"+t})},activateReadMore:function(t){t.preventDefault(),this.readMore=!this.readMore},toggleTitleHover:function(){this.titleMouseOver=!this.titleMouseOver},reportPost:function(){this.$eventBus.$emit("OPEN_REPORT_MODAL",{type:"post",entityId:this.post.id,action:"feeds/report",successMessage:"This post hase been successfully reported and you will no longer see it in your feed",errorMessage:"There was an error reporting this post please try again later"})},togglePinPost:function(){this.$store.dispatch("admin/changePinnedStatus",{postId:this.post.id,role:this.currentUserRole,isPinned:!this.post.isPinned})}}},de=ue,pe=(s("db1f"),Object(b["a"])(de,n,o,!1,null,"c17a6736",null));e["default"]=pe.exports},a50b:function(t,e,s){},a8ba:function(t,e,s){"use strict";s("89b4")},b250:function(t,e,s){},b3c6:function(t,e,s){"use strict";s("50d3a")},b8f6:function(t,e,s){"use strict";s("eedb")},bb2f:function(t,e,s){var n=s("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c6aa:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("base-modal",{attrs:{id:"edit-post-modal",scrollable:"",mount:t.show,size:"lg",newPost:""},on:{onClose:t.closeModal,onShow:t.onShow},scopedSlots:t._u([{key:"header",fn:function(e){var n=e.close;return[s("div",{class:""===t.body?"header-wr":"category-header-wr"},[""===t.body?s("div",{staticClass:"new-post__header--left"},[s("div",{staticClass:"new-post-header-content"},[s("div",{staticClass:"user-image"},[t.profilePicture?s("img",{staticClass:"user-image",attrs:{src:t.profilePicture.url,alt:"user"}}):s("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}})],1),t.post.isAnnouncement?s("div",{staticClass:"network-tags__label"},[s("b",[t._v(" "+t._s(t.profile.title)+" ")])]):s("div",{staticClass:"network-tags__label"},[s("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("network")}}},[t._v(" "+t._s(t.post.networkName||"Select Network and Post")+" "),s("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})]),s("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("type")}}},[t._v(" "+t._s(t.type||"Post Type")+" "),s("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})]),s("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("lang")}}},[t._v(" "+t._s(t.selectedLang)+" "),s("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})])])])]):s("div",{staticClass:"category-header"},[s("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[s("span",{staticClass:"icon-ic-arrow-back"})]),s("span",{staticClass:"modalTitle"},[t._v(t._s(t.modalTitle))])]),s("base-modal",{attrs:{id:"new-network-warning-modal",mount:!0,size:"sm","no-close-on-backdrop":!1},scopedSlots:t._u([{key:"header",fn:function(){return[s("p",{staticClass:"network-warning-modal-header"},[t._v("Warning")])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"network-warning-modal-body"},[t._v(" Do you want to save your post as a draft before leaving the page? ")])]},proxy:!0},{key:"footer",fn:function(e){var n=e.cancel;return[s("button",{staticClass:"ui-btn ui-btn__primary",on:{click:function(e){return t.saveDraftPost(n)}}},[t._v(" Yes ")]),s("button",{staticClass:"btn btn-danger",attrs:{variant:"danger"},on:{click:t.goToNetworkPage}},[t._v(" No ")]),s("button",{staticClass:"ui-btn ui-btn__outline",on:{click:function(e){return t.closeWarningModal(n)}}},[t._v(" Cancel ")])]}}],null,!0)}),s("base-modal",{attrs:{id:"warning-modal",mount:!0,size:"sm","no-close-on-backdrop":!0},on:{ok:function(e){return t.closeWarningandClearModal(n)}},scopedSlots:t._u([{key:"header",fn:function(){return[s("p",{staticClass:"network-warning-modal-header"},[t._v("Warning")])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"network-warning-modal-body"},[t._v(" Closing this modal will delete the content you have already written for this post, are you sure you would like to proceed? ")])]},proxy:!0}],null,!0)}),s("div",{staticClass:"modal-top-header"},[s("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return t.closeModal(n)}}},[s("span",{staticClass:"icon-ic-modal-close"})]),""===t.body?s("span",{staticClass:"mobile-view",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[t.post.content?t._e():s("span",{staticClass:"error-text"},[t._v(t._s(t.errorMessage))]),s("button",{staticClass:"ui-btn btn-primary ui-btn__post white-txt",on:{click:function(e){return e.preventDefault(),t.updatePost(t.save)}}},[t.loading?s("b-spinner",{attrs:{small:"",label:"loader"}}):[t._v(" Save ")]],2)]):t._e(),"draft"!=t.editPost.status||t.post.content?t._e():s("b-tooltip",{attrs:{target:"save-button-disabled-container",triggers:"hover",disabled:!(!t.post.content||!t.post.networkId)}},[t._v(" "+t._s(t.post.content?"You must select a network in order to post":"You need to have some content to create a post")+" ")])],1)],1)]}},{key:"body",fn:function(){return[s("div",{staticClass:"feed-item-new-post"},[s("div",{class:""===t.body?"":"ui-hide"},[s("div",{staticClass:"feed-item-new-post__main",class:t.post.media.length>0?"with-media":null},[s("mentionable-text-area",{ref:"postField",attrs:{content:t.post.content,reverseDirection:t.textDirection},on:{input:function(e){return t.post.content=e},"mentions-replaced":t.onMentionsReplaced,previewLinkChanged:function(e){return t.previewLink=e},filePasted:t.uploadPastedFile}}),s("div",[t._t("default",[!t.post.media.length>0&&t.link&&t.link.display?s("LinkPreview",{attrs:{details:t.link,location:"post"},on:{removePreview:t.removeLinkPreview}}):t._e()])],2),t.loadingLink?s("div",{attrs:{id:"loader-container"}},[t._t("loading",[s("div",{staticClass:"spinner"})])],2):t._e()],1),s("div",{staticClass:"feed-item-new-post__selected-interests"},t._l(t.selectedInterests,(function(t){return s("base-interest-tag",{key:t.id,attrs:{name:t.title,type:"selected"}})})),1),t.files.length>0?s("div",{staticClass:"feed-item-new-post__media"},[s("draggable",{key:t.files.length,staticClass:"upload-img__wr",attrs:{list:t.files},on:{change:t.onImageListUpdate,start:function(e){t.drag=!0},end:function(e){t.drag=!1}}},t._l(t.files,(function(e,n){return s("div",{key:e.id,staticClass:"upload-img__box"},[e.loading?s("div",{staticClass:"upload-img__img-loading"},[s("b-skeleton",{staticClass:"upload-img__img-skeleton"}),s("b-progress",{staticClass:"upload-img__img-progress",attrs:{"show-progress":"",solid:"",max:"100"}},[s("b-progress-bar",{staticClass:"upload-img__img-progress-bar",attrs:{value:e.progress}},[s("span",[s("strong",[t._v(" "+t._s(e.progress)+"% ")])])])],1)],1):["video"===t.fileType(e.file)?s("div",{staticClass:"video-container"},[s("b-embed",{key:e.file.id,staticClass:"upload-img__img p-0",attrs:{type:"video",controls:"",aspect:"0"}},[s("source",{key:e.file.id,attrs:{src:e.file.url}})]),s("button",{staticClass:"ui-btn ui-btn__rounded gallery-btn-delete",on:{click:function(e){return e.preventDefault(),t.removeImage(n)}}},[s("span",{staticClass:"icon-close"})])],1):"image"===t.fileType(e.file)?s("div",{staticClass:"upload-img__img",style:{"background-image":"url("+e.file.url+")"}},[s("button",{staticClass:"ui-btn ui-btn__rounded gallery-btn-delete",on:{click:function(e){return e.preventDefault(),t.removeImage(n)}}},[s("span",{staticClass:"icon-close"})])]):t._e()]],2)})),0)],1):t._e()]),"lang"===t.body?s("div",{staticClass:"network-select-wr"},[s("base-input-search",{attrs:{placeholder:"Search language","clear-on-focus-out":!1},on:{input:t.onLangSearchInputChange}}),t._l(t.languageList,(function(e){return s("base-list-item-bold",{key:e.id,staticClass:"language-select",attrs:{href:"#",name:e.name},nativeOn:{click:function(s){return t.selectLang(e)}}})}))],2):t._e(),"type"===t.body?s("div",{staticClass:"network-select-wr"},[s("base-input-search",{attrs:{placeholder:"Search post type","clear-on-focus-out":!1},on:{input:t.onTypeSearchInputChange}}),t._l(t.typeList,(function(e){return s("base-list-item-bold",{key:e.id,staticClass:"language-select",attrs:{href:"#",internalIcon:e.type?e.icon:t.icon-t.question,name:e.title},nativeOn:{click:function(s){return t.selectType(e)}}},[s("a",{staticClass:"dropdown-item post-type-select",attrs:{href:"#"}},[s("div",{staticClass:"list-item-bold ui-flex w-100 ui-align-center"},[s("span",{staticClass:"icon-info post-type-select__icon"}),s("span",{staticClass:"ui-flex-grow post-type-select__text"},[t._v(t._s(e.name))]),s("span",{staticClass:"post-type-select__radio"})])])])}))],2):t._e(),"network"===t.body?s("div",{staticClass:"network-select-wr"},[s("base-input-search",{attrs:{placeholder:"Search Networks..","clear-on-focus-out":!1},on:{input:t.onNetworkSearchInputChange}}),t._l(t.networkList,(function(e){return s("base-list-item-bold",{key:e.id,staticClass:"network-select",attrs:{href:"#",icon:e.banner?e.banner.url:t.genericNetwork,name:e.name},nativeOn:{click:function(s){return t.selectNetwork(e)}}})}))],2):t._e()])]},proxy:!0},{key:"footer",fn:function(e){var n=e.save;return[t.networkDisplay&&""===t.body?s("div",{staticClass:"feed-item-new-post__info"},[s("span",{staticClass:"icon-info feed-item-new-post__info__icon"}),s("span",{staticClass:"feed-item-new-post__info__text"},[t._v(t._s(t.networkDisplay))])]):t._e(),""===t.body?s("div",{staticClass:"feed-item-new-post__action modal-footer"},[s("file-upload",{ref:"upload",staticClass:"upload-img__new upload__new--img",attrs:{for:"img-upload","input-id":"img-upload",extensions:t.uploadImageParams.extensions,accept:t.uploadImageParams.accept,multiple:t.uploadImageParams.multiple,directory:t.uploadImageParams.directory,thread:t.uploadImageParams.thread,drop:t.uploadImageParams.drop,"drop-directory":t.uploadImageParams.dropDirectory,"add-index":t.uploadImageParams.addIndex},on:{"input-file":t.inputFile,"input-filter":t.inputFilter}},[s("base-icon-button",{staticClass:"action-btn",attrs:{isImg:!0,icon:t.postImg}})],1),s("file-upload",{ref:"upload",staticClass:"upload__new upload__new--vid",attrs:{for:"video-upload","input-id":"video-upload",accept:t.uploadVideoParams.accept,multiple:t.uploadVideoParams.multiple,directory:t.uploadVideoParams.directory,thread:t.uploadVideoParams.thread,drop:t.uploadVideoParams.drop,"drop-directory":t.uploadVideoParams.dropDirectory,"add-index":t.uploadVideoParams.addIndex},on:{"input-file":t.inputFile,"input-filter":t.inputFilter}},[s("base-icon-button",{staticClass:"action-btn",attrs:{isImg:!0,icon:t.postVideo}})],1),s("span",{staticClass:"action-separator"}),s("div",{staticClass:"post-tags"},[s("button",{staticClass:"ui-btn__transparent ui-btn__transparent--add",on:{click:t.openInterestsModal}},[s("span",{staticClass:"icon-plus"}),s("span",{staticClass:"interests__text"},[t._v("Interests")])]),s("modal-add-interests"),s("p")],1),s("span",{staticClass:"not-mobile",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[t.post.content?t._e():s("span",{staticClass:"error-text"},[t._v(t._s(t.errorMessage))]),s("button",{staticClass:"ui-btn btn-primary ui-btn__post",on:{click:function(e){return e.preventDefault(),t.updatePost(n)}}},[t.loading?s("b-spinner",{attrs:{small:"",label:"loader"}}):[t._v(" Save ")]],2)]),"draft"!=t.editPost.status||t.post.content?t._e():s("b-tooltip",{attrs:{target:"save-button-disabled-container",triggers:"hover",disabled:!(!t.post.content||!t.post.networkId)}},[t._v(" "+t._s(t.post.content?"You must select a network in order to post":"You need to have some content to create a post")+" ")])],1):s("button",{staticClass:"noButton"}),"network"===t.body?s("div",{staticClass:"network-footer"},[t.postReady?s("span",{staticClass:"post-warning-text"},[t._v(" Selecting a network will automatically submit your post. If you are not ready to post please click "),s("a",{staticClass:"back-link",on:{click:t.goBack}},[t._v("back")]),t._v(". ")]):t._e(),t.postReady?t._e():s("p",{staticClass:"join-network",on:{click:t.openGoToNetworkModal}},[t._v(" Join more networks ")])]):t._e()]}}],null,!0)}):t._e(),s("error-modal",{ref:"showErrorModal",attrs:{id:"error-modal",modalMessage:t.modalMessage,modalMessageType:t.modalMessageType},on:{uploadAnotherFile:t.uploadFile}})],1)},o=[],i=s("1da1"),a=s("5530"),r=s("2909"),c=(s("96cf"),s("b0c0"),s("7db0"),s("fb6a"),s("9911"),s("159b"),s("4de4"),s("caad"),s("2532"),s("99af"),s("4d63"),s("ac1f"),s("25f0"),s("5319"),s("2b3d"),s("d3b7"),s("3ca3"),s("ddb0"),s("a434"),s("d81d"),s("498a2"),s("7299")),l=s("91fa"),u=s.n(l),d=s("340e"),p=s.n(d),m=s("4332"),f=s.n(m),h=s("04c3"),g=s.n(h),v=s("37ce"),b=s.n(v),w=s("f367"),k=s("123f"),_=s("4f3e"),C=s.n(_),y=s("a6ae"),x=s.n(y),P=s("c0e6"),I=s.n(P),M=s("1222"),T=s("a54a"),L=s("c627"),$=s.n(L),R=s("8019"),O=s.n(R),S=s("708e"),j=s("b76a"),N=s.n(j),E=s("82fc"),F=s("ed35"),A=s("c2d5"),D=s("17ff"),U=s("6302"),B=s("a9cc"),H=s("efca"),z=s.n(H),V={name:"EditPostModal",components:{ModalAddInterests:T["default"],BaseListItemBold:M["default"],BaseInputSearch:k["default"],BaseIconButton:w["default"],FileUpload:O.a,BaseModal:c["default"],draggable:N.a,BaseInterestTag:E["default"],MentionableTextArea:F["a"],ErrorModal:D["default"],LinkPreview:U["default"]},emits:["onClose"],props:{editPost:{type:Object,required:!0},networkFeed:{type:Boolean,required:!1,default:!1}},data:function(){var t=this;return{postImg:u.a,postVideo:p.a,selectedLang:this.$store.getters["feeds/getLanguagesList"].find((function(e){return e.id.toLowerCase()==t.editPost.lang.toLowerCase()})).name,type:this.editPost.postType?this.editPost.postType.charAt(0).toUpperCase()+this.editPost.postType.slice(1):"",networkDisplay:"",langSearchText:"",typeSearchText:"",networkSearchText:"",body:"",postReady:!1,chosenNetworkName:"",chosenNetworkId:null,errorStatus:!1,previewLink:null,genericNetwork:z.a,previewDetails:{},link:{},modalMessageType:"",modalMessage:"",ic_close:$.a,ic_post_file:f.a,ic_post_tag_new:g.a,ic_post_tag_remove:b.a,feed_t1:C.a,feed_t2:x.a,feed_t3:I.a,contentClass:"content-class",show:!1,searchText:"",loading:!1,replacedData:null,loadingLink:!1,files:[],cachedMedia:[],post:{lang:"English",postType:"",id:null,content:null,title:null,communityId:null,media:[],interests:[],networkId:"",networkName:"",mainFeed:!0,linkPreview:null,isAnnouncement:""},uploadImageParams:{extensions:"gif,jpg,jpeg,png,webp",accept:"image/png,image/gif,image/jpeg,image/webp",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},uploadVideoParams:{extensions:"mp4,mkv,avi",accept:"video/mp4,video/x-m4v,video/*",minSize:1024,size:1048576e3,multiple:!1,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},uploadFileParams:{extensions:".pdf,.doc,.docx",accept:".pdf,.doc,.docx",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},img:{url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"}}},watch:{previewLink:function(){null==this.previewLink&&(this.activeLink=null),this.linkArrayHandler()}},mounted:function(){var t,e=this;console.log(this.editPost),this.networkDisplay=this.editPost.networkDisplay,this.editPost.linkPreview?this.link=this.editPost.linkPreview:this.link=null,this.activeLink=null===(t=this.editPost.linkPreview)||void 0===t?void 0:t.url;var s=this.editPost,n=s.id,o=s.title,i=s.content,c=s.mainFeed,l=s.media,u=s.community,d=s.network,p=s.isAnnouncement,m=s.interests,f=s.activity;l&&l.length>0&&(l.forEach((function(t){var s={url:t.file.url,type:t.file.mime};e.files.push({file:s})})),this.cachedMedia=Object(r["a"])(l)),this.post=Object(a["a"])(Object(a["a"])({},this.post),{},{activity:f,id:n,title:o,content:i,isAnnouncement:p,mainFeed:c,media:l||[],networkId:d?d.id:"5f2b93ddb3ab1f5de0638e9f",networkName:d?d.name:"General",communityId:u?u.id:"",lang:this.editPost.lang,postType:this.editPost.postType}),m&&m.forEach((function(t){return e.$store.commit("post/addToSelectedInterests",t)})),console.log("NOW IN POST"),console.log(this.post),setTimeout((function(){e.editableArea()}),500)},computed:{networkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},mobileNetworkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},textDirection:function(){return"Hebrew"===this.post.lang||"Arabic"===this.post.lang||"Kurdish"===this.post.lang||"Persian"===this.post.lang||"Urdu"===this.post.lang},networkList:function(){var t=this;return this.networkSearchText?this.$store.getters["networks/getMyNetworks"].filter((function(e){return e.name.toLowerCase().includes(t.networkSearchText.toLowerCase())})):this.$store.getters["networks/getMyNetworks"]},languageList:function(){var t=this;return this.langSearchText?this.$store.getters["feeds/getLanguagesList"].filter((function(e){return e.name.toLowerCase().includes(t.langSearchText.toLowerCase())})):this.$store.getters["feeds/getLanguagesList"]},typeList:function(){var t=this;return this.typeSearchText?this.$store.getters["post/getTypeList"].filter((function(e){return e.type.toLowerCase().includes(t.typeSearchText.toLowerCase())})):this.$store.getters["post/getTypeList"]},modalTitle:function(){var t;return t="type"===this.body?"Select Post Type":"lang"===this.body?"Select Language":this.postReady?"Select Network and Post":"Select Network",t},networkmodalbutton:function(){return this.postReady?"Post":"OK"},errorMessage:function(){return!this.post.content&&this.cachedMedia.length>0?"Please provide textual context to the uploaded media":this.post.content||0!==this.cachedMedia.length?null:"Cannot post without content"},previewUrl:function(){return"".concat("https://temp-api.bizfluenceapp.com/","link-preview?url=").concat(this.previewLink)},profile:function(){return this.$store.getters["profile/getProfile"]},profilePicture:function(){var t=this.$store.getters["profile/getProfilePicture"];return this.profile.fetched?t||this.img:null},selectedInterests:function(){return this.$store.getters["post/getSelectedInterests"]},mainFeedAllowed:function(){return"Politics Network"!==this.post.networkName&&"Bizfluence Cafe Network"!==this.post.networkName}},methods:{closeWarningModal:function(t){t()},linkArrayHandler:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.previewLink,!s){e.next=15;break}if(n=new RegExp(/http[s]?:\/\//),o=s[0].replace(n,""),n===t.activeLink){e.next=13;break}return t.loadingLink=!0,t.activeLink=o,e.next=9,Object(B["a"])(s[0]);case 9:i=t.link=e.sent,i.success?(t.link=i,t.link.url=t.previewLink,t.link&&(t.loadingLink=!1)):t.loadingLink=!1,e.next=15;break;case 13:t.link=null,t.activeLink=null;case 15:case"end":return e.stop()}}),e)})))()},removeLinkPreview:function(){this.link.display=!1,this.previewDetails.removed=!0,this.previewLink.removed=!0},getLinkDetails:function(t){this.previewDetails=t},uploadFile:function(){document.getElementById("video-upload").click()},editableArea:function(){var t=this.$refs.postField.$el.firstChild;t.focus(),this.placeCaretAtEnd(t)},placeCaretAtEnd:function(t){if(t.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(e)}else if("undefined"!=typeof document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t),n.collapse(!1),n.select()}},closeModal:function(t){this.resetPost(),t(),this.$emit("onClose")},toggleModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=t},videoPoster:function(t){return console.log(t),t.file.poster},fileType:function(t){return"image/"===t.type.substr(0,6)?"image":"video/"===t.type.substr(0,6)?"video":"doc"},inputFile:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var o,i,a,r,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t||e){n.next=27;break}if(s.loading||(s.loading=!0),!(t.size>=0&&t.size<s.uploadVideoParams.size)){n.next=27;break}if(o=s.cachedMedia.length+1,i=s.files.push({file:null,order:o,loading:!0,progress:0}),a=500,r=setInterval((function(){s.files[i-1].progress<90?s.files[i-1].progress+=10:s.files[i-1].progress<99&&(s.files[i-1].progress+=3,a=1e3)}),a),s.cachedMedia.push({file:null,order:o}),"video/"!==t.type.substr(0,6)){n.next=21;break}return n.next=11,Object(S["a"])(t.blob,{quality:.6});case 11:return l=n.sent,n.next=14,l[0].blob.arrayBuffer();case 14:return u=n.sent,d=new File([u],"thumbnail.jpeg",{type:"image/jpeg"}),console.log(d),n.next=19,s.$store.dispatch("profile/uploadImage",{newFile:d});case 19:c=n.sent,console.log(c);case 21:return n.next=23,s.$store.dispatch("profile/uploadImage",{newFile:t,thumbId:c});case 23:p=n.sent,m=s.fileType(t.file),"video"!==m?(s.cachedMedia[i-1].file=p,s.files[i-1].file=t,s.files[i-1].progress=100,setTimeout((function(){s.files[i-1].loading=!1,clearInterval(r)}),1e3)):setTimeout((function(){s.cachedMedia[i-1].file=p,s.files[i-1].file=t,s.files[i-1].progress=100,setTimeout((function(){s.files[i-1].loading=!1,clearInterval(r)}),1e3)}),2e3),s.loading&&(s.loading=!1);case 27:case"end":return n.stop()}}),n)})))()},inputFilter:function(t,e,s){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var i,a,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t||e){o.next=29;break}if(!(t.size>=0&&t.size>n.uploadVideoParams.size)){o.next=8;break}return n.modalMessageType="error",n.modalMessage="Upload is too large,It can't be more than 1GB",n.$nextTick((function(){n.$refs.showErrorModal.onShow(),n.$nextTick((function(){n.$bvModal.show("error-modal")}))})),o.abrupt("return",s());case 8:n.$refs.showErrorModal.onHide();case 9:if(!/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name)){o.next=11;break}return o.abrupt("return",s());case 11:if(!/\.(php5?|html?|jsx?)$/i.test(t.name)){o.next=13;break}return o.abrupt("return",s());case 13:if(!t||""!==t.error||!t.file||e&&t.file===e.file){o.next=28;break}if(t.blob="",i=window.URL||window.webkitURL,i&&(t.blob=i.createObjectURL(t.file)),t.url="",!t.blob||"image/"!==t.type.substr(0,6)){o.next=22;break}t.url=t.blob,o.next=28;break;case 22:if(!t.blob||"video/"!==t.type.substr(0,6)){o.next=28;break}return o.next=25,Object(S["a"])(t.blob,{quality:.6});case 25:a=o.sent,t.url=t.blob,t.poster=a[1].blob;case 28:!t||""!==t.error||"image/"!==t.type.substr(0,6)||!t.blob||e&&t.blob===e.blob||(t.error="image parsing",r=new Image,r.onload=function(){n.$refs.upload.update(t,{error:"",height:r.height,width:r.width})},r.onerror=function(){n.$refs.upload.update(t,{error:"parsing image size"})},r.src=t.blob);case 29:case"end":return o.stop()}}),o)})))()},onImageListUpdate:function(t){t.moved&&this.mediaMover(t.moved)},mediaMover:function(t){var e=t.newIndex,s=t.oldIndex;console.log(e),this.cachedMedia.splice(e,0,this.cachedMedia.splice(s,1)[0])},removeImage:function(t){this.files.splice(t,1),this.cachedMedia.splice(t,1),this.post.media.splice(t,1)},handleBody:function(t){this.body=t},goBack:function(){this.postReady=!1,this.typeSearchText="",this.langSearchText="",this.networkSearchText="",this.body=""},onNetworkSearchInputChange:function(t){this.networkSearchText=t},onTypeSearchInputChange:function(t){this.typeSearchText=t},onLangSearchInputChange:function(t){this.langSearchText=t},updatePost:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.post.content&&!e.loading){s.next=5;break}console.log(e.post),e.errorStatus=!0,s.next=18;break;case 5:return e.loading=!0,e.replaceMentionsString(),e.post.linkPreview=e.link,n=e.post.content.length>50?50:e.post.content.length,e.post.title=e.post.content.slice(0,n),e.post.interests=e.$store.getters["post/getSelectedInterests"].map((function(t){return t.id})),e.post.media=Object(r["a"])(e.cachedMedia),s.next=14,e.$store.dispatch("feeds/updatePost",e.post);case 14:o=s.sent,e.$eventBus.$emit("POST_EDITED",{post:o}),e.loading=!1,e.closeModal(t);case 18:case"end":return s.stop()}}),s)})))()},resetPost:function(){this.networkDisplay="",this.errorStatus=!1,this.files=[],this.cachedMedia=[],this.$store.commit("post/clearSelectedInterests"),this.post={id:null,content:null,title:null,communityId:null,media:[],networkName:null,mainFeed:!0},this.type=""},onShow:function(){},onMentionsReplaced:function(t){this.replacedData=Object(r["a"])(t)},replaceMentionsString:function(){var t=this,e=document.getElementById("mentions-textarea"),s=e.getElementsByClassName("mentions-replaced");s.length&&Object(r["a"])(s).forEach((function(e){var s=e.getAttribute("data-id"),n=e.innerText;t.post.content=t.post.content.replace(e.outerHTML,"@[".concat(n,"]{").concat(s,"}"))})),this.post.content=Object(A["htmlToText"])(this.post.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0}),this.post.content=this.post.content.replace(/(\n\s*\n)+/g,"\n\n"),this.post.content=this.post.content.trim()},showNetworkModal:function(){var t=this;this.$nextTick((function(){t.$bvModal.show("network-modal")})),this.toggleNetworkModal(!0)},toggleNetworkModal:function(){this.$bvModal.toggle("network-modal")},selectLang:function(t){this.post.lang=t.id,this.selectedLang=t.name,this.body="",this.langSearchText=""},selectType:function(t){console.log(t),this.body="",this.typeSearchText="",this.type=t.title,this.post.postType=t.type},selectNetwork:function(t){this.body="",this.networkSearchText="",this.post.networkId=t.id,this.post.networkName=t.name,this.networkDisplay=t.networkDisplay,!0===this.postReady&&this.createPost("published"),this.$refs["network-modal"].hide(),this.$store.commit("post/clearNetworkInterests")},chooseNetwork:function(t,e){this.chosenNetworkName=e,this.chosenNetworkId=t},openInterestsModal:function(){this.$store.dispatch("post/fetchInterests",this.post.networkId),this.$bvModal.show("modal-add-interests")},onSearchInputChange:function(t){this.searchText=t},openGoToNetworkModal:function(){var t=this;this.$nextTick((function(){t.$bvModal.show("new-network-warning-modal")}))},goToNetworkPage:function(){this.$root.$emit("bv::hide::modal","edit-post-modal"),this.$router.push({path:"/hubs/discover"})},uploadPastedFile:function(t){var e=t.type.substr(0,6);"image/"!==e&&"video/"!==e||this.$refs.upload.add(t)}}},q=V,W=(s("fd24"),s("a8ba"),s("2877")),K=Object(W["a"])(q,n,o,!1,null,"197c8275",null);e["a"]=K.exports},c96a:function(t,e,s){"use strict";var n=s("23e7"),o=s("857a"),i=s("af03");n({target:"String",proto:!0,forced:i("small")},{small:function(){return o(this,"small","","")}})},ca02:function(t,e,s){"use strict";s("4adc")},ce4d:function(t,e,s){"use strict";s("a50b")},d322:function(t,e,s){},d3f1:function(t,e,s){t.exports=s.p+"img/video-play.d5ab82f4.svg"},d64d:function(t,e,s){t.exports=s.p+"img/ic-like-sm.85773b87.svg"},db0f:function(t,e,s){t.exports=s.p+"img/ic-like-btn-arrow.792b940d.svg"},db1f:function(t,e,s){"use strict";s("471a")},dfc0:function(t,e,s){},e4c8:function(t,e,s){t.exports=s.p+"img/play_arrow_white_36dp.51940030.svg"},eb33:function(t,e,s){},eedb:function(t,e,s){},f183:function(t,e,s){var n=s("d012"),o=s("861d"),i=s("5135"),a=s("9bf2").f,r=s("90e3"),c=s("bb2f"),l=r("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(t){a(t,l,{value:{objectID:"O"+ ++u,weakData:{}}})},m=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,l)){if(!d(t))return"F";if(!e)return"E";p(t)}return t[l].objectID},f=function(t,e){if(!i(t,l)){if(!d(t))return!0;if(!e)return!1;p(t)}return t[l].weakData},h=function(t){return c&&g.REQUIRED&&d(t)&&!i(t,l)&&p(t),t},g=t.exports={REQUIRED:!1,fastKey:m,getWeakData:f,onFreeze:h};n[l]=!0},fd24:function(t,e,s){"use strict";s("3f8b")}}]);