(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-339c947c"],{"431f":function(e,t,o){},5045:function(e,t,o){"use strict";o("431f")},7407:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("base-modal",{attrs:{id:"new-post-modal",scrollable:"",mount:e.show,size:"lg",newPost:""},on:{onClose:e.closeModal,onShow:e.onShow},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.close;return[o("div",{class:""===e.body?"header-wr":"category-header-wr"},[""===e.body?o("div",{staticClass:"new-post__header--left"},[o("div",{staticClass:"new-post-header-content"},[o("div",{staticClass:"user-image"},[e.profilePicture?o("img",{staticClass:"user-image",attrs:{src:e.profilePicture.url,alt:"user"}}):o("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}})],1),e.post.isAnnouncement?o("div",{staticClass:"network-tags__label"},[o("b",[e._v(" "+e._s(e.profile.title)+" ")])]):o("div",{staticClass:"network-tags__label"},[o("label",{staticClass:"network-name",on:{click:function(t){e.selectNetworkEnabled&&e.handleBody("network")}}},[o("span",{staticClass:"\n                    REPLACE-WITH-FONT-ICON\n                    networkBtnTxt\n                  "},[e._v(" "+e._s(e.networkTitle)+" ")]),o("span",{staticClass:"\n                    REPLACE-WITH-FONT-ICON\n                    mobileNetworkBtnTxt\n                  "},[e._v(" "+e._s(e.mobileNetworkTitle)+" ")]),e.selectNetworkEnabled?o("span",{staticClass:"icon-select-arrow-bottom network-name__icon"}):e._e()]),o("label",{staticClass:"network-name",on:{click:function(t){return e.handleBody("type")}}},[e._v(" "+e._s(e.type||"Type")+" "),o("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})]),o("label",{staticClass:"network-name",on:{click:function(t){return e.handleBody("lang")}}},[e._v(" "+e._s(e.selectedLang)+" "),o("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})])])])]):o("div",{staticClass:"category-header"},[o("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(t){return t.preventDefault(),e.goBack(t)}}},[o("span",{staticClass:"icon-ic-arrow-back"})]),o("span",{staticClass:"modalTitle"},[e._v(e._s(e.modalTitle))])]),o("base-modal",{attrs:{id:"new-network-warning-modal",mount:!0,size:"sm","no-close-on-backdrop":!1},scopedSlots:e._u([{key:"header",fn:function(){return[o("p",{staticClass:"network-warning-modal-header"},[e._v("Warning")])]},proxy:!0},{key:"body",fn:function(){return[o("div",{staticClass:"network-warning-modal-body"},[e._v(" Do you want to save your post as a draft before leaving the page? ")])]},proxy:!0},{key:"footer",fn:function(t){var n=t.cancel;return["network"===e.body?o("div",[o("button",{staticClass:"ui-btn ui-btn__primary",on:{click:function(t){return e.saveDraftPost(n)}}},[e._v(" Yes ")]),o("button",{staticClass:"btn btn-danger",attrs:{variant:"danger"},on:{click:e.goToNetworkPage}},[e._v(" No ")]),o("button",{staticClass:"ui-btn ui-btn__outline",on:{click:function(t){return e.closeWarningModal(n)}}},[e._v(" Cancel ")])]):e._e()]}}],null,!0)}),o("base-modal",{attrs:{id:"warning-modal",mount:!0,size:"sm","no-close-on-backdrop":!0},on:{ok:function(t){return e.closeWarningandClearModal(n)}},scopedSlots:e._u([{key:"header",fn:function(){return[o("p",{staticClass:"network-warning-modal-header"},[e._v("Warning")])]},proxy:!0},{key:"body",fn:function(){return[o("div",{staticClass:"network-warning-modal-body"},[e._v(" Closing this modal will delete the content you have already written for this post, are you sure you would like to proceed? ")])]},proxy:!0}],null,!0)}),o("div",{staticClass:"modal-top-header"},[o("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(t){return e.closeModal(n)}}},[o("span",{staticClass:"icon-ic-modal-close"})]),e.errorStatus&&""===e.body?o("span",{staticClass:"error-text mobile-view"},[e._v(e._s(e.mobileErrorMessage))]):e._e(),""===e.body?o("span",{staticClass:"mobile-view",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[e.disablePost&&""===e.body?o("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(t){t.preventDefault(),"draft"==e.postType?e.createPost(e.postType):e.$bvModal.show("schedule-post-modal")}}},[e.posting?o("b-spinner",{attrs:{small:"",label:"loader"}}):o("span",[e._v("Post ")])],1):e.disablePost||""!==e.body||e.posting?o("button",{staticClass:"ui-btn btn-primary ui-btn__schedule-post",style:{color:"#ffffff"}},[o("b-spinner",{attrs:{small:"",label:"loader"}})],1):o("b-dropdown",{attrs:{variant:"triatary","menu-class":"base-dropdown__menu","toggle-class":"post-toggle-button",split:"",text:"Post"},on:{click:function(t){return t.preventDefault(),e.createPost("published")}}},[o("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.createPost("draft")}}},[e._v("Save as Draft")]),o("b-dropdown-divider"),o("b-dropdown-item",{on:{click:function(t){return t.preventDefault(),e.networkCheck("scheduled")}}},[e._v("Schedule")])],1)],1):e._e()])],1)]}},{key:"body",fn:function(){return[o("div",{staticClass:"feed-item-new-post"},[o("div",{class:""===e.body?"":"ui-hide"},[o("div",{staticClass:"feed-item-new-post__main",class:e.post.media.length>0?"with-media":null},[o("mentionable-text-area",{ref:"postField",attrs:{placeholder:e.placeholderText,content:e.post.content,reverseDirection:e.textDirection},on:{input:function(t){return e.post.content=t},"mentions-replaced":e.onMentionsReplaced,previewLinkChanged:function(t){e.previewLink=t},filePasted:e.uploadPastedFile}}),o("div",[e._t("default",[!e.post.media.length>0&&e.link&&e.link.display?o("LinkPreview",{attrs:{details:e.link,location:"post"},on:{removePreview:e.removeLinkPreview}}):e._e()])],2),e.loadingLink?o("div",{attrs:{id:"loader-container"}},[e._t("loading",[o("div",{staticClass:"spinner"})])],2):e._e()],1),o("div",{staticClass:"feed-item-new-post__selected-interests"},e._l(e.selectedInterests,(function(e){return o("base-interest-tag",{key:e.id,attrs:{name:e.title,type:"selected"}})})),1),e.files.length>0?o("div",{staticClass:"feed-item-new-post__media"},[o("draggable",{key:e.files.length,staticClass:"upload-img__wr",attrs:{list:e.files},on:{change:e.onImageListUpdate,start:function(t){e.drag=!0},end:function(t){e.drag=!1}}},e._l(e.files,(function(t,n){return o("div",{key:t.id,staticClass:"upload-img__box"},[t.loading?o("div",{staticClass:"upload-img__img-loading"},[o("b-skeleton",{staticClass:"upload-img__img-skeleton"}),o("b-progress",{staticClass:"upload-img__img-progress",attrs:{"show-progress":"",solid:"",max:"100"}},[o("b-progress-bar",{staticClass:"upload-img__img-progress-bar",attrs:{value:t.progress}},[o("span",[o("strong",[e._v(" "+e._s(t.progress)+"% ")])])])],1)],1):["video"===e.fileType(t.file)?o("div",{staticClass:"video-container"},[o("b-embed",{key:t.file.id,staticClass:"upload-img__img p-0",attrs:{type:"video",controls:"",poster:e.videoPoster(t.file),aspect:"0"}},[o("source",{key:t.file.id,attrs:{src:t.file.url}})]),o("button",{staticClass:"ui-btn ui-btn__rounded gallery-btn-delete",on:{click:function(t){return t.preventDefault(),e.removeImage(n)}}},[o("span",{staticClass:"icon-close"})])],1):"image"===e.fileType(t.file)?o("div",{staticClass:"upload-img__img",style:{"background-image":"url("+t.file.url+")"}},[o("button",{staticClass:"ui-btn ui-btn__rounded gallery-btn-delete",on:{click:function(t){return t.preventDefault(),e.removeImage(n)}}},[o("span",{staticClass:"icon-close"})])]):e._e()]],2)})),0)],1):e._e()]),"lang"===e.body?o("div",{staticClass:"network-select-wr"},[o("base-input-search",{attrs:{placeholder:"Search language","clear-on-focus-out":!1},on:{input:e.onLangSearchInputChange}}),e._l(e.languageList,(function(t){return o("base-list-item-bold",{key:t.id,staticClass:"language-select",attrs:{href:"#",name:t.name},nativeOn:{click:function(o){return e.selectLang(t)}}})}))],2):e._e(),"type"===e.body?o("div",{staticClass:"network-select-wr"},[o("base-input-search",{attrs:{placeholder:"Search post type","clear-on-focus-out":!1},on:{input:e.onTypeSearchInputChange}}),e._l(e.typeList,(function(t){return o("base-list-item-bold",{key:t.id,staticClass:"language-select",attrs:{href:"#",internalIcon:t.type?t.icon:e.icon-e.question,name:t.title},nativeOn:{click:function(o){return e.selectType(t)}}},[o("a",{staticClass:"dropdown-item post-type-select",attrs:{href:"#"}},[o("div",{staticClass:"list-item-bold ui-flex w-100 ui-align-center"},[o("span",{staticClass:"icon-info post-type-select__icon"}),o("span",{staticClass:"ui-flex-grow post-type-select__text"},[e._v(e._s(t.name))]),o("span",{staticClass:"post-type-select__radio"})])])])}))],2):e._e(),"network"===e.body?o("div",{staticClass:"network-select-wr"},[o("base-input-search",{attrs:{placeholder:"Search Networks..","clear-on-focus-out":!1},on:{input:e.onNetworkSearchInputChange}}),e._l(e.networkList,(function(t){return o("base-list-item-bold",{key:t.id,staticClass:"network-select",attrs:{href:"#",icon:t.banner?t.banner.url:e.genericNetwork,name:t.name},nativeOn:{click:function(o){return e.selectNetwork(t)}}})}))],2):e._e()])]},proxy:!0},{key:"footer",fn:function(){return[o("div",{staticClass:"footer-wr"},[e.post.networkDisplay&&""===e.body?o("div",{staticClass:"feed-item-new-post__info"},[o("span",{staticClass:"icon-info feed-item-new-post__info__icon"}),o("span",{staticClass:"feed-item-new-post__info__text"},[e._v(e._s(e.post.networkDisplay))])]):e._e(),""===e.body?o("div",{staticClass:"feed-item-new-post__action modal-footer-narrow"},[o("file-upload",{ref:"upload",staticClass:"upload-img__new upload__new--img",attrs:{for:"img-upload","input-id":"img-upload",extensions:e.uploadImageParams.extensions,accept:e.uploadImageParams.accept,multiple:e.uploadImageParams.multiple,directory:e.uploadImageParams.directory,thread:e.uploadImageParams.thread,drop:e.uploadImageParams.drop,"drop-directory":e.uploadImageParams.dropDirectory,"add-index":e.uploadImageParams.addIndex},on:{"input-file":e.inputFile,"input-filter":e.inputFilter}},[o("base-icon-button",{staticClass:"action-btn",attrs:{isImg:!0,icon:e.postImg}})],1),o("file-upload",{ref:"upload",staticClass:"upload__new upload__new--vid",attrs:{for:"video-upload","input-id":"video-upload",accept:e.uploadVideoParams.accept,multiple:e.uploadVideoParams.multiple,directory:e.uploadVideoParams.directory,thread:e.uploadVideoParams.thread,drop:e.uploadVideoParams.drop,"drop-directory":e.uploadVideoParams.dropDirectory,"add-index":e.uploadVideoParams.addIndex},on:{"input-file":e.inputFile,"input-filter":e.inputFilter}},[o("base-icon-button",{staticClass:"action-btn",attrs:{isImg:!0,icon:e.postVideo}})],1),o("span",{staticClass:"action-separator"}),o("div",{staticClass:"post-tags"},[o("button",{staticClass:"ui-btn__transparent ui-btn__transparent--add",on:{click:e.openInterestsModal}},[o("span",{staticClass:"icon-plus"}),o("span",{staticClass:"interests__text"},[e._v("Interests")])]),o("modal-add-interests"),o("p")],1),o("span",{staticClass:"not-mobile",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[e.errorStatus?o("span",{staticClass:"error-text"},[e._v(e._s(e.errorMessage))]):e._e(),e.post.isAnnouncement&&""===e.body?o("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(t){return t.preventDefault(),e.createPost("published")}}},[e.posting?o("b-spinner",{attrs:{small:"",label:"loader"}}):o("span",[e._v(" Post ")])],1):e.disablePost&&""===e.body?o("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(t){t.preventDefault(),"draft"==e.postType?e.createPost(e.postType):e.post.content&&e.post.networkId?e.$bvModal.show("schedule-post-modal"):e.setErrorStatus(!0)}}},[e.posting?o("b-spinner",{attrs:{small:"",label:"loader"}}):o("span",[e._v(" Post ")])],1):e.disablePost||""!==e.body||e.posting?o("button",{staticClass:"ui-btn btn-primary ui-btn__schedule-post",style:{color:"#ffffff"}},[o("b-spinner",{attrs:{small:"",label:"loader"}})],1):o("b-dropdown",{staticClass:"ui-btn ui-btn__post",style:{color:"#ffffff"},attrs:{variant:"link","menu-class":"base-dropdown__menu","toggle-class":"post-toggle-button",split:"",text:"Post"},on:{click:function(t){return t.preventDefault(),e.createPost("published")}}},[o("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.createPost("draft")}}},[e._v("Save as Draft")]),o("b-dropdown-divider"),o("b-dropdown-item",{on:{click:function(t){return t.preventDefault(),e.networkCheck("scheduled")}}},[e._v("Schedule")])],1)],1)],1):o("button",{staticClass:"noButton"}),"network"===e.body?o("div",{staticClass:"network-footer"},[e.postReady?o("span",{staticClass:"post-warning-text"},[e._v(" Selecting a network will automatically submit your post. If you are not ready to post please click "),o("a",{staticClass:"back-link",on:{click:e.goBack}},[e._v("back")]),e._v(". ")]):e._e(),e.postReady?e._e():o("div",{staticClass:"join-network",on:{click:e.openGoToNetworkModal}},[e._v(" Join more networks ")])]):e._e()])]},proxy:!0}],null,!0)}),o("schedule-post-modal",{attrs:{id:"schedule-post-modal",showDate:"","modal-data":e.modalText},on:{scheduledPost:e.setScheduleDate,close:function(t){return e.resetPost()}}}),o("error-modal",{ref:"showErrorModal",attrs:{id:"error-modal",modalMessage:e.modalMessage,modalMessageType:e.modalMessageType,generalError:e.generalError},on:{uploadAnotherFile:e.uploadFile}})],1)},s=[],a=o("2909"),i=o("1da1"),r=(o("96cf"),o("d3b7"),o("3ca3"),o("ddb0"),o("99af"),o("4de4"),o("caad"),o("2532"),o("b0c0"),o("9911"),o("2b3d"),o("a434"),o("fb6a"),o("d81d"),o("159b"),o("5319"),o("ac1f"),o("498a2"),o("91fa")),l=o.n(r),c=o("340e"),d=o.n(c),u=o("4332"),p=o.n(u),h=o("04c3"),f=o.n(h),m=o("37ce"),g=o.n(m),b=o("4f3e"),w=o.n(b),k=o("a6ae"),v=o.n(k),y=o("c0e6"),_=o.n(y),C=o("c627"),x=o.n(C),P=o("708e"),T=o("ed35"),S=o("efca"),I=o.n(S),N=o("c2d5"),L=o("a9cc"),$=function(){return Promise.resolve().then(o.bind(null,"7299"))},M=function(){return Promise.resolve().then(o.bind(null,"f367"))},D=function(){return Promise.resolve().then(o.bind(null,"123f"))},E=function(){return Promise.resolve().then(o.bind(null,"1222"))},R=function(){return o.e("chunk-090d2b2e").then(o.bind(null,"a54a"))},O=function(){return Promise.resolve().then(o.t.bind(null,"8019",7))},A=function(){return Promise.resolve().then(o.t.bind(null,"b76a",7))},F=function(){return o.e("chunk-f7b852d4").then(o.bind(null,"82fc"))},B=function(){return Promise.resolve().then(o.bind(null,"b00d"))},j=function(){return Promise.resolve().then(o.bind(null,"17ff"))},z=function(){return o.e("chunk-19beea7d").then(o.bind(null,"6302"))},U={name:"NewPostModal",components:{ModalAddInterests:R,BaseListItemBold:E,BaseInputSearch:D,BaseIconButton:M,FileUpload:O,BaseModal:$,draggable:A,BaseInterestTag:F,MentionableTextArea:T["a"],SchedulePostModal:B,ErrorModal:j,LinkPreview:z},emits:["onClose"],props:{editPost:{type:Object,required:!1},networkFeed:{type:Boolean,required:!1,default:!1}},data:function(){return{postImg:l.a,postVideo:d.a,type:"",mobile:!1,goingToNetworks:!1,posting:!1,body:"",postReady:!1,chosenNetworkName:"",chosenNetworkId:null,activeLink:"",modalMessageType:"",generalError:!1,minSize:1024,modalMessage:"",postType:"",ic_close:x.a,ic_post_file:p.a,ic_post_tag_new:f.a,ic_post_tag_remove:g.a,feed_t1:w.a,feed_t2:v.a,feed_t3:_.a,contentClass:"content-class",show:!1,showPoints:!1,pointValue:0,langSearchText:"",typeSearchText:"",networkSearchText:"",mentionSearchText:"",atIndex:-1,mentionLength:0,mentions:[],loading:!1,loadingUsers:!1,previewLink:null,genericNetwork:I.a,disablePost:!1,previewDetails:{},link:{},loadingLink:!1,selectedType:null,selectedLang:"English",files:[],replacedData:[],errorStatus:!1,post:{lang:"EN",content:null,title:null,communityId:null,media:[],interests:[],networkId:null,networkName:null,mainFeed:!0,scheduledPost:"",linkPreview:null,networkDisplay:"",isAnnouncement:!1},uploadImageParams:{extensions:"gif,jpg,jpeg,png,webp",accept:"image/png,image/gif,image/jpeg,image/webp",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},uploadVideoParams:{extensions:"mp4,mkv,avi",accept:"video/mp4,video/x-m4v,video/*",minSize:1024,size:1048576e3,multiple:!1,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},uploadFileParams:{extensions:".pdf,.doc,.docx",accept:".pdf,.doc,.docx",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},modalText:{actionType:"published",titleText:"Schedule Post",subtitleText:"Select a Date and Time in the future for your post to be published"},img:{url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"},selectNetworkEnabled:void 0}},watch:{previewLink:function(){this.linkArrayHandler()}},mounted:function(){var e=this;this.$eventBus.$on("OPEN_POST_MODAL",function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.post.isAnnouncement=!!o.isAnnouncement,e.post.kind=o.kind?o.kind:"",e.selectNetworkEnabled="hub-page"!==o.from,e.post.networkId=o.networkId?o.networkId:"5f2b93ddb3ab1f5de0638e9f",e.post.networkName=o.networkName?o.networkName:"General",e.disablePost=!!o.disablePost,e.postType=o.type?o.type:"Post",e.post.networkDisplay=o.networkDisplay||"",e.toggleModal(!0),e.$nextTick((function(){e.$refs.showErrorModal.onShow(),e.$nextTick((function(){e.$bvModal.show("new-post-modal")}))}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},destroyed:function(){this.$eventBus.$off("OPEN_POST_MODAL")},computed:{placeholderText:function(){return this.post.isAnnouncement?"What do you want to Announce?":""},postButtonStyle:function(){var e={"background-color":"transparent"};return e},textDirection:function(){return"Hebrew"===this.post.lang||"Arabic"===this.post.lang||"Kurdish"===this.post.lang||"Persian"===this.post.lang||"Urdu"===this.post.lang?(console.log("RTL"),!0):(console.log("LTR"),!1)},modalTitle:function(){var e;return e="type"===this.body?"Select Post Type":"lang"===this.body?"Select Language":this.postReady?"Select Network and Post":"Select Network",e},networkTitle:function(){var e="";return e=this.post.networkName?this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...":this.postReady?this.post.content?"Select Network and Post":"Select Network":"Choose Hub",e},mobileNetworkTitle:function(){var e="";return e=this.post.networkName?this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...":this.postReady?this.post.content?"Network & Post":"CNetwork":"Network",e},networkmodalbutton:function(){return this.postReady?"Post":"OK"},errorMessage:function(){return this.post.networkId||"draft"===this.post.status?!this.post.content&&this.post.media.length>0?"Please provide textual context to the uploaded media":this.post.content||0!==this.post.media.length?null:"Cannot post without content":"Select the network that best suits your post."},mobileErrorMessage:function(){return this.post.networkId||"draft"===this.post.status?!this.post.content&&this.post.media.length>0?"Textual context required":this.post.content||0!==this.post.media.length?null:"Content required":"Network required"},previewUrl:function(){return"".concat("https://temp-api.bizfluenceapp.com/","link-preview?url=").concat(this.previewLink)},profile:function(){var e=this.$store.getters["profile/getProfile"];return e},profilePicture:function(){var e=this.$store.getters["profile/getProfilePicture"];return this.profile.fetched?e||this.img:null},networkList:function(){var e=this;return this.networkSearchText?this.$store.getters["networks/getMyNetworks"].filter((function(t){return t.name.toLowerCase().includes(e.networkSearchText.toLowerCase())})):this.$store.getters["networks/getMyNetworks"]},languageList:function(){var e=this;return this.langSearchText?this.$store.getters["feeds/getLanguagesList"].filter((function(t){return t.name.toLowerCase().includes(e.langSearchText.toLowerCase())})):this.$store.getters["feeds/getLanguagesList"]},typeList:function(){var e=this;if(this.typeSearchText){console.log("Searching..."),console.log(this.typeSearchText);var t=this.$store.getters["post/getTypeList"];return console.log(t),t.filter((function(t){return t.type.toLowerCase().includes(e.typeSearchText.toLowerCase())}))}var o=this.$store.getters["post/getTypeList"];return o},userList:function(){return this.$store.getters["post/getUserListForMention"]},selectedInterests:function(){return this.$store.getters["post/getSelectedInterests"]},mainFeedAllowed:function(){return"Politics Network"!==this.post.networkName&&"Bizfluence Cafe Network"!==this.post.networkName}},methods:{goBack:function(){this.postReady=!1,this.typeSearchText="",this.langSearchText="",this.networkSearchText="",this.body=""},networkCheck:function(e){this.post.networkId?this.$bvModal.show("schedule-post-modal"):"scheduled"===e?this.setErrorStatus(!0):this.body="network"},setErrorStatus:function(e){this.errorStatus=e},linkArrayHandler:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.previewLink,!o){t.next=12;break}if(o[0]===e.activeLink){t.next=10;break}return e.loadingLink=!0,e.link=null,e.activeLink=null,t.next=8,Object(L["a"])(o[0]);case 8:n=t.sent,n.success?(e.activeLink=o[0],e.link=n,e.link.url=e.previewLink,e.link&&(e.loadingLink=!1)):e.loadingLink=!1;case 10:t.next=15;break;case 12:console.log("OR ELSE"),e.link=null,e.activeLink=null;case 15:case"end":return t.stop()}}),t)})))()},removeLinkPreview:function(){this.link.display=!1,this.previewDetails.removed=!0,this.previewLink.removed=!0,console.log(this.linkPreview)},getLinkDetails:function(e){console.log("getLinkDetails"+e),this.previewDetails=e},closeWarningModal:function(e){e()},closeWarningandClearModal:function(e){this.resetPost(),e()},saveDraftPost:function(e){this.goingToNetworks=!0,this.createPost("draft","network"),this.goToNetworkPage(),e()},uploadFile:function(){document.getElementById("video-upload").click()},setScheduleDate:function(e){this.post.scheduledPost=e,this.createPost("scheduled")},editableArea:function(){var e=this.$refs.postField.$el.firstChild;e.focus(),this.placeCaretAtEnd(e)},placeCaretAtEnd:function(e){if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!0);var o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!0),n.select()}},closeModal:function(e){var t=this;!this.post.content&&!this.post.media.length>0?(this.resetPost(),this.edit&&this.$emit("onClose"),e()):this.$nextTick((function(){t.$bvModal.show("warning-modal")}))},handleBody:function(e){console.log("bodyView",e),this.body=e},toggleModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=e},videoPoster:function(e){return e.file.poster},fileType:function(e){return"image/"===e.type.substr(0,6)?"image":"video/"===e.type.substr(0,6)?"video":"doc"},inputFile:function(e,t){var o=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,a,i,r,l,c,d,u,p,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e||t){n.next=28;break}if(o.loading||(o.loading=!0),!(e.size>=0&&e.size<o.uploadVideoParams.size)){n.next=28;break}if(s=o.post.media.length+1,a=o.files.push({file:null,order:s,loading:!0,progress:0}),i=500,r=setInterval((function(){o.files[a-1].progress<90?o.files[a-1].progress+=10:o.files[a-1].progress<99&&(o.files[a-1].progress+=3,i=1e3)}),i),o.post.media.push({file:null,order:s}),"video/"!==e.type.substr(0,6)){n.next=21;break}return n.next=11,Object(P["a"])(e.blob,{quality:.6});case 11:return c=n.sent,n.next=14,c[0].blob.arrayBuffer();case 14:return d=n.sent,u=new File([d],"thumbnail.jpeg",{type:"image/jpeg"}),console.log(u),n.next=19,o.$store.dispatch("profile/uploadImage",{newFile:u});case 19:l=n.sent,console.log(l);case 21:return n.next=23,o.$store.dispatch("profile/uploadImage",{newFile:e,thumbId:l});case 23:p=n.sent,console.log(e),h=o.fileType(e.file),"video"!==h?(o.post.media[a-1].file=p,o.files[a-1].file=e,o.files[a-1].progress=100,setTimeout((function(){o.files[a-1].loading=!1,clearInterval(r)}),1e3)):setTimeout((function(){o.post.media[a-1].file=p,o.files[a-1].file=e,o.files[a-1].progress=100,setTimeout((function(){o.files[a-1].loading=!1,clearInterval(r)}),1e3)}),2e3),o.loading&&(o.loading=!1);case 28:case"end":return n.stop()}}),n)})))()},inputFilter:function(e,t,o){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,i,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e||t){s.next=27;break}if(!(e.size>=0&&e.size>n.uploadVideoParams.size)){s.next=6;break}return n.modalMessageType="error",n.modalMessage="Upload is too large, it can't be more than 1GB",n.$nextTick((function(){n.$refs.showErrorModal.onShow(),n.$nextTick((function(){n.$bvModal.show("error-modal")}))})),s.abrupt("return",o());case 6:if(n.$refs.showErrorModal.onHide(),!/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(e.name)){s.next=9;break}return s.abrupt("return",o());case 9:if(!/\.(php5?|html?|jsx?)$/i.test(e.name)){s.next=11;break}return s.abrupt("return",o());case 11:if(!e||""!==e.error||!e.file||t&&e.file===t.file){s.next=26;break}if(e.blob="",a=window.URL||window.webkitURL,a&&(e.blob=a.createObjectURL(e.file)),e.url="",!e.blob||"image/"!==e.type.substr(0,6)){s.next=20;break}e.url=e.blob,s.next=26;break;case 20:if(!e.blob||"video/"!==e.type.substr(0,6)){s.next=26;break}return s.next=23,Object(P["a"])(e.blob,{quality:.6});case 23:i=s.sent,e.url=e.blob,e.poster=i[1].blob;case 26:!e||""!==e.error||"image/"!==e.type.substr(0,6)||!e.blob||t&&e.blob===t.blob||(e.error="image parsing",r=new Image,r.onload=function(){n.$refs.upload.update(e,{error:"",height:r.height,width:r.width})},r.Î¿nerrÎ¿r=function(){n.$refs.upload.update(e,{error:"parsing image size"})},r.src=e.blob);case 27:case"end":return s.stop()}}),s)})))()},onImageListUpdate:function(e){e.moved&&this.mediaMover(e.moved)},mediaMover:function(e){var t=e.newIndex,o=e.oldIndex;console.log(t),this.post.media.splice(t,0,this.post.media.splice(o,1)[0])},removeImage:function(e){this.files.splice(e,1),this.post.media.splice(e,1)},createPost:function(e){var t=arguments,o=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.length>1&&void 0!==t[1]?t[1]:"draft",o.post.status=e,o.post.networkId||"draft"===e){n.next=8;break}o.post.content&&(o.postReady=!0),o.errorStatus=!0,"published"===e&&(o.body="network"),n.next=29;break;case 8:if(o.post.content&&!o.loading){n.next=12;break}o.errorStatus=!0,n.next=29;break;case 12:return o.posting=!0,o.replaceMentionsString(),e&&(o.post.status=e,console.log(o.post.status)),o.post.linkPreview=o.link,a=o.post.content.length>50?50:o.post.content.length,o.post.title=o.post.content.slice(0,a),console.log("ðŸš€ ~ file: NewPostModal.vue ~ line 648 ~ createPost ~ this.post.content",o.post.content),o.post.interests=o.$store.getters["post/getSelectedInterests"].map((function(e){return e.id})),n.next=22,o.$store.dispatch("feeds/createPost",o.post);case 22:i=n.sent,o.$store.dispatch("network/getAnnouncements",{networkId:o.post.networkId}),"scheduled"==o.post.status&&"SchedulePosts"!==o.$route.name&&o.$router.push({name:"SchedulePosts"}),"draft"==o.post.status&&"DraftPosts"!==o.$route.name&&(o.goingToNetworks||o.$router.push({name:"DraftPosts"})),o.resetPost(),o.$root.$emit("bv::hide::modal","new-post-modal"),i.success?("scheduled"==o.post.status&&"SchedulePosts"!==o.$route.name&&o.$router.push({name:"SchedulePosts"}),"draft"==o.post.status&&"DraftPosts"!==o.$route.name&&"network"!=s&&o.$router.push({name:"DraftPosts"}),o.$eventBus.$emit("POST_ADDED",{post:i})):(o.modalMessageType="error",o.generalError=!0,o.modalMessage=i.result.response.data.message);case 29:case"end":return n.stop()}}),n)})))()},resetPost:function(){this.selectedLang="English",this.type="",this.posting=!1,this.postReady=!1,this.body="",this.langSearchText="",this.networkSearchText="",this.typeSearchText="",this.errorStatus=!1,this.link={},this.files=[],this.$store.commit("post/clearSelectedInterests"),this.post={content:null,title:null,communityId:null,media:[],mainFeed:!0,networkId:null,networkName:"",lang:"EN",networkDisplay:"",isAnnouncement:!1},this.selectedType=null,this.atIndex=-1,this.mentionLength=0,this.networkSearchText="",this.$store.commit("post/clearUserList")},onShow:function(){var e=this;setTimeout((function(){e.editableArea()}),500)},selectNetwork:function(e){this.body="",this.networkSearchText="",this.post.networkId=e.id,this.post.networkName=e.name,this.post.networkDisplay=e.networkDisplay,!0===this.postReady&&(this.posting=!0,this.createPost("published")),this.$store.commit("post/clearNetworkInterests")},selectLang:function(e){this.post.lang=e.id,this.selectedLang=e.name,this.body="",this.langSearchText=""},selectType:function(e){console.log(e),this.body="",this.typeSearchText="",this.type=e.title,this.post.postType=e.type},chooseNetwork:function(e,t){this.chosenNetworkName=t,this.chosenNetworkId=e},openInterestsModal:function(){console.log("ðŸ˜«"+this.post.networkId),this.$store.dispatch("post/fetchInterests",this.post.networkId),this.$bvModal.show("modal-add-interests")},updateUserList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a";this.$store.dispatch("post/fetchUserListForMention",e)},selectMentionUser:function(e,t){this.mentions.push({id:e,title:t}),this.atIndex=-1,this.mentionLength=0},onMentionsReplaced:function(e){this.replacedData=Object(a["a"])(e)},replaceMentionsString:function(){var e=this,t=document.getElementById("mentions-textarea"),o=t.getElementsByClassName("mentions-replaced");o.length&&Object(a["a"])(o).forEach((function(t){var o=t.getAttribute("data-id"),n=t.innerText;e.post.content=e.post.content.replace(t.outerHTML,"@[".concat(n,"]{").concat(o,"}"))})),this.post.content=Object(N["htmlToText"])(this.post.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0}),this.post.content=this.post.content.replace(/(\n\s*\n)+/g,"\n\n"),this.post.content=this.post.content.trim()},onNetworkSearchInputChange:function(e){this.networkSearchText=e},onTypeSearchInputChange:function(e){this.typeSearchText=e},onLangSearchInputChange:function(e){this.langSearchText=e},openGoToNetworkModal:function(){var e=this;console.log("OPEN GO TO NETWORK MODAL"),console.log(this.post.content),this.post.content&&null!=this.post.content?this.$nextTick((function(){e.$bvModal.show("new-network-warning-modal")})):this.goToNetworkPage()},goToNetworkPage:function(){this.posting=!1,this.resetPost(),this.$root.$emit("bv::hide::modal","new-post-modal"),this.$router.push({path:"/hubs/discover"})},uploadPastedFile:function(e){var t=e.type.substr(0,6);"image/"!==t&&"video/"!==t||this.$refs.upload.add(e)}}},V=U,W=(o("5045"),o("f516"),o("2877")),H=Object(W["a"])(V,n,s,!1,null,"de53ef6e",null);t["default"]=H.exports},d78c:function(e,t,o){},f516:function(e,t,o){"use strict";o("d78c")}}]);