(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fb07ccc","chunk-8335e1f2"],{"02d7":function(t,e,n){t.exports=n.p+"img/google-play-badge.8b39bd80.png"},"0348":function(t,e,n){},"0475":function(t,e,n){"use strict";n("eb33")},"065b":function(t,e,n){t.exports=n.p+"img/video-pause.1c162245.svg"},"0668":function(t,e,n){},"0af5":function(t,e,n){t.exports=n.p+"img/ic-btn-feed-comment.ad726f71.svg"},"0b3f":function(t,e,n){t.exports=n.p+"img/ic-btn-feed-share.562de1ec.svg"},"0d6b":function(t,e,n){"use strict";n("3bd4")},"0f9c":function(t,e,n){"use strict";n("1590")},1590:function(t,e,n){},1612:function(t,e,n){},"1d9d":function(t,e,n){"use strict";n("3f52")},"1dbd":function(t,e,n){"use strict";n("0348")},"1f6a":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-landing"},[t.token?n("SectionHubInvite",{attrs:{inviterDetails:t.inviterDetails,networkDetails:t.networkDetails,recentPosts:t.recentPosts},on:{joinNetwork:t.joinNetwork}}):n("SectionTopGeneric"),n("SectionCommon"),n("SectionFooter"),n("network-registration-modal",{attrs:{networkDetails:t.networkDetails,isJoined:t.isJoined,isUserAlready:t.isUserAlready,hasPendingRequest:t.hasPendingRequest},on:{registerSignUp:t.register,openSuccessModal:t.showSuccessModal,close:function(e){return t.hide("network-registration-modal")}}}),n("post-registration-modal",{attrs:{isUserAlready:t.isUserAlready,joined:t.joined,mount:t.mountPostRegistration,canJoin:!t.networkDetails.join||t.networkDetails.join},on:{close:function(e){return t.hide("post-registration-modal")},gotoHubHome:t.gotoHubHome}})],1)},o=[],i=n("1da1"),a=(n("96cf"),n("1276"),n("ac1f"),n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"section section--1"},[n("div",{staticClass:"section__inner"},[n("div",{staticClass:"section__inner__content"},[n("h1",[t._v("Time to Learn More About Your WIN")]),n("button",{staticClass:"ui-btn",on:{click:function(e){return t.$router.push("/how-it-works")}}},[t._v("Learn More")]),n("div",{staticClass:"download-app"},[n("a",{staticClass:"googleplay",attrs:{href:"https://apps.apple.com/us/app/bizfluence-business-network/id1547006576#?platform=iphone",target:"_blank"}},[n("img",{attrs:{src:t.applestore}})]),n("a",{staticClass:"googleplay",attrs:{href:"https://play.google.com/store/apps/details?id=com.bizfluenceapp.android",target:"_blank"}},[n("img",{attrs:{src:t.googleplay}})])])]),n("div",{staticClass:"section__inner__img"})])]),n("section",{staticClass:"section section--2"},[n("div",{staticClass:"section__inner"},[n("div",{staticClass:"section__inner__content"},[n("div",{staticClass:"ui-flex ui-align-center section__inner__content-img"},[n("img",{attrs:{src:t.img1}})]),t._m(0),n("div",{staticClass:"section__inner__content-t2"},[n("div",[t._v("User friendly onboarding provides education to optimize user experience.")]),n("br"),n("div",[t._v("Leave it and come back to it when you have time. We know youâ€™re busy.")]),n("br"),n("button",{staticClass:"ui-btn",on:{click:function(e){return t.$router.push("/how-it-works")}}},[t._v("How It Works")])])])])]),n("section",{staticClass:"section section--3"},[n("div",{staticClass:"section__inner"},[n("h1",[t._v("Features In Our Roadmap")]),n("div",{staticClass:"section__inner__content"},[n("img",{attrs:{src:t.img2}}),n("img",{attrs:{src:t.img3}}),n("img",{attrs:{src:t.img4}}),n("p",[t._v("Integrated CRM for easy lead generation")]),n("p",[t._v("Book meetings and calls")]),n("p",[t._v("Buy products and services")])]),n("button",{staticClass:"ui-btn",on:{click:function(e){return t.$router.push("/signup")}}},[t._v("Get Started")])])])])}),r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section__inner__content-t1"},[n("div",[t._v("Bizfluence offers the tools necessary for everyday professionals to network and create opportunities of every industry.")]),n("br")])}],c=n("e4ca"),l=n.n(c),u=n("02d7"),d=n.n(u),p=n("3951"),m=n.n(p),f=n("6414"),h=n.n(f),g=n("2093"),v=n.n(g),b=n("3e8e"),w=n.n(b),_={name:"SectionCommon",data:function(){return{img1:l.a,img2:h.a,img3:v.a,img4:w.a,googleplay:d.a,applestore:m.a}}},k=_,C=(n("b125"),n("2877")),y=Object(C["a"])(k,a,r,!1,null,"4dbba70e",null),x=y.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-generic top-invite ui-flex-col"},[n("navbar",{on:{signup:function(e){return t.$router.push({path:"/signup"})},signin:function(e){return t.$router.push({path:"/login"})}}}),n("div",{staticClass:"section__inner"},[n("div",{staticClass:"section__inner__content"},[n("h2",[t._v("Check out this")]),n("h1",[t._v("Exclusive Invite")]),n("div",[n("h3",[t._v("from "+t._s(t.inviterProfile.title))]),n("div",{staticClass:"user-content"},[n("img",{staticClass:"user-image",attrs:{src:t.inviterProfile.picture?t.inviterProfile.picture.url:""}}),n("div",{staticClass:"user-extra"},[n("span",[t._v(t._s(t.inviterProfile.postsCount)+" POSTS")]),n("span",[t._v(t._s(t.inviterProfile.followersCount)+" FOLLOWERS")]),n("span",[t._v(t._s(t.inviterProfile.personalFollowingCount)+" FOLLOWING")]),n("span",[t._v(t._s(t.inviterProfile.points)+" SCORE")])])])]),n("button",{staticClass:"ui-btn",on:{click:function(e){return t.$router.push("/signup")}}},[t._v("Join Now")])])])],1)},I=[],M=n("b8d0"),T={name:"SectionTopGeneric",components:{Navbar:M["a"]},data:function(){return{inviterProfile:{}}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s,o,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.query,s=n.ref,o=n.refSource,i=n.network,a=n.phone,o&&t.$cookies.set("refSource",o),i&&t.$cookies.set("refNetwork",i),a&&t.$cookies.set("phone",a),t.$route.query.ref>0&&(t.invited=!0),!s){e.next=12;break}return t.$cookies.set("ref",s),e.next=9,t.$store.dispatch("auth/shareTracker",{handle:s,type:"link",postId:null});case 9:return e.next=11,t.$store.dispatch("user/fetchProfile",s,{root:!0});case 11:t.inviterProfile=e.sent;case 12:case"end":return e.stop()}}),e)})))()}},$=T,L=(n("1dbd"),Object(C["a"])($,P,I,!1,null,null,null)),R=L.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section hub-invite ui-flex-col"},[n("navbar",{on:{signup:function(e){return t.$router.push({path:"/signup"})},signin:function(e){return t.$router.push({path:"/login"})}}}),n("div",{staticClass:"section__inner"},[n("div",{staticClass:"section__inner__content--img"},[t.networkDetails.banner?n("blur-hash-img",{attrs:{src:t.networkDetails.banner?t.networkDetails.banner:"",blurhash:t.networkDetails.banner.blurHash,imageClass:"hub-cover"}}):n("div",{staticClass:"hub-cover",style:{"background-image":"url("+t.defualtBanner+")"}}),n("div",{staticClass:"invite-details"},[n("p",[t._v("Exclusive Invite")]),n("div",{staticClass:"invite-details--img"},[t.inviterDetails.picture?n("blur-hash-image",{staticClass:"hub-user",attrs:{hash:t.inviterDetails.picture.blurHash?t.inviterDetails.picture.blurHash:"LdHfL}oJR$WBKnfi%3ofT0kCM{ay",src:t.inviterDetails.picture.url,transitionDuration:500,alt:"Profile Picture"}}):t._e()],1),n("div",{staticClass:"invite-details--text"},[n("p",[t._v("You have been invited by")]),n("p",[t._v(t._s(t.inviterDetails.title))]),n("p",[t._v("to join the bizfluence hub")]),n("h1",[t._v(t._s(t.networkDetails.name))])]),n("button",{staticClass:"ui-btn",style:{padding:"0 16px"},on:{click:function(e){return t.$emit("joinNetwork")}}},[t._v(" "+t._s(t.networkDetails.join?"Join Now":"Request To Join")+" ")])])],1),n("div",{staticClass:"section__inner__content--more",class:t.networkDetails.randomMembers&&t.networkDetails.randomMembers.length<3?"section__inner__content-center":""},[t.networkDetails.randomMembers&&3===t.networkDetails.randomMembers.length?n("div",{staticClass:"more-left"},[n("h3",[t._v("People In This Network")]),t._l(t.networkDetails.randomMembers,(function(e){return n("div",{key:e.id,staticClass:"user-details"},[e.picture?n("blur-hash-image",{staticClass:"user-image",attrs:{hash:e.picture.blurHash?e.picture.blurHash:"LdHfL}oJR$WBKnfi%3ofT0kCM{ay",src:e.picture.url,alt:"Profile Picture"}}):t._e(),n("p",{staticClass:"user-name"},[t._v(t._s(e.title))]),n("p",{staticClass:"user-extra"},[t._v(t._s(e.subtitle))])],1)}))],2):t._e(),t.recentPosts&&2===t.recentPosts.length?n("div",{staticClass:"more-right"},[n("h3",[t._v("Currently Discussing")]),n("div",{staticClass:"current-discussing"},t._l(t.recentPosts,(function(t){return n("div",{key:t.id,staticClass:"current-discussing__feed"},[n("feed-item",{staticClass:"feed-item-invite",attrs:{post:t,allowActions:!1}})],1)})),0)]):t._e(),t.recentPosts&&2===t.recentPosts.length?n("div",{staticClass:"more-bottom"},[n("button",{staticClass:"ui-btn",on:{click:function(e){return t.$emit("joinNetwork")}}},[t._v(" Join The Conversation ")])]):t._e()])])],1)},S=[],j=n("a508"),D=n("7c45"),N=n("f4a8"),E=n.n(N),A={name:"SectionHubInvite",components:{Navbar:M["a"],FeedItem:j["default"],BlurHashImg:D["a"]},props:{inviterDetails:{type:Object,required:!0},networkDetails:{type:Object,required:!0},recentPosts:{type:Array,required:!1}},data:function(){return{defualtBanner:E.a}},mounted:function(){console.log("MOUNTING SECTION HUB INVITE"),console.log(this.recentPosts)}},U=A,F=(n("507b"),Object(C["a"])(U,O,S,!1,null,"36345c29",null)),B=F.exports,H=n("0e56"),z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{staticClass:"registration-modal",attrs:{id:"network-registration-modal",mount:!0,title:"Enter your email to join this hub",shortHeight:!0,modalContentClass:"registration-modal",modalDialogClass:"registration-modal-dialog",hideFooter:!0,hideHeader:!0},on:{hide:t.clear,shown:t.focusOnInput},scopedSlots:t._u([{key:"body",fn:function(){return[n("div",[n("button",{staticClass:"close",on:{click:t.clear}},[n("span",[t._v("X")])])]),n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-content__title"},[t._v(" "+t._s(t.message.title)+" ")]),t.message.text?n("div",{staticClass:"modal-content__title--text"},[t._v(" "+t._s(t.message.text)+" ")]):t._e(),n("b-form-input",{ref:"registrationInput",staticClass:"modal-content__input",attrs:{state:t.isValidEmail,placeholder:"example@mail.com",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t.isUserAlready?n("b-form-input",{ref:"registrationInput",staticClass:"modal-content__password",attrs:{placeholder:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}):t._e(),n("button",{staticClass:"modal-content__button",attrs:{disabled:!t.isValidEmail},on:{click:t.register}},[t._v(" "+t._s(t.isUserAlready?"Login":"Join")+" ")])],1)]},proxy:!0}])})},q=[],V=(n("a15b"),n("4d63"),n("25f0"),n("466d"),n("7299")),J=n("2b0e"),W=n("29b2"),K={name:"NetworkRegistrationModal",components:{BaseModal:V["default"]},props:{isUserAlready:{type:Boolean,required:!0},isJoined:{type:Boolean,required:!0},networkDetails:{type:Object},hasPendingRequest:{type:Boolean,default:!1}},data:function(){return{email:"",password:""}},mounted:function(){console.log("NetworkRegistrationModal mounted")},computed:{message:function(){return this.isUserAlready&&!this.isJoined&&!this.hasPendingRequest&&this.networkDetails.join?{title:"Login to join",text:"Upon login you will be automatically joined"}:!this.isUserAlready||this.isJoined||this.networkDetails.join||this.hasPendingRequest?this.isUserAlready&&this.isJoined&&!this.hasPendingRequest?{title:"You are already a member of this hub",text:"Login to view the hub homepage"}:this.isUserAlready&&this.hasPendingRequest&&!this.isJoined?{title:"You have already requested to join this hub",text:"Login to view your hub invite manager"}:{title:"Enter your email to join this hub",text:""}:{title:"Login to complete your request",text:"Upon login a join request will be created automatically"}},isValidEmail:function(){var t=new RegExp(/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return this.email.match(t)?(console.log("matched"),!0):(console.log("not matched"),!1)}},methods:{register:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isUserAlready){e.next=12;break}return n={email:t.email,password:t.password,auth:!0},e.next=4,t.$store.dispatch("auth/signInUser",n);case 4:return s=t.$store.getters["auth/getUserAuthToken"],e.next=7,t.$store.dispatch("profile/fetchProfile");case 7:J["default"].use(Object(W["a"])(t.$store,s)),o=t.isJoined?"/hubs/"+t.networkDetails.slug:"/hub-invites/2",t.$router.push({path:o}),e.next=13;break;case 12:t.$emit("registerSignUp",t.email);case 13:case"end":return e.stop()}}),e)})))()},clear:function(){this.email="",this.$emit("close")},focusOnInput:function(){console.log("focusOnInput"),this.$refs["registrationInput"].focus()}}},G=K,Y=(n("0d6b"),Object(C["a"])(G,z,q,!1,null,"4656b43a",null)),Z=Y.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{staticClass:"post-registration-modal",attrs:{id:"post-registration-modal",mount:t.mount,title:"Enter your email to join this hub",shortHeight:!0,hideFooter:!0,hideHeader:!0,modalContentClass:t.canJoin?"post-registration-modal":"post-registration-modal-small",modalDialogClass:"registration-modal-dialog",size:"lg"},scopedSlots:t._u([{key:"body",fn:function(){return[n("div",[n("button",{staticClass:"close",on:{click:function(e){return t.$emit("close")}}},[n("span",[t._v("X")])])]),n("div",{class:t.canJoin?"modal-content":"modal-content modal-content__small"},[n("img",{attrs:{src:t.ic_check_circle}}),n("div",{staticClass:"modal-content__message"},[n("p",[t._v("Congratulations!")]),n("p",[t._v(t._s(t.message))])]),!t.joined&&t.canJoin?n("div",{staticClass:"modal-content__instructions"},[n("p",[t._v(t._s(t.instruction))]),n("p",[t._v("the hub home page")])]):t._e(),n("button",{class:t.canJoin?"modal-content__button":"modal-content__button modal-content__button__small",on:{click:t.handleGoto}},[t._v(" "+t._s(t.buttonText)+" ")])])]},proxy:!0}])})},X=[],tt=n("fc9d"),et=n.n(tt),nt=n("e67d"),st=n.n(nt),ot={name:"PostRegistrationModal",components:{BaseModal:V["default"]},directives:{ClickOutside:st.a},props:{isUserAlready:{type:Boolean,required:!0},joined:{type:Boolean,default:!1},mount:{type:Boolean,required:!0},canJoin:{type:Boolean,required:!0,defualte:!0}},data:function(){return{ic_check_circle:et.a,password:""}},computed:{instruction:function(){return this.isUserAlready?"Sign in to access":"Complete sign-up to access"},buttonText:function(){return this.joined?"Go to the hub's home page":this.isUserAlready?"Sign in":"Sign Up now"},message:function(){return this.canJoin?this.joined?"You have joined this hub":"You have been registered to join this hub":"Your Join Request has been registered"}},methods:{handleGoto:function(){this.joined?this.$emit("gotoHubHome"):this.isUserAlready?this.$router.push({path:"/login"}):this.$router.push({path:"/signup"})},hide:function(){this.$emit("clickedOutside")}}},it=ot,at=(n("1d9d"),Object(C["a"])(it,Q,X,!1,null,"a92ae210",null)),rt=at.exports,ct={name:"LandingInvite",components:{SectionFooter:H["a"],SectionHubInvite:B,SectionTopGeneric:R,SectionCommon:x,NetworkRegistrationModal:Z,PostRegistrationModal:rt},data:function(){return{token:"",inviterDetails:{},networkDetails:{},recentPosts:[],joined:!1,isUserAlready:!1,mountPostRegistration:!1,hasPendingRequest:!1,isJoined:!1,type:""}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s,o,i,a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.$route),!t.$route.params.token){e.next=20;break}return n=t.$route.path.split("/").pop(),e.next=5,t.$store.dispatch("networks/getLongToken",{token:n});case 5:return t.token=e.sent,e.next=8,t.$store.dispatch("networks/getInvitationDetails",{token:t.token});case 8:s=e.sent,o=s.inviterDetails,i=s.networkDetails,a=s.recentPosts,r=s.joined,c=s.hasPendingRequest,t.joined=r,t.hasPendingRequest=c,t.inviterDetails=o,t.networkDetails=i,t.recentPosts=a,r?t.gotoHubHome():c&&t.$router.push("/hub-invites/2");case 20:case"end":return e.stop()}}),e)})))()},computed:{isAuth:function(){return this.$store.getters["auth/getAuthStatus"]}},methods:{joinNetwork:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAuth||t.joined||t.hasPendingRequest){e.next=7;break}return e.next=3,t.$store.dispatch("networks/joinByToken",{token:t.token});case 3:n=e.sent,n.success?(t.joined=!0,t.mountPostRegistration=!0,t.$nextTick((function(){t.$bvModal.show("post-registration-modal")}))):n.request&&t.$router.push("/hub-invites/2"),e.next=8;break;case 7:t.isAuth||t.$bvModal.show("network-registration-modal");case 8:case"end":return e.stop()}}),e)})))()},showSuccessModal:function(){var t=this;this.$bvModal.hide("network-registration-modal"),this.$nextTick((function(){t.$bvModal.show("post-registration-modal")}))},register:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o,i,a,r,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),n.next=3,e.$store.dispatch("auth/registerSignUp",{email:t,token:e.token,networkId:e.networkDetails.id});case 3:i=n.sent,a=i.isBizMember,r=i.networks,c=i.type,e.isJoined=!!r&&(null===(s=r[0])||void 0===s?void 0:s.joined),e.hasPendingRequest=!!r&&(null===(o=r[0])||void 0===o?void 0:o.hasPendingRequest),e.type=c,e.isUserAlready=a,!a||e.joined||e.hasPendingRequest?a||"pendingSignupSuccess"!=c||e.showSuccessModal():(l=e.$cookies.get("regiteredNetworks"),l?(d=JSON.parse(l),d.includes(e.token)||(d.push(e.token),e.$cookies.set("regiteredNetworks",JSON.stringify(d)))):(u=[e.token],e.$cookies.set("regiteredNetworks",JSON.stringify(u)))),e.mountPostRegistration=!0,e.$nextTick((function(){}));case 14:case"end":return n.stop()}}),n)})))()},hide:function(t){this.type="",this.isUserAlready=!1,this.$bvModal.hide(t)},gotoHubHome:function(){var t="/hubs/";t+=this.networkDetails.slug,this.$router.push({path:t})}}},lt=ct,ut=(n("ce09"),Object(C["a"])(lt,s,o,!1,null,"bc36f4e0",null));e["default"]=ut.exports},2093:function(t,e,n){t.exports=n.p+"img/ic-contact.981d0609.png"},3444:function(t,e,n){t.exports=n.p+"img/ic-btn-feed-save.050c9bbd.svg"},3951:function(t,e,n){t.exports=n.p+"img/apple-store-badge.7b489163.png"},"3a10":function(t,e,n){},"3bd4":function(t,e,n){},"3e8e":function(t,e,n){t.exports=n.p+"img/ic-shopping-cart.74ce6f4b.png"},"3f52":function(t,e,n){},"3f8b":function(t,e,n){},"471a":function(t,e,n){},4925:function(t,e,n){"use strict";n("b250")},"4adc":function(t,e,n){},"507b":function(t,e,n){"use strict";n("b1b3")},"50d3a":function(t,e,n){},"55da":function(t,e,n){"use strict";n("63e3")},6062:function(t,e,n){"use strict";var s=n("6d61"),o=n("6566");t.exports=s("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},"63e3":function(t,e,n){},6414:function(t,e,n){t.exports=n.p+"img/ic-email.68807676.png"},6566:function(t,e,n){"use strict";var s=n("9bf2").f,o=n("7c73"),i=n("e2cc"),a=n("0366"),r=n("19aa"),c=n("2266"),l=n("7dd0"),u=n("2626"),d=n("83ab"),p=n("f183").fastKey,m=n("69f3"),f=m.set,h=m.getterFor;t.exports={getConstructor:function(t,e,n,l){var u=t((function(t,s){r(t,u,e),f(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=s&&c(s,t[l],{that:t,AS_ENTRIES:n})})),m=h(e),g=function(t,e,n){var s,o,i=m(t),a=v(t,e);return a?a.value=n:(i.last=a={index:o=p(e,!0),key:e,value:n,previous:s=i.last,next:void 0,removed:!1},i.first||(i.first=a),s&&(s.next=a),d?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},v=function(t,e){var n,s=m(t),o=p(e);if("F"!==o)return s.index[o];for(n=s.first;n;n=n.next)if(n.key==e)return n};return i(u.prototype,{clear:function(){var t=this,e=m(t),n=e.index,s=e.first;while(s)s.removed=!0,s.previous&&(s.previous=s.previous.next=void 0),delete n[s.index],s=s.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=m(e),s=v(e,t);if(s){var o=s.next,i=s.previous;delete n.index[s.index],s.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==s&&(n.first=o),n.last==s&&(n.last=i),d?n.size--:e.size--}return!!s},forEach:function(t){var e,n=m(this),s=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){s(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!v(this,t)}}),i(u.prototype,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),d&&s(u.prototype,"size",{get:function(){return m(this).size}}),u},setStrong:function(t,e,n){var s=e+" Iterator",o=h(e),i=h(s);l(t,e,(function(t,e){f(this,{type:s,target:t,state:o(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},"6d61":function(t,e,n){"use strict";var s=n("23e7"),o=n("da84"),i=n("94ca"),a=n("6eeb"),r=n("f183"),c=n("2266"),l=n("19aa"),u=n("861d"),d=n("d039"),p=n("1c7e"),m=n("d44e"),f=n("7156");t.exports=function(t,e,n){var h=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=h?"set":"add",b=o[t],w=b&&b.prototype,_=b,k={},C=function(t){var e=w[t];a(w,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})},y=i(t,"function"!=typeof b||!(g||w.forEach&&!d((function(){(new b).entries().next()}))));if(y)_=n.getConstructor(e,t,h,v),r.REQUIRED=!0;else if(i(t,!0)){var x=new _,P=x[v](g?{}:-0,1)!=x,I=d((function(){x.has(1)})),M=p((function(t){new b(t)})),T=!g&&d((function(){var t=new b,e=5;while(e--)t[v](e,e);return!t.has(-0)}));M||(_=e((function(e,n){l(e,_,t);var s=f(new b,e,_);return void 0!=n&&c(n,s[v],{that:s,AS_ENTRIES:h}),s})),_.prototype=w,w.constructor=_),(I||T)&&(C("delete"),C("has"),h&&C("get")),(T||P)&&C(v),g&&w.clear&&delete w.clear}return k[t]=_,s({global:!0,forced:_!=b},k),m(_,t),g||n.setStrong(_,t,h),_}},"7c89":function(t,e,n){t.exports=n.p+"img/ic-profile-count.2ea9645d.svg"},8295:function(t,e,n){"use strict";n("dfc0")},"88ce":function(t,e,n){t.exports=n.p+"img/ic-btn-feed-follow.2255e1e6.svg"},8987:function(t,e,n){t.exports=n.p+"img/ic_btn_pin.bd64297e.svg"},"89b4":function(t,e,n){},"89c5":function(t,e,n){"use strict";n("3a10")},"952f":function(t,e,n){t.exports=n.p+"img/like.c325f9fd.svg"},"9be6":function(t,e,n){"use strict";n("d322")},a508:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.componentKey,staticClass:"feed-item",attrs:{id:"feed-item--"+(this.post.activity?this.post.activity.id:this.post.id)}},[t.post.activity&&"publish"!==t.post.activity.type?n("div",{staticClass:"feed-item__latest-liked"},[n("div",{staticClass:"feed-item__latest-liked--profile"},[n("img",{staticClass:"user-image clickable",attrs:{src:t.post.activity.profile.picture.formats&&t.post.activity.profile.picture.formats.thumbnail?t.post.activity.profile.picture.formats.thumbnail.url:t.post.activity.profile.picture.url},on:{click:t.showUserProfile}}),n("span",{staticClass:"user-name clickable",on:{click:function(e){return t.showUserProfile(t.post.activity.profile.handle)}}},[t._v(t._s(t.post.activity.profile.title))]),t.post.activity.activityCount-1>0?n("span",{staticClass:"user-desc"},[t._v(t._s(" and "+(t.post.activity.activityCount-1)+" "+(t.post.activity.activityCount-1>1?"others":"other")))]):t._e(),n("span",{staticClass:"user-desc"},[t._v(t._s(t.lastActivityText))]),"share"!==t.post.activity.type||t.networkFeed?t._e():n("span",{staticClass:"ui-flex posted-in",on:{click:function(e){return t.goToNetwork(t.post.activity.network.slug)}}},[n("label",{staticClass:"post-tag clickable"},[t._v(t._s(t.post.activity.network.name))])]),n("span",{staticClass:"user-desc"},[t._v(" "+t._s(t._f("moment")(t.post.activity.publishedAt,"from","now"))+" ")])]),!t.post.activity||"comment"!==t.post.activity.type&&"share"!==t.post.activity.type?t._e():n("div",{on:{click:t.postContentClick}},[n("span",{staticClass:"feed-item__latest-liked--content",class:t.seeFullActivityText?"":"see-less",domProps:{innerHTML:t._s((t.seeFullActivityText?t.parsePost(t.activityContent):t.parsePost(t.activityContent.slice(0,t.maxActivityText)))+" "+(t.activityContent.length>t.maxActivityText&&!t.seeFullActivityText?"...":""))}}),t.activityContent.length>t.maxActivityText?n("span",{staticClass:"see-more-button",on:{click:t.toggleFullActivityText}},[t._v(" "+t._s(t.seeFullActivityText?"See less":"See more")+" ")]):t._e()])]):t._e(),n("div",{staticClass:"feed-item__container",class:[0===t.post.commentsNumber&&0===t.post.interests.length?"feed-item__container--null-comment":"",0===t.post.upvotesCount&&t.post.reactions&&0===t.post.reactions.length?"feed-item__container--null-reaction":""]},[n("div",{staticClass:"f-profile-img highlighted"},[n("img",{staticClass:"user-image clickable",attrs:{src:t.profilePicture},on:{click:t.showUserProfile}})]),n("div",{staticClass:"f-profile-title"},[n("p",{staticClass:"user-name clickable",on:{click:t.showUserProfile}},[t._v(" "+t._s(t.post.profile.title)+" ")]),t.post.profile.verified?n("img",{staticClass:"user-badge",attrs:{src:t.ic_badge1}}):t._e(),t._l(t.post.profile.badges,(function(e){return n("label",{key:e.text,staticClass:"user-label--type3",style:{backgroundColor:"#E5E7EB"}},[t._v(t._s(e.badge.text))])}))],2),this.post.profile?n("div",{staticClass:"f-profile-desc"},[n("p",{staticClass:"user-extra",on:{mouseover:t.toggleTitleHover,mouseleave:t.toggleTitleHover}},[t._v(" "+t._s(t.titleText)+" ")])]):t._e(),n("div",{staticClass:"f-profile-timestamp"},[t.isPinnedPost?n("span",{staticClass:"f-profile-timestamp__pinned"},[n("span",{staticClass:"icon-thumb-stack pinned-icon"}),t._v("Pinned "+t._s(t._f("moment")(t.post.publishedAt,"from","now")))]):n("span",{staticClass:"time-stamp"},[t._v(t._s(t._f("moment")(t.post.publishedAt,"from","now")))]),t.post.network?n("div",{staticClass:"ui-flex posted-in",on:{click:function(e){return t.goToNetwork(t.post.network.slug)}}},[n("label",{staticClass:"post-tag clickable"},[t._v(t._s(t.post.network.name)),n("span",{staticClass:"icon-plus"})])]):t._e()]),n("div",{staticClass:"f-profile-labels"},[n("div",{staticClass:"profile-score"},[n("img",{staticClass:"profile-score__icon",attrs:{src:t.ic_count}}),n("span",{staticClass:"profile-score__text"},[t._v(t._s(t.abreviatePoints))])]),t.post.postType?n("div",{staticClass:"post-type"},[n("span",{staticClass:"post-type__icon",class:t.typeIcon}),n("span",{staticClass:"post-type__text"},[t._v(t._s(t.postTypeText))])]):t._e()]),t.isUserAuthenticated&&t.allowActions?n("div",{staticClass:"f-profile-more"},[t.post.isAnnouncement?n("div",[n("span",{staticClass:"icon-annoucement f-annouce-icon"})]):t._e(),n("base-icon-dropdown",{attrs:{"no-caret":"",right:""}},[t.isOwnPost?n("base-list-item-default",{attrs:{icon:"icon-ic-btn-edit",button:""},on:{click:function(e){return t.editPost()}}},[t._v(" Edit ")]):t._e(),t.isOwnPost?t._e():n("base-list-item-default",{attrs:{icon:"icon-ic-mute"}},[t._v("Mute ")]),t.isOwnPost?t._e():n("base-list-item-default",{attrs:{button:"",icon:"icon-user-unfollow"},on:{click:function(e){return t.blockUser(t.post)}}},[t._v("Block User ")]),t.isOwnPost?t._e():n("base-list-item-default",{attrs:{icon:"icon-report"},nativeOn:{click:function(e){return t.reportPost(e)}}},[t._v("Report ")]),t.isOwnPost||"Super Admin"===t.currentUserRole?n("base-list-item-default",{attrs:{icon:"icon-remove",button:""},on:{click:t.showDeletePostWarningModal}},[t._v(" "+t._s(t.isOwnPost?"Delete":"Admin Delete")+" ")]):t._e(),"Super Admin"===t.currentUserRole?n("base-list-item-default",{attrs:{icon:"ic_pin",button:""},on:{click:t.togglePinPost}},[t._v(" "+t._s(t.isPinnedPost?"Unpin post":"Pin Post")+" ")]):t._e()],1)],1):t._e(),n("div",{staticClass:"f-post feed-link-preview-wrapper"},[n("div",{staticClass:"f-post__text",class:t.post.media.length>1?"f-post__text-media":"",on:{click:t.postContentClick}},[n("div",{staticClass:"f-post__text--read-more"},[t.showReadMore&&!t.readMore?n("p",{class:t.langDir?"text-rtl":"text-ltr",domProps:{innerHTML:t._s(t.formattedSummaryText)}}):n("p",{class:t.langDir?"text-rtl":"text-ltr",domProps:{innerHTML:t._s(t.formattedContentText)}}),t.showReadMore?n("a",{class:t.post.inverseTextDirection?"read-more-btn invertTxtDir":"read-more-btn",attrs:{href:"#"},on:{click:t.activateReadMore}},[t._v(" "+t._s(t.readMore?"Show Less":"Show More")+" ")]):t._e()])]),n("div",{staticClass:"f-post__tags ui-flex"},[n("div",{staticClass:"ui-block ui-flex-grow"},t._l(t.post.interests,(function(e){return n("label",{key:e.id,class:[e.network?"tag-network":"tag-global","post-tag"]},[t._v(t._s(e.title))])})),0)]),!t.post.media.length>0&&t.completeLinkPreview?n("LinkPreview",{attrs:{details:t.post.linkPreview,location:"feed"},on:{linkPreviewClick:t.postLinkClick}}):t._e(),t.post.media.length?n("feed-post-grid-img",{attrs:{post:t.post}}):t._e()],1),n("div",{staticClass:"f-post-action ui-flex"},[n("div",{staticClass:"ui-flex ui-flex-grow ui-align-center feed-react-show-wr"},[t.post.upvotesCount?n("div",{staticClass:"feed-react-show feed-react-bordered clickable",class:t.post.upvoted?"active":"",style:{"background-color":"transparent"},on:{click:function(e){return t.openLikeModal("upvote")}}},[n("img",{staticClass:"react-icon",attrs:{src:t.like}})]):t._e(),t.post.upvotesCount?n("span",{staticClass:"upvotesCount"},[t._v(t._s(t.post.upvotesCount))]):t._e(),t.post.reactions&&t.post.reactions.length>0?n("div",{staticClass:"feed-react-show feed-react-stack clickable",style:{"background-color":"var(--color-feed-reaction-1)"},on:{click:function(e){return t.openLikeModal("reactions")}}},[n("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[0].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>1?n("div",{staticClass:"feed-react-show feed-react-stack clickable",style:{"background-color":"var(--color-feed-reaction-2)"},on:{click:function(e){return t.openLikeModal("reactions")}}},[n("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[1].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>2?n("div",{staticClass:"feed-react-show feed-react-stack clickable",on:{click:function(e){return t.openLikeModal("reactions")}}},[n("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[2].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>0?n("span",{staticClass:"react-text"},[t._v(" "+t._s(t.totalReactions>3?"and "+(t.totalReactions-3)+" "+(t.totalReactions-3>1?"others":"other"):""))]):t._e()]),t.post.bookmarksCount>0?n("p",{staticClass:"ui-flex ui-align-center"},[n("span",{staticClass:"feed-reaction-text"},[t._v(t._s(t.post.bookmarksCount)+" Saved")])]):t._e()])]),t.allowActions?n("div",{staticClass:"feed-item__action"},[n("div",[!t.isOwnPost&&t.isUserOnboarded?n("div",{staticClass:"feed-like-main ui-btn__transparent",class:{active:t.reactionMouseOver},on:{mouseenter:function(e){t.reactionMouseOver=!0},mouseleave:function(e){t.reactionMouseOver=!1}}},[n("div",{staticClass:"feed-like-main__inner"},[n("div",{staticClass:"ui-flex feed-like-main__set"},t._l(t.reactionLists,(function(e){return n("div",{key:e.id},[n("button",{staticClass:"ui-btn__transparent ui-btn__feed-react",on:{click:function(n){return t.react(e.id)}}},[n("span",{staticClass:"ui-btn__feed-react-text"},[t._v(t._s(e.name))]),n("img",{attrs:{src:e.icon.url}})])])})),0)]),t.reacted?t._e():n("button",{staticClass:"ui-btn ui-btn__transparent",class:this.post.upvoted?"active":"",on:{click:function(e){return t.react(t.reactionLists[0].id)}}},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"}})]),t._v(" "+t._s(t.reactionLists[0].name)+" ")]),t.reacted?n("button",{staticClass:"ui-btn ui-btn__transparent active",staticStyle:{color:"#d97706"},on:{click:function(e){return t.react(t.reacted.id)}}},[n("img",{staticClass:"btn-icon",attrs:{src:t.reacted.icon.url}}),n("span",{staticClass:"btn-text--react"},[t._v(t._s(t.reacted.name))])]):t._e()]):t._e()]),n("div",[t.post.public?n("b-dropdown",{staticClass:"base-icon-dropdown",class:t.classDropdown,attrs:{block:"","menu-class":"base-dropdown__menu","toggle-class":"ui-btn ui-btn__transparent","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("div",[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"}})]),n("span",{staticClass:"btn-text--share"},[t._v("Share")])])]},proxy:!0}],null,!1,3739369126)},[n("base-list-item-default",{attrs:{button:""},on:{click:t.openShareOnFeedModal}},[n("svg",{staticClass:"btn-icon",attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M8.7647 4.64706H4.64706C3.73741 4.64706 3 5.38447 3 6.29412V15.3529C3 16.2626 3.73741 17 4.64706 17H13.7059C14.6155 17 15.3529 16.2626 15.3529 15.3529V11.2353M14.1883 3.48241C14.8315 2.8392 15.8744 2.8392 16.5176 3.48241C17.1608 4.12563 17.1608 5.16849 16.5176 5.8117L9.44694 12.8824H7.11765L7.11765 10.5531L14.1883 3.48241Z",stroke:"#111827","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Share on feed ")]),n("base-list-item-default",{attrs:{button:""},on:{click:t.sharePost}},[n("svg",{staticClass:"btn-icon",attrs:{width:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M18.3332 1.66797L9.1665 10.8346","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M18.3332 1.66797L12.4998 18.3346L9.1665 10.8346L1.6665 7.5013L18.3332 1.66797Z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Send to others ")])],1):t._e()],1),n("button",{staticClass:"ui-btn ui-btn__transparent",class:t.post.bookmarked?"active":"",on:{click:function(e){return t.bookmark(t.post)}}},[t.post.bookmarked?n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"}})]):n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"}})]),n("span",{staticClass:"btn-text--save"},[t._v(t._s(t.post.bookmarked?"Saved":"Save"))])]),t.isUserAuthenticated?n("button",{staticClass:"ui-btn ui-btn__transparent",on:{click:function(e){return t.commentClicked(t.post)}}},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"}})]),n("span",{staticClass:"btn-text--comment"},[t._v("Comment")])]):t._e()]):t._e(),t.post.commentsNumber>0&&t.allowActions?n("div",{class:"feed-item__comments-number ui-flex ui-align-center "+(t.post.uniqueProfilesCommented>0?"ui-justify-space-between":"ui-justify-end")},[t.post.uniqueProfilesCommented>0?n("button",{staticClass:"text-feed-comment",on:{click:function(e){t.isUserAuthenticated&&t.getPostComments()}}},[t._v(" "+t._s(t.post.uniqueProfilesCommented)+" "+t._s(1===t.post.uniqueProfilesCommented?"person is talking about this ":"people are talking about this")+" ")]):t._e(),n("button",{staticClass:"ui-btn btn-view-all",on:{click:function(e){t.isUserAuthenticated&&t.getPostComments()}}},[t._v(" "+t._s(t.showComments?"Hide Comments":"View Comments")+" "+t._s("("+t.post.commentsNumber+")")+" ")])]):t._e(),t.showComments?n("feed-item-comments",{ref:"comments",attrs:{post:t.post,"show-comments":t.showComments,initialCommentsLoading:t.initialCommentsLoading},on:{openCommentModal:t.setCommentId}}):t._e(),n("base-warning-modal",{attrs:{id:"delete-post-warning-modal-"+(this.post.activity?this.post.activity.id:this.post.id),message:"Are you sure you want to delete this post?"},on:{ok:t.deletePost}}),t.showEdit?n("edit-post-modal",{ref:"editPostModal",attrs:{editPost:t.post,"network-feed":t.networkFeed},on:{onClose:t.closeEditModal}}):t._e(),t.showSharePostOnFeed?n("share-on-feed-modal",{ref:"shareOnFeedModal",attrs:{sharePost:t.post,"network-feed":!1},on:{onClose:t.closeShareOnFeedModal}}):t._e(),t.showShare?n("share-post-modal",{ref:"sharePostModal",attrs:{sharePost:t.post},on:{close:t.closeShareModal}}):t._e(),t.showUseReactionListModal?n("user-reaction-list-modal",{ref:"reactUserListModal",attrs:{post:t.post,reactionClicked:t.reactionClicked,commentId:t.commentId},on:{close:t.closeReactListModal}}):t._e()],1)},o=[],i=n("1da1"),a=n("2909"),r=(n("96cf"),n("99af"),n("d81d"),n("caad"),n("2532"),n("fb6a"),n("a15b"),n("466d"),n("ac1f"),n("a4d3"),n("e01a"),n("5319"),n("159b"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showComments?n("div",{staticClass:"feed-item-comments-wr"},[n("div",{key:t.keyComponent,ref:"commentInputContainer",staticClass:"feed-item-comments",class:{"feed-item-comments--onboarded":t.post.commentsNumber>0}},[t.allowComment||t.isUserOnboarded?n("feed-item-comment-input",{ref:"commentInput",staticClass:"initial_comment",attrs:{post:t.post,placeholder:"Add a comment...",resourceType:"posts"},on:{submitClicked:t.onSubmitClicked}}):t._e(),t.post.commentsNumber>0?n("div",[n("div",{staticClass:"ui-flex ui-align-center ui-justify-space-between"}),t._l(t.post.comments,(function(e){return n("div",{key:e.id,staticClass:"feed-item-comments__block"},[n("div",{staticClass:"comment-main-wr",class:e.repliesCount&&t.isUserAuthenticated||t.reply_to===e.id?"has-reply-for-comment":""},[n("div",{ref:"comment-"+e.id,refInFor:!0,staticClass:"comment-main",class:t.reply_to===e.id?"make-reply-for-comment":""},[n("feed-item-comment-view",{attrs:{profile:e.profile,comment:e},on:{onCommentUpdate:t.incrementKey,vote:function(n){return t.upvote(e)}}},[n("span",{domProps:{innerHTML:t._s(t.convertMentionsOfContent(e.content))}}),n("div",{staticClass:"comment-media-wr"},t._l(e.media,(function(s,o){return n("div",{key:s.id,staticClass:"comment-img-wr"},[n("img",{staticClass:"comment-img",attrs:{src:t.getMediaUrl(s)},on:{click:function(n){return t.openModal(o,e)}}})])})),0)]),n("div",{staticClass:"ui-flex ui-align-center comment-main__details"},[n("span",{staticClass:"comment-time"},[t._v(t._s(t._f("moment")(e.publishedAt,"from","now")))]),n("p",{staticClass:"comment-like"},[e.upvotesCount?n("span",{staticClass:"clickable",on:{click:function(n){return t.openCommentLikeModal(e.id)}}},[t._v(" "+t._s(e.upvotesCount)+" Likes ")]):t._e()]),n("p",{staticClass:"comment-reply"},[t.isUserAuthenticated?n("span",{staticClass:"clickable",on:{click:function(n){return n.preventDefault(),t.toggleReply(e)}}},[t._v("Reply")]):t._e()])])],1)]),n("div",{staticClass:"comment-sub-wr"},[t._l(e.replies,(function(s){return n("div",{key:s.id,staticClass:"comment-sub",class:t.replyToReply===s.id?"make-reply-for-reply":""},[n("feed-item-comment-view",{attrs:{profile:s.profile,comment:s},on:{onCommentUpdate:t.incrementKey,vote:function(n){return t.upvote(s,e)}}},[n("span",{domProps:{innerHTML:t._s(t.convertMentionsOfContent(s.content))}}),n("div",{staticClass:"comment-media-wr"},t._l(s.media,(function(e,o){return n("div",{key:e.id,staticClass:"comment-img-wr"},[n("img",{staticClass:"comment-img",attrs:{src:t.getMediaUrl(e)},on:{click:function(e){return t.openModal(o,s)}}})])})),0)]),n("div",{staticClass:"ui-flex ui-align-center comment-main__details"},[n("span",{staticClass:"comment-time"},[t._v(t._s(t._f("moment")(s.publishedAt,"from","now")))]),n("p",{staticClass:"comment-like"},[s.upvotesCount?n("span",{staticClass:"clickable",on:{click:function(e){return t.openCommentLikeModal(s.id)}}},[t._v(" "+t._s(s.upvotesCount)+" Likes ")]):t._e()]),n("p",{staticClass:"comment-reply"},[t.isUserAuthenticated?n("span",{staticClass:"clickable",on:{click:function(n){return n.preventDefault(),t.toggleReplyToReply(e,s)}}},[t._v("Reply")]):t._e()])]),t.replyToReply===s.id?n("feed-item-comment-input",{directives:[{name:"show",rawName:"v-show",value:t.allowComment||t.isUserOnboarded,expression:"allowComment || isUserOnboarded"}],attrs:{placeholder:"Write reply",resourceType:"comments",post:t.post,comment:e,reply:s,replyToReply:""},on:{submitClicked:t.onSubmitClicked}}):t._e()],1)})),t.moreReplyCount(e)>0&&t.isUserAuthenticated?n("div",{staticClass:"show-more-replies",on:{click:function(n){return t.showMoreReplies(e)}}},[t.replyLoading?n("span",{staticClass:"show-more-replies__loading"},[t._v("Loading...")]):n("span",{staticClass:"show-more-replies__link clickable"},[t._v(" View more replies ")])]):t._e(),t.reply_to===e.id?n("feed-item-comment-input",{directives:[{name:"show",rawName:"v-show",value:t.allowComment||t.isUserOnboarded,expression:"allowComment || isUserOnboarded"}],attrs:{placeholder:"Write reply",resourceType:"comments",post:t.post,comment:e},on:{submitClicked:t.onSubmitClicked}}):t._e()],2)])})),t.viewMoreComments(t.post)&&!t.moreCommentsLoading?n("div",{staticClass:"ui-link",on:{click:t.showMoreComments}},[t._v(" View more comments ")]):t._e()],2):t._e()],1),t.moreCommentsLoading?n("div",{staticClass:"comment-spinner__container"},[n("b-spinner",{staticClass:"comments-spinner",attrs:{small:""}})],1):t._e(),t.showModal?n("modal-view-img",{attrs:{post:t.currentCommentClicked}}):t._e()],1):t._e()}),c=[],l=n("b85c"),u=(n("c96a"),n("6062"),n("3ca3"),n("ddb0"),n("7db0"),n("4d63"),n("25f0"),n("a1f0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feed-comment-input"},[n("div",{ref:"input",staticClass:"feed-comment-input__container"},[n("div",{staticClass:"f-profile-img ui-relative"},[n("img",{staticClass:"user-image",attrs:{src:t.profilePicture}})]),n("div",{staticClass:"ui-flex ui-flex-grow feed-comment-input__input-wr ui-relative"},[n("vue-tribute",{attrs:{options:t.tributeOptions}},[n("div",{ref:"commentInput",staticClass:"ui-flex-grow feed-comment-input__input ui-relative",attrs:{id:t.commentInputId,placeholder:t.placeholder,contenteditable:!0},on:{input:t.onInput}}),n("div",{staticClass:"ui-flex feed-comment-input__img-wr"},t._l(t.files,(function(e,s){return n("div",{key:e.id},[n("div",{staticClass:"ui-flex feed-comment-input__img"},[e.loading?t._e():[n("div",{staticClass:"ui-relative"},[n("img",{staticClass:"comment-img",attrs:{if:"fileType(file.file) === 'image'",src:e.file.url}}),n("button",{staticClass:"ui-btn ui-btn__rounded",on:{click:function(e){return e.preventDefault(),t.removeImage(s)}}},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}})])])])]],2)])})),0),n("div",{staticClass:"ui-flex ui-flex-col feed-comment-input__img-wr"},t._l(t.files,(function(e,s){return n("div",{key:e.id},[e.loading?n("div",{staticClass:"comment-img-uploading"},[n("div",{staticClass:"uploading-info--file"},[t._v(t._s(e.name))]),n("div",{staticClass:"ui-flex ui-align-center"},[n("div",{staticClass:"upload-img__img-loading ui-flex-grow"},[n("b-progress",{staticClass:"upload-img__img-progress",attrs:{"show-progress":"",solid:"",max:"100"}},[n("b-progress-bar",{staticClass:"upload-img__img-progress-bar",attrs:{value:e.progress}})],1)],1),n("button",{staticClass:"ui-btn ui-btn__rounded",on:{click:function(e){return e.preventDefault(),t.removeImage(s)}}},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}})])])]),n("div",{staticClass:"ui-flex ui-align-center"},[n("span",{staticClass:"uploading-info"},[t._v("532KB")]),n("span",{staticClass:"uploading-info"},[t._v(" "+t._s(e.progress)+"% uploaded")])])]):t._e()])})),0)]),n("div",{staticClass:"feed-comment-input__send-wr"},[n("file-upload",{ref:"upload-comment-"+t.commentInputId,staticClass:"upload-img__new upload__new--img",attrs:{for:"img-upload-"+t.commentInputId,"input-id":"img-upload-"+t.commentInputId,extensions:t.uploadImageParams.extensions,accept:t.uploadImageParams.accept,multiple:t.uploadImageParams.multiple,directory:t.uploadImageParams.directory,thread:t.uploadImageParams.thread,drop:t.uploadImageParams.drop,"drop-directory":t.uploadImageParams.dropDirectory,"add-index":t.uploadImageParams.addIndex},on:{"input-file":t.inputFile,"input-filter":t.inputFilter}},[n("button",{staticClass:"ui-btn ui-btn__transparent feed-comment-input__send-img"},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}})])])]),n("button",{staticClass:"ui-btn ui-btn__transparent feed-comment-input__send",class:{active:!t.isEmpty},on:{click:t.submitComment}},[t._v(" Post ")])],1)],1)])])}),d=[],p=(n("a434"),n("b0c0"),n("2b3d"),n("24cb")),m=n("c2d5"),f=n("708e"),h=function(){return Promise.resolve().then(n.t.bind(null,"8019",7))},g={name:"FeedItemCommentInput",components:{VueTribute:p["a"],FileUpload:h},props:{post:Object,comment:Object,reply:Object,resourceType:String,placeholder:String,replyToReply:{type:Boolean,default:!1}},mounted:function(){if(this.replyToReply){console.log(this.reply);var t=this.reply.profile.title,e=this.reply.profile.id,n='<span id="'.concat(this.commentInputId,'-first-mention" class="mentions-replaced" data-id="').concat(e,'" contenteditable="false">\n            ').concat(t,"</span>&nbsp;"),s=document.getElementById(this.commentInputId);s.innerHTML=n+"&nbsp";var o=document.createRange(),i=window.getSelection();console.log(s.childNodes),o.setStart(s.childNodes[1],1),o.collapse(!0),i.removeAllRanges(),i.addRange(o),s.focus()}},computed:{commentInputId:function(){return"posts"!==this.resourceType?this.replyToReply?"comment-input-".concat(this.comment.id):"comment-input-".concat(this.post.id):"post-comment-input-".concat(this.post.id)},profilePicture:function(){var t,e=this.$store.getters["profile/getProfilePicture"];return e?null!==(t=e.formats)&&void 0!==t&&t.thumbnail?e.formats.thumbnail.url:e.url:null}},data:function(){var t=this;return{isEmpty:!0,isFocused:!0,submitting:!1,content:null,rawText:"",files:[],media:[],previewDetails:null,uploadImageParams:{extensions:"gif,jpg,jpeg,png,webp",accept:"image/png,image/gif,image/jpeg,image/webp",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},tributeOptions:{trigger:"@",allowSpaces:!0,noMatchTemplate:function(){return'<div class="mentions-container__empty-result"> No Result Found </div>'},values:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.remoteSearch(n,(function(t){return s(t)}));case 2:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}(),lookup:"title",fillAttr:"title",positionMenu:!0,containerClass:"mentions-container",itemClass:"mentions-item",selectClass:"mentions-item__selected",loadingItemTemplate:function(){return'<div class="mentions-item__container">\n            Loading...\n            </div>\n            '},selectTemplate:function(t){return'<span class="mentions-replaced" data-id="'.concat(t.original.id,'" contenteditable="false">\n            ').concat(t.original.title,"</span>")},menuItemTemplate:function(e){return'<div class="mentions-item__container">\n            <img class="mentions-item__img" src='.concat(t.avatarImage(e.original),'>\n            <div class="mentions-item__text">').concat(e.string,"</div>\n            </div>\n            ")},requireLeadingSpace:!1}}},methods:{fileType:function(t){return"image/"===t.type.substr(0,6)?"image":"video/"===t.type.substr(0,6)?"video":"doc"},removeImage:function(t){this.files.splice(t,1),this.media.splice(t,1)},inputFile:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o,i,a,r,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t||e){s.next=28;break}if(n.loading||(n.loading=!0),!(t.size>=0&&t.size<n.uploadImageParams.size)){s.next=28;break}if(o=n.media.length+1,i=n.files.push({file:null,order:o,loading:!0,progress:0,name:t.name}),a=500,r=setInterval((function(){n.files[i-1].progress<90?n.files[i-1].progress+=10:n.files[i-1].progress<99&&(n.files[i-1].progress+=3,a=1e3)}),a),n.media.push({file:null,order:o}),"video/"!==t.type.substr(0,6)){s.next=21;break}return s.next=11,Object(f["a"])(t.blob,{quality:.6});case 11:return l=s.sent,s.next=14,l[0].blob.arrayBuffer();case 14:return u=s.sent,d=new File([u],"thumbnail.jpeg",{type:"image/jpeg"}),console.log(d),s.next=19,n.$store.dispatch("profile/uploadImage",{newFile:d});case 19:c=s.sent,console.log(c);case 21:return s.next=23,n.$store.dispatch("profile/uploadImage",{newFile:t,thumbId:c});case 23:p=s.sent,console.log(t),m=n.fileType(t.file),"video"!==m?(n.media[i-1].file=p,n.files[i-1].file=t,n.files[i-1].progress=100,setTimeout((function(){n.files[i-1].loading=!1,clearInterval(r)}),1e3)):setTimeout((function(){n.media[i-1].file=p,n.files[i-1].file=t,n.files[i-1].progress=100,setTimeout((function(){n.files[i-1].loading=!1,clearInterval(r)}),1e3)}),2e3),n.loading&&(n.loading=!1);case 28:case"end":return s.stop()}}),s)})))()},inputFilter:function(t,e,n){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var i,a,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t||e){o.next=26;break}if(!(t.size>=0&&t.size>s.uploadImageParams.size)){o.next=6;break}return s.modalMessageType="error",s.modalMessage="Upload is too large, it can't be more than 1GB",s.$nextTick((function(){s.$refs.showErrorModal.onShow(),s.$nextTick((function(){s.$bvModal.show("error-modal")}))})),o.abrupt("return",n());case 6:if(!/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name)){o.next=8;break}return o.abrupt("return",n());case 8:if(!/\.(php5?|html?|jsx?)$/i.test(t.name)){o.next=10;break}return o.abrupt("return",n());case 10:if(!t||""!==t.error||!t.file||e&&t.file===e.file){o.next=25;break}if(t.blob="",i=window.URL||window.webkitURL,i&&(t.blob=i.createObjectURL(t.file)),t.url="",!t.blob||"image/"!==t.type.substr(0,6)){o.next=19;break}t.url=t.blob,o.next=25;break;case 19:if(!t.blob||"video/"!==t.type.substr(0,6)){o.next=25;break}return o.next=22,Object(f["a"])(t.blob,{quality:.6});case 22:a=o.sent,t.url=t.blob,t.poster=a[1].blob;case 25:!t||""!==t.error||"image/"!==t.type.substr(0,6)||!t.blob||e&&t.blob===e.blob||(t.error="image parsing",r=new Image,r.onload=function(){s.$refs["upload-comment-".concat(s.commentInputId)].update(t,{error:"",height:r.height,width:r.width})},r.Î¿nerrÎ¿r=function(){s.$refs["upload-comment-".concat(s.commentInputId)].update(t,{error:"parsing image size"})},r.src=t.blob);case 26:case"end":return o.stop()}}),o)})))()},getLinkDetails:function(t){this.previewDetails=t},onInput:function(t){this.content=t.target.innerHTML,this.rawText=t.target.innerHTML,this.isEmpty=!1},submitComment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.submitting||!t.content){e.next=11;break}return t.submitting=!0,t.replaceMentionsString(),n="posts"===t.resourceType?t.post:t.comment,e.next=6,t.$store.dispatch("feeds/submitComment",{post:t.post,resource:n,resourceType:t.resourceType,content:t.content,media:t.media});case 6:t.submitting=!1,t.content="",s=document.getElementById(t.commentInputId),s.innerHTML="",t.$emit("submitClicked");case 11:case"end":return e.stop()}}),e)})))()},enterPressed:function(t){t.ctrlKey||t.metaKey?console.log("New Line",t):console.log("Submit",t)},avatarImage:function(t){var e,n,s;return"undefined"!=typeof t&&null!==t&&void 0!==t&&t.picture?(null===(e=t.picture)||void 0===e||null===(n=e.formats)||void 0===n||null===(s=n.thumbnail)||void 0===s?void 0:s.url)||t.picture.url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"},remoteSearch:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,n.$store.dispatch("post/fetchUserListForMention",t);case 3:o=s.sent,e(o),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.log(s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))()},replaceMentionsString:function(){var t=this,e=document.getElementById(this.commentInputId),n=e.getElementsByClassName("mentions-replaced");n.length&&Object(a["a"])(n).forEach((function(e){var n=e.getAttribute("data-id"),s=e.innerText;t.content=t.content.replace(e.outerHTML,"@[".concat(s,"]{").concat(n,"}"))})),this.content=Object(m["htmlToText"])(this.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0})},focus:function(){this.$refs.commentInput.focus()}}},v=g,b=(n("4925"),n("2877")),w=Object(b["a"])(v,u,d,!1,null,"5b64bb5f",null),_=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feed-comment-view ui-flex"},[n("div",{staticClass:"f-profile-img"},[n("img",{staticClass:"user-image clickable",attrs:{src:t.profilePicture},on:{click:t.showUserProfile}})]),n("div",{staticClass:"feed-comment-view__wr"},[n("div",{staticClass:"feed-comment-view__comment",on:{click:t.commentContentClick}},[n("div",{staticClass:"feed-comment-view__comment-text"},[n("span",{staticClass:"clickable user-name",on:{click:t.showUserProfile}},[t._v(t._s(t.profile.title))]),t._t("default")],2)]),n("div",{staticClass:"feed-comment-view__action ui-text-right"},[t.isUserAuthenticated&&!t.isOwnComment?n("div",{class:t.comment.upvoted?"comment-like active":"comment-like",on:{click:t.vote}},[t.comment.upvoted?n("button",{staticClass:"ui-btn ui-btn__rounded"},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"}})])]):n("button",{staticClass:"ui-btn ui-btn__rounded"},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"}})])])]):t._e(),t.isUserAuthenticated?n("base-icon-dropdown",{attrs:{"no-caret":"",right:""}},[t.isOwnComment?n("base-list-item-default",{attrs:{button:""},on:{click:function(e){return t.editComment()}}},[t._v(" Edit ")]):t._e(),t.isOwnComment?n("base-list-item-default",{attrs:{button:""},on:{click:t.deleteComment}},[t._v(" Delete ")]):t._e(),t.isOwnComment?t._e():n("base-list-item-default",{attrs:{icon:"icon-report"},nativeOn:{click:function(e){return t.reportComment(e)}}},[t._v(" Report ")])],1):t._e()],1)]),t.showEdit?n("EditCommentModal",{ref:"editCommentModal",attrs:{"edit-comment":t.comment},on:{onClose:t.closeEditModal,onCommentUpdate:function(e){return t.$emit("onCommentUpdate")}}}):t._e()],1)},C=[],y=n("b65d"),x=n("8f1b"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("base-modal",{attrs:{id:"edit-comment-modal",scrollable:"",mount:t.show,"short-height":!0,size:"md"},on:{onClose:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(e){var s=e.close;return[n("div",{staticClass:"image-network-container"},[t.profilePicture?n("img",{staticClass:"user-image",attrs:{src:t.profilePicture,alt:"user"}}):n("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}}),n("div",{staticClass:"header"},[t._v("Edit Comment")])],1),n("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return t.closeModal(s)}}},[n("span",{staticClass:"icon-ic-modal-close"})])]}},{key:"body",fn:function(){return[n("div",{staticClass:"feed-item-new-post"},[n("div",{staticClass:"feed-item-new-post__main"},[n("mentionable-text-area",{ref:"commentField",attrs:{content:t.comment.content},on:{input:function(e){return t.comment.content=e},"mentions-replaced":t.onMentionsReplaced}})],1)])]},proxy:!0},{key:"footer",fn:function(e){var s=e.save;return[n("div",{staticClass:"feed-item-new-post__action"},[n("span",{attrs:{id:"save-button-disabled-container",tabindex:"0"}},[n("button",{staticClass:"ui-btn btn-primary ui-btn__post",attrs:{disabled:!t.comment.content||t.loading},on:{click:function(e){return e.preventDefault(),t.updateComment(s)}}},[t.loading?n("b-spinner",{attrs:{small:"",label:"loader"}}):[t._v(" Save ")]],2)])])]}}],null,!1,221230430)}):t._e()},I=[],M=n("5530"),T=n("7299"),$=n("4f3e"),L=n.n($),R=n("a6ae"),O=n.n(R),S=n("c0e6"),j=n.n(S),D=n("c627"),N=n.n(D),E=n("ed35"),A={name:"EditCommentModal",components:{BaseModal:T["default"],MentionableTextArea:E["a"]},emits:["onClose","onCommentUpdate"],props:{editComment:{type:Object,required:!0},networkFeed:{type:Boolean,required:!1,default:!1}},data:function(){return{ic_close:N.a,feed_t1:L.a,feed_t2:O.a,feed_t3:j.a,contentClass:"content-class",show:!1,loading:!1,replacedData:null,comment:{id:null,content:null,post:null,parentComment:null}}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s,o,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.editComment,s=n.id,o=n.content,i=n.post,a=n.parentComment,console.log("ðŸš€ ~ file: EditCommentModal.vue ~ line 110 ~ mounted ~ this.editComment",t.editComment),t.comment=Object(M["a"])(Object(M["a"])({},t.comment),{},{id:s,content:o,post:i,parentComment:a}),setTimeout((function(){t.editableArea()}),500);case 4:case"end":return e.stop()}}),e)})))()},computed:{profilePicture:function(){var t,e=this.$store.getters["profile/getProfilePicture"];return e?null!==(t=e.formats)&&void 0!==t&&t.thumbnail?e.formats.thumbnail.url:e.url:null}},methods:{editableArea:function(){var t=this.$refs.commentField.$el.firstChild;t.focus(),this.placeCaretAtEnd(t)},placeCaretAtEnd:function(t){if(t.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if("undefined"!=typeof document.body.createTextRange){var s=document.body.createTextRange();s.moveToElementText(t),s.collapse(!1),s.select()}},closeModal:function(t){this.resetComment(),t(),this.$emit("onClose")},resetComment:function(){this.comment={id:null,content:null}},toggleModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=t},updateComment:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,e.replaceMentionsString(),n.next=4,e.$store.dispatch("feeds/updateComment",{id:e.comment.id,content:e.comment.content,post:null!==(s=e.comment.post)&&void 0!==s?s:null,parentComment:null!==(o=e.comment.parentComment)&&void 0!==o?o:null});case 4:e.loading=!1,e.$emit("onCommentUpdate"),e.closeModal(t);case 7:case"end":return n.stop()}}),n)})))()},onMentionsReplaced:function(t){this.replacedData=Object(a["a"])(t)},replaceMentionsString:function(){var t=this,e=document.getElementById("mentions-textarea"),n=e.getElementsByClassName("mentions-replaced");n.length&&Object(a["a"])(n).forEach((function(e){var n=e.getAttribute("data-id"),s=e.innerText;t.comment.content=t.comment.content.replace(e.outerHTML,"@[".concat(s,"]{").concat(n,"}"))})),this.comment.content=Object(m["htmlToText"])(this.comment.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0})}}},U=A,F=(n("b8f6"),n("0f9c"),Object(b["a"])(U,P,I,!1,null,"16ff0aeb",null)),B=F.exports,H={name:"FeedItemCommentView",components:{EditCommentModal:B,BaseIconDropdown:y["a"],BaseListItemDefault:x["a"]},props:{profile:Object,comment:Object},computed:{profilePicture:function(){var t,e;return this.profile&&null!==(t=this.profile.picture)&&void 0!==t&&null!==(e=t.formats)&&void 0!==e&&e.thumbnail?this.profile.picture.formats.thumbnail.url:null},isOwnComment:function(){return this.comment.my},isUserAuthenticated:function(){return this.$store.getters["auth/getAuthStatus"]}},data:function(){return{showEdit:!1}},methods:{reportComment:function(){this.$eventBus.$emit("OPEN_REPORT_MODAL",{type:"comment",entityId:this.comment.id,action:"feeds/report",successMessage:"The report has been submitted successfully ",errorMessage:"An error accured while submitting this report please try again later"})},vote:function(){this.$emit("vote")},showUserProfile:function(){var t=this.profile.handle;this.$router.push({path:"/profiles/"+t})},commentContentClick:function(t){var e=this;if(console.log(t),t.target.matches(".mention")){var n=t.target.attributes["data-id"].value;this.$store.dispatch("feeds/getSlugForProfileId",n).then((function(t){if(t){var n="/profiles/"+t;e.$router.push({path:n})}}))}},editComment:function(){var t=this;this.showEdit=!0,this.$nextTick((function(){t.$refs.editCommentModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("edit-comment-modal")}))}))},deleteComment:function(){this.$store.dispatch("feeds/deleteComment",this.comment),this.$emit("onCommentUpdate")},closeEditModal:function(){this.showEdit=!1},openCommentLikeModal:function(t){this.$emit("openCommentModal",{type:"upvote",commentId:t})}}},z=H,q=(n("ce4d"),Object(b["a"])(z,k,C,!1,null,"a3cff718",null)),V=q.exports,J=n("d64d"),W=n.n(J),K=n("be02"),G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"viewFeed",attrs:{"content-class":"feed-modal",id:"modal-view-img-"+t.post.id,size:"xl",centered:"","modal-class":"view-img-modal","hide-footer":"","dialog-class":"feed-dialog"},scopedSlots:t._u([{key:"modal-header",fn:function(t){var e=t.close;return[n("button",{staticClass:"close",on:{click:function(t){return e()}}},[n("span",{staticClass:"icon-ic-modal-close"})])]}}])},[n("b-row",{staticClass:"img-view-wr",attrs:{"align-h":"center"}},[n("b-col",{staticClass:"img-view-wr__content"},[t.post?n("slider",{attrs:{animation:"normal",autoplay:!1,value:t.slideIndex,height:"100%",width:"100%",speed:300,stopOnHover:!0,"control-btn":1!==t.post.media.length,indicators:!1},on:{change:t.pause}},t._l(t.post.media,(function(e){return n("slider-item",{key:e.id},[e.file&&e.file.mime?n("div",[e.file.mime.includes("image")?n("blur-hash-img",{attrs:{src:e.file,blurhash:e.file.blurHash,imageClass:"img-view-wr__slides",height:517}}):n("b-embed",{attrs:{type:"video",allowfullscreen:"",controls:"",aspect:"1by1",controlsList:"nodownload"},on:{canplay:t.updatePaused,playing:t.updatePaused,pause:t.updatePaused}},[n("source",{attrs:{src:e.file.url}})])],1):t._e()])})),1):t._e()],1),t.post?n("b-col",{staticClass:"info-col"},[n("div",{staticClass:"info-wr"},[n("div",{staticClass:"info-wr__user"},[n("div",{staticClass:"user-profile-img"},[n("img",{staticClass:"user-image clickable",attrs:{src:t.post.profile.picture.formats&&t.post.profile.picture.formats.thumbnail?t.post.profile.picture.formats.thumbnail.url:t.post.profile.picture.url},on:{click:t.showUserProfile}}),n("span",{staticClass:"user-status user-status--online"})]),n("div",{staticClass:"user-profile-title"},[n("p",{staticClass:"user-name clickable",on:{click:t.showUserProfile}},[t._v(" "+t._s(t.post.profile.title)+" ")]),n("img",{staticClass:"user-badge",attrs:{src:t.ic_badge1}})]),n("div",{staticClass:"user-profile-desc"},[n("p",{staticClass:"user-extra"},[t._v(t._s(t.post.profile.subtitle))])])]),n("div",{staticClass:"info-wr__desc",on:{click:t.postContentClick}},[n("p",{domProps:{innerHTML:t._s(t.formattedText)}})]),n("div",{staticClass:"info-wr__reaction ui-flex"},[n("div",{staticClass:"ui-flex ui-flex-grow ui-align-center feed-react-show-wr"},[n("div",{staticClass:"\n                  ui-flex ui-flex-grow ui-align-center\n                  feed-react-show-wr clickable",on:{click:function(e){return t.openLikeModal()}}},[t.post.reactions&&t.post.reactions.length>0?n("div",{staticClass:"feed-react-show feed-react-stack click",style:{"background-color":"var(--color-feed-reaction-1)"}},[n("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[0].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>1?n("div",{staticClass:"feed-react-show feed-react-stack",style:{"background-color":"var(--color-feed-reaction-2)"}},[n("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[1].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>2?n("div",{staticClass:"feed-react-show feed-react-stack"},[n("img",{staticClass:"react-icon",attrs:{src:t.post.reactions[2].reaction.icon.url}})]):t._e(),t.post.reactions&&t.post.reactions.length>0?n("span",{staticClass:"feed-reaction-text"},[t._v(" "+t._s(t.totalReactions>3?"and "+(t.totalReactions-3)+" "+(t.totalReactions-3>1?"others":"other"):""))]):t._e()]),t.post.bookmarksCount>0?n("p",{staticClass:"ui-flex ui-align-center"},[n("span",{staticClass:"feed-reaction-text"},[t._v(t._s(t.post.bookmarksCount)+" Saved")])]):t._e(),t.post.commentsNumber>0?n("p",{staticClass:"ui-flex ui-align-center"},[n("span",{staticClass:"feed-reaction-text"},[t._v(t._s(t.post.commentsNumber)+" "+t._s(t.post.commentsNumber>1?"Comments":"Comment"))])]):t._e()]),n("div")]),"posts"!==t.post.resourceType&&"comments"!==t.post.resourceType?n("div",{staticClass:"info-wr__action",class:t.isOwnPost?"feed-item__action-two-col":""},[t.isOwnPost?t._e():n("div",{staticClass:"feed-like-main"},[n("div",{staticClass:"feed-like-main__inner"},[n("div",{staticClass:"ui-flex feed-like-main__set"},t._l(t.reactionLists,(function(e){return n("button",{key:e.id,staticClass:"ui-btn__transparent ui-btn__feed-react",on:{click:function(n){return t.react(e._id)}}},[n("span",{staticClass:"ui-btn__feed-react-text"},[t._v(t._s(e.name))]),n("img",{attrs:{src:e.icon.url}})])})),0)]),t.reacted?t._e():n("button",{staticClass:"ui-btn ui-btn__transparent",class:this.post.upvoted?"active":"",on:{click:function(e){return t.react(t.reactionLists[0].id)}}},[n("svg",{staticClass:"btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"}})]),t._v(" "+t._s(t.reactionLists[0].name)+" ")]),t.reacted?n("button",{staticClass:"ui-btn ui-btn__transparent active",staticStyle:{color:"#D97706"},on:{click:function(e){return t.react(t.reacted.id)}}},[n("img",{staticClass:"btn-icon",attrs:{src:t.reacted.icon.url}}),n("span",{staticClass:"btn-text--react"},[t._v(t._s(t.reacted.name))])]):t._e()]),n("button",{staticClass:"ui-btn ui-btn__transparent",on:{click:t.sharePost}},[n("span",{staticClass:"icon-ic-share"}),t._v("Share ")])]):t._e()])]):t._e()],1),t.showShare?n("share-post-modal",{ref:"sharePostModal",attrs:{sharePost:t.post},on:{close:t.closeShareModal}}):t._e(),n("user-reaction-list-modal",{ref:"reactUserListModal",attrs:{show:t.showUseReactionListModal,post:t.post,reactionClicked:"reactions",commentId:""},on:{close:t.closeReactListModal}})],1)},Y=[],Z=n("d0bd"),Q=n.n(Z),X=n("cd9a"),tt=n("dfb0"),et=n("7c45"),nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal",{attrs:{id:"react-user-list-modal","no-close-on-backdrop":!1,modalContentClass:"user-reaction-list",title:t.modalTitle,size:"md",mount:t.show,modalDialogClass:"user-reaction-dialog",hideFooter:!0},on:{hide:t.onHide,onShow:t.onShow,onClose:t.onHide},scopedSlots:t._u([{key:"body",fn:function(){return[n("div",{staticClass:"user-reaction-list__body"},[n("b-tabs",{attrs:{"content-class":"mt-3","nav-class":"custom-tab","nav-wrapper-class":"custom-wrapper",align:"center",fill:""}},t._l(t.reactionLists,(function(e,s){return n("b-tab",{key:s,attrs:{"title-link-class":"custom-nav",active:e.id==t.reactionListId},on:{click:function(n){return t.selectedReactionTab(e.id)}},scopedSlots:t._u(["upvote"!==t.reactionListId?{key:"title",fn:function(){return[e.url?n("div",{staticClass:"reaction-image-icon"},[n("img",{attrs:{src:e.url}}),n("span",{staticClass:"reaction-count"},[t._v(" "+t._s(e.count)+" ")])]):n("div",{staticClass:"reaction-text"},[t._v(" "+t._s(e.text)+" "),n("span",[t._v(" "+t._s(e.count)+" ")])])]},proxy:!0}:null],null,!0)},[t._l(t.showUserReactedLists,(function(s){return n("div",{key:s.id,staticClass:"user-reaction-list__content"},[n("div",{staticClass:"user-reaction-profile-img"},[n("img",{staticClass:"user-image clickable",attrs:{src:s.profile.picture?s.profile.picture.formats&&s.profile.picture.formats.thumbnail?s.profile.picture.formats.thumbnail.url:s.profile.picture.url:t.defaultAvatarImage}}),n("span",{staticClass:"user-status"},["upvote"==t.reactionListId?n("img",{attrs:{src:e.url}}):n("img",{attrs:{src:s.url}})])]),n("div",{staticClass:"user-reaction-list__content__title",on:{click:function(e){return t.redirectToUserProfile(s.profile.handle)}}},[t._v(" "+t._s(s.profile.title)+" ("+t._s(s.profile.handle)+") ")])])})),n("infinite-loading",{ref:"InfiniteLoading",refInFor:!0,attrs:{identifier:t.infiniteId,spinner:""},on:{infinite:t.infiniteHandler}},[n("div",{attrs:{slot:"no-results"},slot:"no-results"}),n("div",{attrs:{slot:"no-more"},slot:"no-more"})])],2)})),1)],1)]},proxy:!0}])})},st=[],ot=(n("4de4"),n("952f")),it=n.n(ot),at=n("e166"),rt=n.n(at),ct={name:"UserReactionListModal",components:{BaseModal:T["default"],InfiniteLoading:rt.a},props:{post:{type:Object,required:!0},reactionClicked:{type:String,required:!1},commentId:{type:String,required:!1}},data:function(){return{page:1,show:!1,like:it.a,userReactedLists:[],userUpvotedLists:[],infiniteId:new Date,reactionListId:this.reactionClicked,defaultAvatarImage:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"}},watch:{reactionClicked:function(){this.reactionListId=this.reactionClicked}},computed:{modalTitle:function(){return this.commentId?"Comment Likes":"upvote"==this.reactionListId?"Likes":"Reactions"},allreactionLists:function(){return this.$store.getters["feeds/getReactionList"]},reactionLists:function(){if("upvote"==this.reactionListId){var t={url:it.a,id:"upvote",count:this.post.upvotesCount};return[t]}var e={text:"All",id:"reactions",count:this.totalReactions};return[e].concat(Object(a["a"])(this.postReacionList))},postReacionList:function(){return this.post.reactions.map((function(t){return{url:t.reaction.icon.url,id:t.reaction.id,count:t.count}}))},showAllReactionsList:function(){return this.userReactedLists},showUserReactedLists:function(){var t=this,e=[];return e="upvote"==this.reactionListId||"reactions"==this.reactionListId?this.userReactedLists:this.userReactedLists.filter((function(e){return e.reaction==t.reactionListId})),e.map((function(e){var n=t.reactionLists.find((function(t){return t.id===e.reaction}))||{};return Object(M["a"])(Object(M["a"])({},e),{},{url:n.url})}))},totalReactions:function(){for(var t=0,e=this.post.reactions,n=0;n<e.length;n++)t+=e[n].count;return t}},mounted:function(){},methods:{selectedReactionTab:function(t){this.reactionListId=t,"reactions"==this.reactionListId&&this.userReactedLists.length>=20&&(this.infiniteId=new Date),this.page=1},onShow:function(){this.show=!0},toggleModal:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.show=t,this.page=1,this.userReactedLists=[]},onHide:function(){this.show=!1,this.$emit("close")},infiniteHandler:function(t){var e=this;this.getUserReactedLists().then((function(n){n.length?(e.userReactedLists=[].concat(Object(a["a"])(e.userReactedLists),Object(a["a"])(n)),e.page+=1,t.loaded()):t.complete()}))},getUserReactedLists:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.commentId){e.next=4;break}return e.next=3,t.$store.dispatch("feeds/getLikeCommentMemberLists",{commentId:t.commentId,page:t.page,type:t.reactionListId});case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,t.$store.dispatch("feeds/getPostListRectionList",{postId:t.post.id,page:t.page,type:t.reactionListId});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))()},redirectToUserProfile:function(t){this.$router.push({path:"/profiles/"+t})}}},lt=ct,ut=(n("ca02"),Object(b["a"])(lt,nt,st,!1,null,"570b085d",null)),dt=ut.exports,pt={name:"ModalViewImg",components:{Slider:X["a"],SliderItem:X["b"],SharePostModal:tt["a"],BlurHashImg:et["a"],UserReactionListModal:dt},props:["post"],data:function(){return{showShare:!1,ic_badge1:Q.a,ic_close:N.a,videoElement:null,showUseReactionListModal:!1}},computed:{reactionLists:function(){var t=Object(a["a"])(this.$store.getters["feeds/getReactionList"]);return t.sort((function(t,e){return t.order-e.order}))},isOwnPost:function(){return this.post.my},slideIndex:function(){return this.$store.getters["feeds/getSlideNumberForModal"]},likeText:function(){return this.post.upvoted?"Liked":this.post.downvoted?"Disliked":"Like"},totalReactions:function(){for(var t=0,e=this.post.reactions,n=0;n<e.length;n++)t+=e[n].count;return t},reacted:function(){return this.post.reacted},reaction:function(){return this.post.reacted},formattedText:function(){return Object(K["a"])(this.$sanitize(this.post.summary))}},methods:{closeReactListModal:function(){this.showUseReactionListModal=!1},openLikeModal:function(){var t=this;this.showUseReactionListModal=!0,this.$refs.reactUserListModal.toggleModal(!0),this.$nextTick((function(){t.$bvModal.show("react-user-list-modal")}))},updatePaused:function(t){this.videoElement=t.target},pause:function(){this.videoElement&&this.videoElement.pause()},showUserProfile:function(){this.$refs.viewFeed.hide();var t=this.post.profile.handle;this.$router.push({path:"/profiles/"+t})},sharePost:function(){var t=this;this.showShare=!0,this.$nextTick((function(){t.$nextTick((function(){t.$refs.sharePostModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("share-post-modal-".concat(t.post.id))}))}))}))},upvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.downvoted){n.next=5;break}return n.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"upvote"});case 3:n.next=12;break;case 5:if(!t.upvoted){n.next=10;break}return n.next=8,e.$store.dispatch("feeds/deletePostVote",{post:t});case 8:n.next=12;break;case 10:return n.next=12,e.$store.dispatch("feeds/votePost",{post:t,type:"upvote"});case 12:case"end":return n.stop()}}),n)})))()},downvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.upvoted){n.next=5;break}return n.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"downvote"});case 3:n.next=12;break;case 5:if(!t.downvoted){n.next=10;break}return n.next=8,e.$store.dispatch("feeds/deletePostVote",{post:t});case 8:n.next=12;break;case 10:return n.next=12,e.$store.dispatch("feeds/votePost",{post:t,type:"downvote"});case 12:case"end":return n.stop()}}),n)})))()},react:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.post.reacted||e.post.reacted.id!==t){n.next=6;break}return s={postId:e.post.id},n.next=4,e.$store.dispatch("feeds/deletePostReaction",s);case 4:n.next=9;break;case 6:return o={postId:e.post.id,reactionId:t},n.next=9,e.$store.dispatch("feeds/reactToPost",o);case 9:case"end":return n.stop()}}),n)})))()},closeShareModal:function(){this.showShare=!1},postContentClick:function(t){var e=this;if(t.target.matches(".mention")){console.log(t);var n=t.target.attributes["data-id"].value;this.$store.dispatch("feeds/getSlugForProfileId",n).then((function(t){if(t){var n="/profiles/"+t;e.$router.push({path:n})}}))}}}},mt=pt,ft=(n("b3c6"),Object(b["a"])(mt,G,Y,!1,null,"0a20713f",null)),ht=ft.exports,gt={name:"FeedItemComments",components:{FeedItemCommentView:V,FeedItemCommentInput:_,ModalViewImg:ht},props:{post:Object,showComments:Boolean,allowComment:Boolean,initialCommentsLoading:{type:Boolean,default:!1}},data:function(){return{ic_like:W.a,reply_to:null,replyToReply:null,keyComponent:0,replyLoading:!1,commentPage:1,currentCommentClicked:{},showModal:!1,moreCommentsLoading:this.initialCommentsLoading}},watch:{initialCommentsLoading:function(t){this.moreCommentsLoading=t},post:function(t){console.log("ðŸš€ ~ file: ItemComments.vue ~ line 151 ~ post ~ value",t)}},computed:{isUserOnboarded:function(){return this.$store.getters["profile/getProfileOnboarded"]},isUserAuthenticated:function(){return this.$store.getters["auth/getAuthStatus"]}},methods:{openModal:function(t,e){var n=this;if(this.currentCommentClicked=e,1==e.media.length&&e.media[0].file.mime.includes("video"))return!1;this.$store.commit("feeds/changeSlideIndex",t),this.showModal=!0,this.$nextTick((function(){n.$bvModal.show("modal-view-img-".concat(e.id))}))},getMediaUrl:function(t){var e,n,s,o;return(null===(e=t.file)||void 0===e||null===(n=e.formats)||void 0===n||null===(s=n.small)||void 0===s?void 0:s.url)||(null===(o=t.file)||void 0===o?void 0:o.url)},openCommentLikeModal:function(t){this.$emit("openCommentModal",{type:"upvote",commentId:t})},viewMoreComments:function(t){return!!(t.comments&&t.topLevelCommentsNumber&&t.topLevelCommentsNumber>t.comments.length)},toggleReply:function(t){this.isUserOnboarded||this.allowComment?(this.replyToReply&&(this.replyToReply=null),this.reply_to===t.id?this.reply_to=null:this.reply_to=t.id):this.$bvModal.show("onboard-modal")},filteredComments:function(t){var e=Object(a["a"])(new Set(t.map((function(t){var e=t.id;return e})))),n=e.map((function(e){return t.find((function(t){return t.id===e}))}));return n},filteredReplies:function(t){if(t&&t.length>0){var e=Object(a["a"])(new Set(t.map((function(t){var e=t.id;return e})))),n=e.map((function(e){return t.find((function(t){return t.id===e}))}));return n}},toggleReplyToReply:function(t,e){this.reply_to&&(this.reply_to=null),this.replyToReply===e.id?this.replyToReply=null:this.replyToReply=e.id},moreReplyCount:function(t){var e=this.filteredReplies(t.replies);return!(!e||!e.length)&&t.repliesCount-e.length},upvote:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n.isUserOnboarded){s.next=3;break}return n.$bvModal.show("onboard-modal"),s.abrupt("return");case 3:if(s.prev=3,!t.downvoted&&!t.upvoted){s.next=9;break}return s.next=7,n.$store.dispatch("feeds/deleteCommentVote",{post:n.post,comment:t,parentComment:e}).then((function(){n.incrementKey()}));case 7:s.next=11;break;case 9:return s.next=11,n.$store.dispatch("feeds/voteComment",{post:n.post,comment:t,parentComment:e,type:"upvote"}).then((function(){n.incrementKey()}));case 11:s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](3),n.$bvToast.toast(s.t0.message,{autoHideDelay:2e3,noCloseButton:!0,variant:"danger",toaster:"b-toaster-top-center",solid:!0});case 16:case"end":return s.stop()}}),s,null,[[3,13]])})))()},incrementKey:function(){this.keyComponent+=1},onSubmitClicked:function(){this.incrementKey(),console.log(this.keyComponent),this.reply_to=null,this.replyToReply=null},focusOnCommentInput:function(){this.$refs.commentInput.focus()},convertMentionsOfContent:function(t){if(null!==t){var e=Object(K["a"])(this.$sanitize(t));t.replace(/(?:\r\n|\r|\n)/g,"<br/>");var n=new RegExp(/@(.*?)\}/g),s=new RegExp(/\[(.*?)\]/g),o=new RegExp(/\{(.*?)\}/g),i=e.match(n);if(i&&i.length){var a,r=Object(l["a"])(i);try{for(r.s();!(a=r.n()).done;){var c,u=a.value,d=void 0,p=void 0,m=Object(l["a"])(u.matchAll(s));try{for(m.s();!(c=m.n()).done;){var f=c.value;d=f[1]}}catch(b){m.e(b)}finally{m.f()}var h,g=Object(l["a"])(u.matchAll(o));try{for(g.s();!(h=g.n()).done;){var v=h.value;p=v[1]}}catch(b){g.e(b)}finally{g.f()}e=e.replace(u,'<button class="mention" data-id="'.concat(p,'" contenteditable="false">\n            ').concat(d,"</button>"))}}catch(b){r.e(b)}finally{r.f()}}return e}return""},showMoreComments:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.moreCommentsLoading=!0,t.commentPage+=1,e.next=4,t.$store.dispatch("feeds/getPostComments",{post:t.post,page:t.commentPage});case 4:t.moreCommentsLoading=!1,t.incrementKey();case 6:case"end":return e.stop()}}),e)})))()},showMoreReplies:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.replyLoading=!0,n.next=3,e.$store.dispatch("feeds/fetchRepliesByComment",{commentId:t.id,offset:t.replies.length,postId:e.post.id});case 3:e.replyLoading=!1,e.incrementKey();case 5:case"end":return n.stop()}}),n)})))()}}},vt=gt,bt=(n("55da"),n("9be6"),Object(b["a"])(vt,r,c,!1,null,"bdb319ba",null)),wt=bt.exports,_t=n("db0f"),kt=n.n(_t),Ct=n("0af5"),yt=n.n(Ct),xt=n("88ce"),Pt=n.n(xt),It=n("0b3f"),Mt=n.n(It),Tt=n("3444"),$t=n.n(Tt),Lt=n("7775"),Rt=n.n(Lt),Ot=n("8987"),St=n.n(Ot),jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[""!==t.bannerImage?n("div",{on:{click:function(e){return t.openModal(0)}}},[t.bannerImage.file&&t.bannerImage.file.mime&&t.bannerImage.file.mime.includes("image")?n("blur-hash-img",{staticClass:"mb-1",attrs:{src:t.bannerImage.file,blurhash:t.bannerImage.blurHash,imageClass:"banner-image",height:t.height}}):t._e(),t.bannerImage.file.mime&&t.bannerImage.file.mime.includes("video")&&1===this.post.media.length&&t.bannerImage.file?n("div",{staticClass:"video-wrapper mb-1",style:{height:t.height+"px","max-height":"578px"}},[n("div",{staticClass:"video-wrapper__overlay"},[n("img",{staticClass:"play-btn-feed ",attrs:{src:t.ic_play_arrow_white},on:{click:t.play}})]),t.bannerImage.file.thumb&&t.bannerImage.file.thumb.url&&!t.playVideo?n("blur-hash-img",{staticClass:"mb-1",attrs:{src:t.bannerImage.file.thumb,blurhash:t.bannerImage.file.thumb.blurHash,imageClass:"banner-image",height:t.height},on:{playingVideo:t.play}}):n("b-embed",{style:{height:t.height+"px","max-height":"578px"},attrs:{type:"video",allowfullscreen:"",controls:"",autoplay:t.playVideo,aspect:t.aspectRatio,controlsList:"nodownload"}},[n("source",{attrs:{src:t.bannerImage.file.url+"#t=0.1"}})])],1):t._e(),t.bannerImage.file.mime&&t.bannerImage.file.mime.includes("video")&&this.post.media.length>1&&t.bannerImage.file?n("div",{staticClass:"video-wrapper mb-1"},[n("b-embed",{attrs:{type:"video",allowfullscreen:"",controls:"",controlsList:"nodownload",poster:t.bannerImage.file.thumb.url},on:{canplay:t.updatePaused,playing:t.updatePaused,pause:t.updatePaused}},[n("source",{attrs:{src:t.bannerImage.file.url+"#t=0.1",type:t.bannerImage.file.mime}})]),n("span",{staticClass:"icon-video-play video-wrapper__overlay video-wrapper__banner"})],1):t._e()],1):t._e(),t.gridImages.length>0?n("div",{staticClass:"f-post__multiple-img"},t._l(t.gridImages,(function(e,s){return n("div",{key:t.post.id+"-"+(e.file._id?e.file._id:e.file.hash),staticClass:"img-cell flex-fill",class:{"f-post__multiple-img__background-black":e.file.mime.includes("video")},on:{click:function(e){return t.openModal(t.bannerImage?s+1:s)}}},[e.file.mime.includes("video")?n("div",{staticClass:"video-wrapper mb-1"},[n("b-embed",{attrs:{type:"video",aspect:"1by1",allowfullscreen:"",poster:e.file.thumb.url},on:{canplay:t.updatePaused,playing:t.updatePaused,pause:t.updatePaused}},[n("source",{attrs:{src:e.file.url+"#t=0.1",type:e.file.mime}})]),n("span",{staticClass:"icon-video-play video-wrapper__overlay"})],1):n("blur-hash-img",{attrs:{src:e.file,blurhash:e.file.blurHash,imageClass:"banner-image"}}),t.post.media.length>4&&3===s?[n("div",{staticClass:"img-cell__overlay"}),n("div",{staticClass:"img-cell__count"},[t._v("+"+t._s(t.post.media.length-4))])]:t._e()],2)})),0):t._e(),t.showModal?n("modal-view-img",{attrs:{post:t.post}}):t._e()],1)},Dt=[],Nt=(n("2ca0"),n("d3f1")),Et=n.n(Nt),At=n("065b"),Ut=n.n(At),Ft=n("e4c8"),Bt=n.n(Ft),Ht={name:"FeedPostGridImg",components:{ModalViewImg:ht,BlurHashImg:et["a"]},props:{post:{type:Object,required:!1}},data:function(){return{videoElement:null,paused:null,ic_play:Et.a,ic_pause:Ut.a,showModal:!1,playVideo:!1,ic_play_arrow_white:Bt.a}},computed:{videoHeightGreater:function(){var t;return null===(t=this.bannerImage.file)||void 0===t||!t.thumb||this.bannerImage.file.thumb.height>this.bannerImage.file.thumb.width},height:function(){var t,e,n,s;this.bannerImage.file.mime.includes("video")?(t=null===(n=this.bannerImage.file.thumb)||void 0===n?void 0:n.height,e=null===(s=this.bannerImage.file.thumb)||void 0===s?void 0:s.width):(t=this.bannerImage.file.height,e=this.bannerImage.file.width);return t/e*578},aspectRatio:function(){if(this.videoHeightGreater)return"1by1";var t=this.bannerImage.file.thumb.height/this.bannerImage.file.thumb.width*100;switch(t){case 75:return"4by3";default:return"16by9"}},images:function(){return this.post.media.filter((function(t){return t.file})).map((function(t){var e,n,s=(null===(e=t.file)||void 0===e||null===(n=e.formats)||void 0===n?void 0:n.small)||t.file;return s&&(s.url=s.url.startsWith("https")?s.url:"https://".concat(s.url)),{file:s,blurHash:t.file.blurHash}}))},bannerImage:function(){return[1,3].includes(this.images.length)?this.images[0]:""},gridImages:function(){return this.images.slice().splice(this.bannerImage?1:0,this.bannerImage?2:4)},showGridImages:function(){return this.gridImages},playing:function(){return!this.paused}},methods:{isValid:function(){},openModal:function(t){var e=this;if(1==this.post.media.length&&this.post.media[0].file.mime.includes("video"))return!1;this.$store.commit("feeds/changeSlideIndex",t),this.showModal=!0,this.$nextTick((function(){e.$bvModal.show("modal-view-img-".concat(e.post.id))}))},updatePaused:function(t){t.target.pause()},play:function(){this.playVideo=!0}}},zt=Ht,qt=(n("8295"),Object(b["a"])(zt,jt,Dt,!1,null,"59a732c2",null)),Vt=qt.exports,Jt=n("c6aa"),Wt=n("e832"),Kt=n("7c89"),Gt=n.n(Kt),Yt=n("6302"),Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("base-modal",{attrs:{id:"share-on-feed-modal",scrollable:"",mount:t.show,size:"md",newPost:""},on:{onClose:t.closeModal,onShow:t.onShow},scopedSlots:t._u([{key:"header",fn:function(e){var s=e.close;return[n("div",{class:""===t.body?"header-wr":"category-header-wr"},[""===t.body?n("div",{staticClass:"new-post__header--left"},[n("div",{staticClass:"new-post-header-content"},[n("div",{staticClass:"user-image"},[t.profilePicture?n("img",{staticClass:"user-image",attrs:{src:t.profilePicture.url,alt:"user"}}):n("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}})],1),n("div",{staticClass:"network-tags__label"},[n("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("network")}}},[n("span",{staticClass:"REPLACE-WITH-FONT-ICON networkBtnTxt"},[t._v(" "+t._s(t.networkTitle)+" ")]),n("span",{staticClass:"REPLACE-WITH-FONT-ICON mobileNetworkBtnTxt"},[t._v(" "+t._s(t.mobileNetworkTitle)+" ")]),n("span",{staticClass:"icon-select-arrow-bottom network-name__icon"})])])])]):n("div",{staticClass:"category-header"},[n("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[n("span",{staticClass:"icon-ic-arrow-back"})]),n("span",{staticClass:"modalTitle"},[t._v(t._s(t.modalTitle))])]),n("div",{staticClass:"modal-top-header"},[n("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return t.closeModal(s)}}},[n("span",{staticClass:"icon-ic-modal-close"})]),""===t.body?n("span",{staticClass:"mobile-view",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[""===t.body?n("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(e){return e.preventDefault(),t.onSharePost(e)}}},[t.posting?n("b-spinner",{attrs:{small:"",label:"loader"}}):n("span",[t._v("Share ")])],1):n("button",{staticClass:"ui-btn btn-primary ui-btn__schedule-post",style:{color:"#ffffff"}},[n("b-spinner",{attrs:{small:"",label:"loader"}})],1)]):t._e()])])]}},{key:"body",fn:function(){return[n("div",{staticClass:"feed-item-new-post"},[n("div",{class:""===t.body?"":"ui-hide"},[n("div",{staticClass:"feed-item-new-post__main",class:t.post.media.length>0?"with-media":null},[n("b-form-textarea",{staticClass:"share-description",attrs:{placeholder:"Add a comment...",rows:"1","max-rows":"7"},model:{value:t.shareDescription,callback:function(e){t.shareDescription=e},expression:"shareDescription"}}),n("div",{staticClass:"feed-item-container"},[n("feed-item",{staticClass:"feed-item",attrs:{allowActions:!1,"network-feed":!1,post:t.post}})],1)],1)]),"network"===t.body?n("div",{staticClass:"network-select-wr"},[n("base-input-search",{attrs:{placeholder:"Search Networks..","clear-on-focus-out":!1},on:{input:t.onNetworkSearchInputChange}}),t._l(t.networkList,(function(e){return n("base-list-item-bold",{key:e.id,staticClass:"network-select",attrs:{href:"#",icon:e.banner?e.banner.url:t.genericNetwork,name:e.name},nativeOn:{click:function(n){return t.selectNetwork(e)}}})}))],2):t._e()])]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"footer-wr"},[t.post.networkDisplay&&""===t.body?n("div",{staticClass:"feed-item-new-post__info"},[n("span",{staticClass:"icon-info feed-item-new-post__info__icon"}),n("span",{staticClass:"feed-item-new-post__info__text"},[t._v(t._s(t.post.networkDisplay))])]):t._e(),""===t.body?n("div",{staticClass:"feed-item-new-post__action modal-footer-narrow"},[n("span",{staticClass:"not-mobile",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[""===t.body?n("button",{staticClass:"ui-btn ui-btn__schedule-post",style:{color:"#ffffff"},on:{click:function(e){return e.preventDefault(),t.onSharePost(e)}}},[t.posting?n("b-spinner",{attrs:{small:"",label:"loader"}}):n("span",[t._v(" Share ")])],1):n("button",{staticClass:"ui-btn btn-primary ui-btn__schedule-post",style:{color:"#ffffff"}},[n("b-spinner",{attrs:{small:"",label:"loader"}})],1)])]):n("button",{staticClass:"noButton"})])]},proxy:!0}],null,!1,1519185098)}):t._e()],1)},Qt=[],Xt=n("efca"),te=n.n(Xt),ee=n("2ef0"),ne=n("1222"),se=function(){return Promise.resolve().then(n.bind(null,"a508"))},oe=function(){return Promise.resolve().then(n.bind(null,"123f"))},ie={name:"ShareOnFeedModal",components:{BaseInputSearch:oe,FeedItem:se,BaseListItemBold:ne["default"],BaseModal:T["default"]},emits:["onClose"],props:{sharePost:{type:Object,required:!1},networkFeed:{type:Boolean,required:!1}},data:function(){return{mobile:!1,posting:!1,body:"",generalError:!1,show:!1,networkSearchText:"",genericNetwork:te.a,post:null,img:{url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"},shareDescription:"",networkDisplay:""}},mounted:function(){this.post=Object(M["a"])(Object(M["a"])({},Object(ee["omit"])(this.sharePost,"activity")),{},{networkId:"5f2b93ddb3ab1f5de0638e9f",networkName:"General"})},computed:{networkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},mobileNetworkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},placeholderText:function(){return"Add a note..."},postButtonStyle:function(){var t={"background-color":"transparent"};return t},modalTitle:function(){return"Select a hub and share"},profile:function(){var t=this.$store.getters["profile/getProfile"];return t},profilePicture:function(){var t=this.$store.getters["profile/getProfilePicture"];return this.profile.fetched?t||this.img:null},networkList:function(){var t=this;return this.networkSearchText?this.$store.getters["networks/getMyNetworks"].filter((function(e){return e.name.toLowerCase().includes(t.networkSearchText.toLowerCase())})):this.$store.getters["networks/getMyNetworks"]}},methods:{goBack:function(){this.networkSearchText="",this.body=""},onSharePost:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.posting=!0,n=t.post.id,s=t.post.networkId,e.prev=3,e.next=6,t.$store.dispatch("feeds/sharePostOnFeed",{postId:n,networkId:s,shareDescription:t.shareDescription});case 6:t.resetPost(),t.$emit("onClose"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:return e.prev=13,t.posting=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},closeWarningModal:function(t){t()},closeWarningandClearModal:function(t){this.resetPost(),t()},closeModal:function(t){this.resetPost(),this.$emit("onClose"),t()},handleBody:function(t){console.log("bodyView",t),this.body=t},toggleModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=t},resetPost:function(){this.post={},this.networkSearchText=""},onShow:function(){},selectNetwork:function(t){this.body="",this.networkSearchText="",this.post.networkId=t.id,this.post.networkName=t.name,this.post.networkDisplay=t.networkDisplay},onNetworkSearchInputChange:function(t){this.networkSearchText=t},openGoToNetworkModal:function(){var t=this;console.log("OPEN GO TO NETWORK MODAL"),console.log(this.post.content),this.post.content&&null!=this.post.content?this.$nextTick((function(){t.$bvModal.show("new-network-warning-modal")})):this.goToNetworkPage()},goToNetworkPage:function(){this.posting=!1,this.resetPost(),this.$root.$emit("bv::hide::modal","new-post-modal"),this.$router.push({path:"/hubs/discover"})}}},ae=ie,re=(n("0475"),n("89c5"),Object(b["a"])(ae,Zt,Qt,!1,null,"6e8cb213",null)),ce=re.exports,le=n("9029"),ue={name:"FeedItem",metaInfo:function(){return{meta:[{property:"og:type",content:"website"},{property:"og:description",content:this.post.summary},{property:"og:title",content:this.post.title},{property:"og:url",content:"".concat("https://bizfluenceapp.com","/posts/").concat(this.post.slug)},{property:"og:image",content:"https://bizfluence-media.nyc3.cdn.digitaloceanspaces.com/526ba2ce49bac0ab6a7fe72e8f6fc652.png"}]}},components:{BaseWarningModal:Wt["a"],BaseListItemDefault:x["a"],BaseIconDropdown:y["a"],FeedPostGridImg:Vt,FeedItemComments:wt,EditPostModal:Jt["a"],SharePostModal:tt["a"],UserReactionListModal:dt,LinkPreview:Yt["default"],ShareOnFeedModal:ce},props:{classDropdown:{type:String},post:{type:Object,required:!1},networkFeed:{type:Boolean,required:!1},isSinglePost:{type:Boolean,required:!1,default:!1},allowActions:{type:Boolean,required:!1,default:!0}},data:function(){return{parsePost:K["a"],seeFullActivityText:!1,maxActivityText:le["isMobileOnly"]?80:180,showSharePostOnFeed:!1,initialCommentsLoading:!1,componentKey:0,showComments:!(!this.isSinglePost||!this.post.comments),showEdit:!1,showShare:!1,showUseReactionListModal:!1,readMore:!1,titleMouseOver:!1,reactionMouseOver:!1,ic_badge1:Q.a,ic_arrow:kt.a,ic_f_comment:yt.a,ic_f_follow:Pt.a,ic_f_share:Mt.a,ic_f_edit:Rt.a,ic_f_save:$t.a,ic_pin:St.a,ic_count:Gt.a,reactionClicked:"",commentId:"",pointValue:"+4",linkPreview:null,likeImage:{class:"icon-ic-like",src:null},like:it.a}},mounted:function(){this.linkPreview=this.post.linkPreview},computed:{activityContent:function(){switch(this.post.activity.type){case"share":return this.post.activity.shareDescription;case"comment":return this.post.activity.comment.content;default:return""}},lastActivityText:function(){var t="";switch(this.post.activity.type){case"reaction":t=" reacted on this post";break;case"comment":t=" commented on this post";break;case"share":t=" shared this post ".concat(this.networkFeed?"":"to ");break}return t},isAdmin:function(){var t=this.$store.getters["network/getAdmins"].map((function(t){return t.userId}));return this.networkFeed&&t.includes(this.$store.getters["profile/getUserId"])},typeIcon:function(){var t="icon-"+this.post.postType;return t},postTypeText:function(){var t,e=(null===(t=this.post.postType)||void 0===t?void 0:t.charAt(0).toUpperCase())+this.post.postType.slice(1)||"";return e.match(/[A-Z][a-z]+/g).join(" ")},postTypeIcon:function(){var t="icon-"+this.post.postType;return console.log(t),t},langDir:function(){return"Hebrew"===this.post.lang||"Arabic"===this.post.lang||"Kurdish"===this.post.lang||"Persian"===this.post.lang||"Urdu"===this.post.lang},completeLinkPreview:function(){var t=!0;return t=!!this.post.linkPreview&&(!!this.post.linkPreview.display&&(!!this.post.linkPreview.domain&&(!!this.post.linkPreview.title&&(!!this.post.linkPreview.description&&!!this.post.linkPreview.image)))),t},abreviatePoints:function(){var t=this.post.profile.points,e="";return e=t>1e6?Math.round(t/1e5)/10+" m":t>5e3?Math.round(t/100)/10+" k":t,e},profilePicture:function(){var t;return this.post&&this.post.profile&&this.post.profile.picture?null!==(t=this.post.profile.picture.formats)&&void 0!==t&&t.thumbnail?this.post.profile.picture.formats.thumbnail.url:this.post.profile.picture.url:null},imageMode:function(){return this.post&&this.post.media.length?1===this.post.media.length?"single":"multiple":"none"},titleText:function(){return this.titleMouseOver||this.post.profile.subtitle.length<76?this.post.profile.subtitle:this.post.profile.subtitle.substr(0,75)+"..."},isOwnPost:function(){return this.post.my},reacted:function(){return this.post.reacted},reaction:function(){return this.post.reacted},formattedSummaryText:function(){return"questionPost"==this.post.postType?this.setFormattedText(this.post.summary)+"...  ":Object(K["a"])(this.$sanitize(this.post.summary))+"...  "},formattedSummaryTextWithoutEllipses:function(){return Object(K["a"])(this.post.summary)},formattedContentText:function(){return"questionPost"==this.post.postType?this.setFormattedText(this.post.content):Object(K["a"])(this.$sanitize(this.post.content))},totalReactions:function(){for(var t=0,e=this.post.reactions,n=0;n<e.length;n++)t+=e[n].count;return t},showReadMore:function(){return this.post.summary<this.post.content&&!this.isSinglePost&&this.allowActions},isUserOnboarded:function(){return this.$store.getters["profile/getProfileOnboarded"]},isUserAuthenticated:function(){return this.$store.getters["auth/getAuthStatus"]},currentUserRole:function(){return this.$store.getters["profile/getProfileRole"]},isPinnedPost:function(){return this.post.isPinned},reactionLists:function(){var t=Object(a["a"])(this.$store.getters["feeds/getReactionList"]);return t.sort((function(t,e){return t.order-e.order}))}},methods:{toggleFullActivityText:function(){this.seeFullActivityText=!this.seeFullActivityText},editPost:function(){var t=this;this.showEdit=!0,this.$nextTick((function(){t.$refs.editPostModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("edit-post-modal")}))}))},sharePost:function(){var t=this;this.showShare=!0,this.$nextTick((function(){t.$refs.sharePostModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("share-post-modal-".concat(t.post.id))}))}))},openShareOnFeedModal:function(){var t=this;this.showSharePostOnFeed=!0,this.$nextTick((function(){t.$refs.shareOnFeedModal.toggleModal(!0),t.$nextTick((function(){t.$bvModal.show("share-on-feed-modal")}))}))},closeShareOnFeedModal:function(){this.showSharePostOnFeed=!1},setFormattedText:function(t){var e=Object(K["a"])(t);return e=e.replace(/(<br\s*[\\/]?>){2}$/g,""),e='<div class="feed-post__question">'+e.replace(/(\?<br\s*[\\/]?>)/g,"?<br><span>"),e=e.replace(/(<br\s*[\\/]?>){2}/gi,'</span></div><br><div class="feed-post__question">'),e},setCommentId:function(t){this.openLikeModal(t.type,t.commentId)},openLikeModal:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.commentId=n,this.reactionClicked=t,this.showUseReactionListModal=!0,this.$nextTick((function(){e.$refs.reactUserListModal.toggleModal(!0),e.$nextTick((function(){e.$bvModal.show("react-user-list-modal")}))}))},onClick:function(){console.log("Clicked")},singleImageProvider:function(t){var e={backgroundImage:"url("+t.media[0].file.url+")"};return e},blockUser:function(t){this.$store.dispatch("settings/blockUser",t.profile.id);var e="".concat(t.profile.title," has been blocked, you can unblock on the settings page");this.$emit("showToast",e)},upvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.downvoted){n.next=8;break}return n.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"upvote"});case 3:s=n.sent,console.log("ChangeVote"),console.log(s),n.next=21;break;case 8:if(!t.upvoted){n.next=16;break}return n.next=11,e.$store.dispatch("feeds/deletePostVote",{post:t});case 11:s=n.sent,console.log("deleteVote"),console.log(s),n.next=21;break;case 16:return n.next=18,e.$store.dispatch("feeds/votePost",{post:t,type:"upvote"});case 18:s=n.sent,console.log("Vote"),console.log(s);case 21:s.success||e.$bvToast.toast(s.message,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"}),e.reactionMouseOver=!1;case 23:case"end":return n.stop()}}),n)})))()},downvote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.upvoted){n.next=6;break}return n.next=3,e.$store.dispatch("feeds/changePostVote",{post:t,type:"downvote"});case 3:s=n.sent,n.next=15;break;case 6:if(!t.downvoted){n.next=12;break}return n.next=9,e.$store.dispatch("feeds/deletePostVote",{post:t});case 9:s=n.sent,n.next=15;break;case 12:return n.next=14,e.$store.dispatch("feeds/votePost",{post:t,type:"downvote"});case 14:s=n.sent;case 15:console.log(s),e.reactionMouseOver=!1;case 17:case"end":return n.stop()}}),n)})))()},react:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e.post.reacted),s=t,!e.post.reacted||e.post.reacted.id!==s){n.next=8;break}return o={postId:e.post.id},n.next=6,e.$store.dispatch("feeds/deletePostReaction",o);case 6:n.next=11;break;case 8:return i={postId:e.post.id,reactionId:s},n.next=11,e.$store.dispatch("feeds/reactToPost",i);case 11:e.reactionMouseOver=!1;case 12:case"end":return n.stop()}}),n)})))()},bookmark:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.bookmarked){n.next=6;break}return n.next=3,e.$store.dispatch("feeds/deletePostBookmark",{post:t});case 3:s=n.sent,n.next=9;break;case 6:return n.next=8,e.$store.dispatch("feeds/bookmarkPost",{post:t});case 8:s=n.sent;case 9:s.success||e.$bvToast.toast(s.message,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"});case 10:case"end":return n.stop()}}),n)})))()},follow:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.followed){n.next=6;break}return n.next=3,e.$store.dispatch("feeds/unfollowPost",{post:t});case 3:s=n.sent,n.next=9;break;case 6:return n.next=8,e.$store.dispatch("feeds/followPost",{post:t});case 8:s=n.sent;case 9:s.success||e.$bvToast.toast(s.message,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"});case 10:case"end":return n.stop()}}),n)})))()},addMyField:function(t){var e=this;t.forEach((function(t){t.my=t.profile.id===e.$store.getters["profile/getProfileId"]}))},getPostComments:function(){var t=this;this.showComments=!this.showComments,this.post.firstComments&&this.post.firstComments.length&&!this.post.fetchedComments?(this.addMyField(this.post.firstComments),this.$store.commit("feeds/appendPostComments",{postId:this.post.id,comments:this.post.firstComments}),this.post.firstComments.forEach((function(e){t.addMyField(e.firstReplies),t.$store.commit("feeds/addMoreRepliesToComment",{replies:e.firstReplies,commentId:e.id,postId:t.post.id})})),this.initialCommentsLoading=!0,this.$store.dispatch("feeds/getPostComments",{post:this.post}).then((function(){t.componentKey+=1})).finally((function(){t.initialCommentsLoading=!1}))):this.post.fetchedComments||this.post.comments.length!==this.post.commentsNumber&&(this.initialCommentsLoading=!0,this.$store.dispatch("feeds/getPostComments",{post:this.post}).then((function(){t.componentKey+=1})).finally((function(){t.initialCommentsLoading=!1})))},commentClicked:function(t){var e=this;this.isUserOnboarded||this.showComments||this.allowCommentOnOwnPost||this.$bvModal.show("onboard-modal"),this.showComments=!this.showComments,this.showComments&&t.commentsNumber>0&&(t.fetchedComments?this.isUserOnboarded&&this.$nextTick((function(){e.$refs.comments.focusOnCommentInput()})):this.$store.dispatch("feeds/getPostComments",{post:t}).then((function(){e.componentKey+=1,e.isUserOnboarded&&e.$nextTick((function(){e.$refs.comments.focusOnCommentInput()}))})))},closeEditModal:function(){this.showEdit=!1},closeShareModal:function(){this.showShare=!1},closeReactListModal:function(){this.showShare=!1},showDeletePostWarningModal:function(){var t=this;this.post.id!==this.$store.getters["profile/getProfilePost"]&&this.post.id!==this.$store.getters["profile/getQuestionsPost"]?this.$nextTick((function(){t.$bvModal.show("delete-post-warning-modal-".concat(t.post.activity?t.post.activity.id:t.post.id))})):this.$bvToast.toast("Welcome post cannot be deleted. Update you profile to update welcome post content.",{autoHideDelay:4e3,noCloseButton:!0,toaster:"b-toaster-top-center",variant:"danger"})},deletePost:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.post.id,console.log("Deleted Post: ",n),e.next=4,t.$store.dispatch("feeds/deletePost",{id:n,role:t.currentUserRole});case 4:s=e.sent,t.$bvToast.toast(s,{autoHideDelay:2e3,noCloseButton:!0,toaster:"b-toaster-top-center"});case 6:case"end":return e.stop()}}),e)})))()},postLinkClick:function(t){this.$emit("showConfirmationLinkBox",t)},postContentClick:function(t){var e=this;if(t.target.matches(".mention")){console.log(t);var n=t.target.attributes["data-id"].value;this.$store.dispatch("feeds/getSlugForProfileId",n).then((function(t){if(t){var n="/profiles/"+t;e.$router.push({path:n})}}))}},showUserProfile:function(t){var e="string"===typeof t?t:this.post.profile.handle;this.$router.push({path:"/profiles/"+e})},goToNetwork:function(t){this.$router.push({path:"/hubs/"+t})},activateReadMore:function(t){t.preventDefault(),this.readMore=!this.readMore},toggleTitleHover:function(){this.titleMouseOver=!this.titleMouseOver},reportPost:function(){this.$eventBus.$emit("OPEN_REPORT_MODAL",{type:"post",entityId:this.post.id,action:"feeds/report",successMessage:"This post hase been successfully reported and you will no longer see it in your feed",errorMessage:"There was an error reporting this post please try again later"})},togglePinPost:function(){this.$store.dispatch("admin/changePinnedStatus",{postId:this.post.id,role:this.currentUserRole,isPinned:!this.post.isPinned})}}},de=ue,pe=(n("db1f"),Object(b["a"])(de,s,o,!1,null,"c17a6736",null));e["default"]=pe.exports},a50b:function(t,e,n){},a8ba:function(t,e,n){"use strict";n("89b4")},b125:function(t,e,n){"use strict";n("1612")},b1b3:function(t,e,n){},b250:function(t,e,n){},b3c6:function(t,e,n){"use strict";n("50d3a")},b8f6:function(t,e,n){"use strict";n("eedb")},bb2f:function(t,e,n){var s=n("d039");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c6aa:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("base-modal",{attrs:{id:"edit-post-modal",scrollable:"",mount:t.show,size:"lg",newPost:""},on:{onClose:t.closeModal,onShow:t.onShow},scopedSlots:t._u([{key:"header",fn:function(e){var s=e.close;return[n("div",{class:""===t.body?"header-wr":"category-header-wr"},[""===t.body?n("div",{staticClass:"new-post__header--left"},[n("div",{staticClass:"new-post-header-content"},[n("div",{staticClass:"user-image"},[t.profilePicture?n("img",{staticClass:"user-image",attrs:{src:t.profilePicture.url,alt:"user"}}):n("b-skeleton",{staticClass:"user-image",attrs:{type:"avatar",alt:"user"}})],1),t.post.isAnnouncement?n("div",{staticClass:"network-tags__label"},[n("b",[t._v(" "+t._s(t.profile.title)+" ")])]):n("div",{staticClass:"network-tags__label"},[n("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("network")}}},[t._v(" "+t._s(t.post.networkName||"Select Network and Post")+" "),n("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})]),n("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("type")}}},[t._v(" "+t._s(t.type||"Post Type")+" "),n("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})]),n("label",{staticClass:"network-name",on:{click:function(e){return t.handleBody("lang")}}},[t._v(" "+t._s(t.selectedLang)+" "),n("span",{staticClass:"REPLACE-WITH-FONT-ICON icon-select-arrow-bottom network-name__icon"})])])])]):n("div",{staticClass:"category-header"},[n("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[n("span",{staticClass:"icon-ic-arrow-back"})]),n("span",{staticClass:"modalTitle"},[t._v(t._s(t.modalTitle))])]),n("base-modal",{attrs:{id:"new-network-warning-modal",mount:!0,size:"sm","no-close-on-backdrop":!1},scopedSlots:t._u([{key:"header",fn:function(){return[n("p",{staticClass:"network-warning-modal-header"},[t._v("Warning")])]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"network-warning-modal-body"},[t._v(" Do you want to save your post as a draft before leaving the page? ")])]},proxy:!0},{key:"footer",fn:function(e){var s=e.cancel;return[n("button",{staticClass:"ui-btn ui-btn__primary",on:{click:function(e){return t.saveDraftPost(s)}}},[t._v(" Yes ")]),n("button",{staticClass:"btn btn-danger",attrs:{variant:"danger"},on:{click:t.goToNetworkPage}},[t._v(" No ")]),n("button",{staticClass:"ui-btn ui-btn__outline",on:{click:function(e){return t.closeWarningModal(s)}}},[t._v(" Cancel ")])]}}],null,!0)}),n("base-modal",{attrs:{id:"warning-modal",mount:!0,size:"sm","no-close-on-backdrop":!0},on:{ok:function(e){return t.closeWarningandClearModal(s)}},scopedSlots:t._u([{key:"header",fn:function(){return[n("p",{staticClass:"network-warning-modal-header"},[t._v("Warning")])]},proxy:!0},{key:"body",fn:function(){return[n("div",{staticClass:"network-warning-modal-body"},[t._v(" Closing this modal will delete the content you have already written for this post, are you sure you would like to proceed? ")])]},proxy:!0}],null,!0)}),n("div",{staticClass:"modal-top-header"},[n("button",{staticClass:"ui-btn ui-btn__close",on:{click:function(e){return t.closeModal(s)}}},[n("span",{staticClass:"icon-ic-modal-close"})]),""===t.body?n("span",{staticClass:"mobile-view",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[t.post.content?t._e():n("span",{staticClass:"error-text"},[t._v(t._s(t.errorMessage))]),n("button",{staticClass:"ui-btn btn-primary ui-btn__post white-txt",on:{click:function(e){return e.preventDefault(),t.updatePost(t.save)}}},[t.loading?n("b-spinner",{attrs:{small:"",label:"loader"}}):[t._v(" Save ")]],2)]):t._e(),"draft"!=t.editPost.status||t.post.content?t._e():n("b-tooltip",{attrs:{target:"save-button-disabled-container",triggers:"hover",disabled:!(!t.post.content||!t.post.networkId)}},[t._v(" "+t._s(t.post.content?"You must select a network in order to post":"You need to have some content to create a post")+" ")])],1)],1)]}},{key:"body",fn:function(){return[n("div",{staticClass:"feed-item-new-post"},[n("div",{class:""===t.body?"":"ui-hide"},[n("div",{staticClass:"feed-item-new-post__main",class:t.post.media.length>0?"with-media":null},[n("mentionable-text-area",{ref:"postField",attrs:{content:t.post.content,reverseDirection:t.textDirection},on:{input:function(e){return t.post.content=e},"mentions-replaced":t.onMentionsReplaced,previewLinkChanged:function(e){return t.previewLink=e},filePasted:t.uploadPastedFile}}),n("div",[t._t("default",[!t.post.media.length>0&&t.link&&t.link.display?n("LinkPreview",{attrs:{details:t.link,location:"post"},on:{removePreview:t.removeLinkPreview}}):t._e()])],2),t.loadingLink?n("div",{attrs:{id:"loader-container"}},[t._t("loading",[n("div",{staticClass:"spinner"})])],2):t._e()],1),n("div",{staticClass:"feed-item-new-post__selected-interests"},t._l(t.selectedInterests,(function(t){return n("base-interest-tag",{key:t.id,attrs:{name:t.title,type:"selected"}})})),1),t.files.length>0?n("div",{staticClass:"feed-item-new-post__media"},[n("draggable",{key:t.files.length,staticClass:"upload-img__wr",attrs:{list:t.files},on:{change:t.onImageListUpdate,start:function(e){t.drag=!0},end:function(e){t.drag=!1}}},t._l(t.files,(function(e,s){return n("div",{key:e.id,staticClass:"upload-img__box"},[e.loading?n("div",{staticClass:"upload-img__img-loading"},[n("b-skeleton",{staticClass:"upload-img__img-skeleton"}),n("b-progress",{staticClass:"upload-img__img-progress",attrs:{"show-progress":"",solid:"",max:"100"}},[n("b-progress-bar",{staticClass:"upload-img__img-progress-bar",attrs:{value:e.progress}},[n("span",[n("strong",[t._v(" "+t._s(e.progress)+"% ")])])])],1)],1):["video"===t.fileType(e.file)?n("div",{staticClass:"video-container"},[n("b-embed",{key:e.file.id,staticClass:"upload-img__img p-0",attrs:{type:"video",controls:"",aspect:"0"}},[n("source",{key:e.file.id,attrs:{src:e.file.url}})]),n("button",{staticClass:"ui-btn ui-btn__rounded gallery-btn-delete",on:{click:function(e){return e.preventDefault(),t.removeImage(s)}}},[n("span",{staticClass:"icon-close"})])],1):"image"===t.fileType(e.file)?n("div",{staticClass:"upload-img__img",style:{"background-image":"url("+e.file.url+")"}},[n("button",{staticClass:"ui-btn ui-btn__rounded gallery-btn-delete",on:{click:function(e){return e.preventDefault(),t.removeImage(s)}}},[n("span",{staticClass:"icon-close"})])]):t._e()]],2)})),0)],1):t._e()]),"lang"===t.body?n("div",{staticClass:"network-select-wr"},[n("base-input-search",{attrs:{placeholder:"Search language","clear-on-focus-out":!1},on:{input:t.onLangSearchInputChange}}),t._l(t.languageList,(function(e){return n("base-list-item-bold",{key:e.id,staticClass:"language-select",attrs:{href:"#",name:e.name},nativeOn:{click:function(n){return t.selectLang(e)}}})}))],2):t._e(),"type"===t.body?n("div",{staticClass:"network-select-wr"},[n("base-input-search",{attrs:{placeholder:"Search post type","clear-on-focus-out":!1},on:{input:t.onTypeSearchInputChange}}),t._l(t.typeList,(function(e){return n("base-list-item-bold",{key:e.id,staticClass:"language-select",attrs:{href:"#",internalIcon:e.type?e.icon:t.icon-t.question,name:e.title},nativeOn:{click:function(n){return t.selectType(e)}}},[n("a",{staticClass:"dropdown-item post-type-select",attrs:{href:"#"}},[n("div",{staticClass:"list-item-bold ui-flex w-100 ui-align-center"},[n("span",{staticClass:"icon-info post-type-select__icon"}),n("span",{staticClass:"ui-flex-grow post-type-select__text"},[t._v(t._s(e.name))]),n("span",{staticClass:"post-type-select__radio"})])])])}))],2):t._e(),"network"===t.body?n("div",{staticClass:"network-select-wr"},[n("base-input-search",{attrs:{placeholder:"Search Networks..","clear-on-focus-out":!1},on:{input:t.onNetworkSearchInputChange}}),t._l(t.networkList,(function(e){return n("base-list-item-bold",{key:e.id,staticClass:"network-select",attrs:{href:"#",icon:e.banner?e.banner.url:t.genericNetwork,name:e.name},nativeOn:{click:function(n){return t.selectNetwork(e)}}})}))],2):t._e()])]},proxy:!0},{key:"footer",fn:function(e){var s=e.save;return[t.networkDisplay&&""===t.body?n("div",{staticClass:"feed-item-new-post__info"},[n("span",{staticClass:"icon-info feed-item-new-post__info__icon"}),n("span",{staticClass:"feed-item-new-post__info__text"},[t._v(t._s(t.networkDisplay))])]):t._e(),""===t.body?n("div",{staticClass:"feed-item-new-post__action modal-footer"},[n("file-upload",{ref:"upload",staticClass:"upload-img__new upload__new--img",attrs:{for:"img-upload","input-id":"img-upload",extensions:t.uploadImageParams.extensions,accept:t.uploadImageParams.accept,multiple:t.uploadImageParams.multiple,directory:t.uploadImageParams.directory,thread:t.uploadImageParams.thread,drop:t.uploadImageParams.drop,"drop-directory":t.uploadImageParams.dropDirectory,"add-index":t.uploadImageParams.addIndex},on:{"input-file":t.inputFile,"input-filter":t.inputFilter}},[n("base-icon-button",{staticClass:"action-btn",attrs:{isImg:!0,icon:t.postImg}})],1),n("file-upload",{ref:"upload",staticClass:"upload__new upload__new--vid",attrs:{for:"video-upload","input-id":"video-upload",accept:t.uploadVideoParams.accept,multiple:t.uploadVideoParams.multiple,directory:t.uploadVideoParams.directory,thread:t.uploadVideoParams.thread,drop:t.uploadVideoParams.drop,"drop-directory":t.uploadVideoParams.dropDirectory,"add-index":t.uploadVideoParams.addIndex},on:{"input-file":t.inputFile,"input-filter":t.inputFilter}},[n("base-icon-button",{staticClass:"action-btn",attrs:{isImg:!0,icon:t.postVideo}})],1),n("span",{staticClass:"action-separator"}),n("div",{staticClass:"post-tags"},[n("button",{staticClass:"ui-btn__transparent ui-btn__transparent--add",on:{click:t.openInterestsModal}},[n("span",{staticClass:"icon-plus"}),n("span",{staticClass:"interests__text"},[t._v("Interests")])]),n("modal-add-interests"),n("p")],1),n("span",{staticClass:"not-mobile",attrs:{id:"save-button-disabled-container",tabindex:"0"}},[t.post.content?t._e():n("span",{staticClass:"error-text"},[t._v(t._s(t.errorMessage))]),n("button",{staticClass:"ui-btn btn-primary ui-btn__post",on:{click:function(e){return e.preventDefault(),t.updatePost(s)}}},[t.loading?n("b-spinner",{attrs:{small:"",label:"loader"}}):[t._v(" Save ")]],2)]),"draft"!=t.editPost.status||t.post.content?t._e():n("b-tooltip",{attrs:{target:"save-button-disabled-container",triggers:"hover",disabled:!(!t.post.content||!t.post.networkId)}},[t._v(" "+t._s(t.post.content?"You must select a network in order to post":"You need to have some content to create a post")+" ")])],1):n("button",{staticClass:"noButton"}),"network"===t.body?n("div",{staticClass:"network-footer"},[t.postReady?n("span",{staticClass:"post-warning-text"},[t._v(" Selecting a network will automatically submit your post. If you are not ready to post please click "),n("a",{staticClass:"back-link",on:{click:t.goBack}},[t._v("back")]),t._v(". ")]):t._e(),t.postReady?t._e():n("p",{staticClass:"join-network",on:{click:t.openGoToNetworkModal}},[t._v(" Join more networks ")])]):t._e()]}}],null,!0)}):t._e(),n("error-modal",{ref:"showErrorModal",attrs:{id:"error-modal",modalMessage:t.modalMessage,modalMessageType:t.modalMessageType},on:{uploadAnotherFile:t.uploadFile}})],1)},o=[],i=n("1da1"),a=n("5530"),r=n("2909"),c=(n("96cf"),n("b0c0"),n("7db0"),n("fb6a"),n("9911"),n("159b"),n("4de4"),n("caad"),n("2532"),n("99af"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("2b3d"),n("d3b7"),n("3ca3"),n("ddb0"),n("a434"),n("d81d"),n("498a2"),n("7299")),l=n("91fa"),u=n.n(l),d=n("340e"),p=n.n(d),m=n("4332"),f=n.n(m),h=n("04c3"),g=n.n(h),v=n("37ce"),b=n.n(v),w=n("f367"),_=n("123f"),k=n("4f3e"),C=n.n(k),y=n("a6ae"),x=n.n(y),P=n("c0e6"),I=n.n(P),M=n("1222"),T=n("a54a"),$=n("c627"),L=n.n($),R=n("8019"),O=n.n(R),S=n("708e"),j=n("b76a"),D=n.n(j),N=n("82fc"),E=n("ed35"),A=n("c2d5"),U=n("17ff"),F=n("6302"),B=n("a9cc"),H=n("efca"),z=n.n(H),q={name:"EditPostModal",components:{ModalAddInterests:T["default"],BaseListItemBold:M["default"],BaseInputSearch:_["default"],BaseIconButton:w["default"],FileUpload:O.a,BaseModal:c["default"],draggable:D.a,BaseInterestTag:N["default"],MentionableTextArea:E["a"],ErrorModal:U["default"],LinkPreview:F["default"]},emits:["onClose"],props:{editPost:{type:Object,required:!0},networkFeed:{type:Boolean,required:!1,default:!1}},data:function(){var t=this;return{postImg:u.a,postVideo:p.a,selectedLang:this.$store.getters["feeds/getLanguagesList"].find((function(e){return e.id.toLowerCase()==t.editPost.lang.toLowerCase()})).name,type:this.editPost.postType?this.editPost.postType.charAt(0).toUpperCase()+this.editPost.postType.slice(1):"",networkDisplay:"",langSearchText:"",typeSearchText:"",networkSearchText:"",body:"",postReady:!1,chosenNetworkName:"",chosenNetworkId:null,errorStatus:!1,previewLink:null,genericNetwork:z.a,previewDetails:{},link:{},modalMessageType:"",modalMessage:"",ic_close:L.a,ic_post_file:f.a,ic_post_tag_new:g.a,ic_post_tag_remove:b.a,feed_t1:C.a,feed_t2:x.a,feed_t3:I.a,contentClass:"content-class",show:!1,searchText:"",loading:!1,replacedData:null,loadingLink:!1,files:[],cachedMedia:[],post:{lang:"English",postType:"",id:null,content:null,title:null,communityId:null,media:[],interests:[],networkId:"",networkName:"",mainFeed:!0,linkPreview:null,isAnnouncement:""},uploadImageParams:{extensions:"gif,jpg,jpeg,png,webp",accept:"image/png,image/gif,image/jpeg,image/webp",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},uploadVideoParams:{extensions:"mp4,mkv,avi",accept:"video/mp4,video/x-m4v,video/*",minSize:1024,size:1048576e3,multiple:!1,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},uploadFileParams:{extensions:".pdf,.doc,.docx",accept:".pdf,.doc,.docx",minSize:1024,size:209715200,multiple:!0,directory:!1,drop:!1,dropDirectory:!1,createDirectory:!1,addIndex:!1,thread:3},img:{url:"https://referralguidestorage.blob.core.windows.net/webcontent/fallback/avatarFallback.png"}}},watch:{previewLink:function(){null==this.previewLink&&(this.activeLink=null),this.linkArrayHandler()}},mounted:function(){var t,e=this;console.log(this.editPost),this.networkDisplay=this.editPost.networkDisplay,this.editPost.linkPreview?this.link=this.editPost.linkPreview:this.link=null,this.activeLink=null===(t=this.editPost.linkPreview)||void 0===t?void 0:t.url;var n=this.editPost,s=n.id,o=n.title,i=n.content,c=n.mainFeed,l=n.media,u=n.community,d=n.network,p=n.isAnnouncement,m=n.interests,f=n.activity;l&&l.length>0&&(l.forEach((function(t){var n={url:t.file.url,type:t.file.mime};e.files.push({file:n})})),this.cachedMedia=Object(r["a"])(l)),this.post=Object(a["a"])(Object(a["a"])({},this.post),{},{activity:f,id:s,title:o,content:i,isAnnouncement:p,mainFeed:c,media:l||[],networkId:d?d.id:"5f2b93ddb3ab1f5de0638e9f",networkName:d?d.name:"General",communityId:u?u.id:"",lang:this.editPost.lang,postType:this.editPost.postType}),m&&m.forEach((function(t){return e.$store.commit("post/addToSelectedInterests",t)})),console.log("NOW IN POST"),console.log(this.post),setTimeout((function(){e.editableArea()}),500)},computed:{networkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},mobileNetworkTitle:function(){var t="";return t=this.post.networkName.length<20?this.post.networkName:this.post.networkName.substr(0,16)+"...",t},textDirection:function(){return"Hebrew"===this.post.lang||"Arabic"===this.post.lang||"Kurdish"===this.post.lang||"Persian"===this.post.lang||"Urdu"===this.post.lang},networkList:function(){var t=this;return this.networkSearchText?this.$store.getters["networks/getMyNetworks"].filter((function(e){return e.name.toLowerCase().includes(t.networkSearchText.toLowerCase())})):this.$store.getters["networks/getMyNetworks"]},languageList:function(){var t=this;return this.langSearchText?this.$store.getters["feeds/getLanguagesList"].filter((function(e){return e.name.toLowerCase().includes(t.langSearchText.toLowerCase())})):this.$store.getters["feeds/getLanguagesList"]},typeList:function(){var t=this;return this.typeSearchText?this.$store.getters["post/getTypeList"].filter((function(e){return e.type.toLowerCase().includes(t.typeSearchText.toLowerCase())})):this.$store.getters["post/getTypeList"]},modalTitle:function(){var t;return t="type"===this.body?"Select Post Type":"lang"===this.body?"Select Language":this.postReady?"Select Network and Post":"Select Network",t},networkmodalbutton:function(){return this.postReady?"Post":"OK"},errorMessage:function(){return!this.post.content&&this.cachedMedia.length>0?"Please provide textual context to the uploaded media":this.post.content||0!==this.cachedMedia.length?null:"Cannot post without content"},previewUrl:function(){return"".concat("https://temp-api.bizfluenceapp.com/","link-preview?url=").concat(this.previewLink)},profile:function(){return this.$store.getters["profile/getProfile"]},profilePicture:function(){var t=this.$store.getters["profile/getProfilePicture"];return this.profile.fetched?t||this.img:null},selectedInterests:function(){return this.$store.getters["post/getSelectedInterests"]},mainFeedAllowed:function(){return"Politics Network"!==this.post.networkName&&"Bizfluence Cafe Network"!==this.post.networkName}},methods:{closeWarningModal:function(t){t()},linkArrayHandler:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.previewLink,!n){e.next=15;break}if(s=new RegExp(/http[s]?:\/\//),o=n[0].replace(s,""),s===t.activeLink){e.next=13;break}return t.loadingLink=!0,t.activeLink=o,e.next=9,Object(B["a"])(n[0]);case 9:i=t.link=e.sent,i.success?(t.link=i,t.link.url=t.previewLink,t.link&&(t.loadingLink=!1)):t.loadingLink=!1,e.next=15;break;case 13:t.link=null,t.activeLink=null;case 15:case"end":return e.stop()}}),e)})))()},removeLinkPreview:function(){this.link.display=!1,this.previewDetails.removed=!0,this.previewLink.removed=!0},getLinkDetails:function(t){this.previewDetails=t},uploadFile:function(){document.getElementById("video-upload").click()},editableArea:function(){var t=this.$refs.postField.$el.firstChild;t.focus(),this.placeCaretAtEnd(t)},placeCaretAtEnd:function(t){if(t.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if("undefined"!=typeof document.body.createTextRange){var s=document.body.createTextRange();s.moveToElementText(t),s.collapse(!1),s.select()}},closeModal:function(t){this.resetPost(),t(),this.$emit("onClose")},toggleModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.show=t},videoPoster:function(t){return console.log(t),t.file.poster},fileType:function(t){return"image/"===t.type.substr(0,6)?"image":"video/"===t.type.substr(0,6)?"video":"doc"},inputFile:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o,i,a,r,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t||e){s.next=27;break}if(n.loading||(n.loading=!0),!(t.size>=0&&t.size<n.uploadVideoParams.size)){s.next=27;break}if(o=n.cachedMedia.length+1,i=n.files.push({file:null,order:o,loading:!0,progress:0}),a=500,r=setInterval((function(){n.files[i-1].progress<90?n.files[i-1].progress+=10:n.files[i-1].progress<99&&(n.files[i-1].progress+=3,a=1e3)}),a),n.cachedMedia.push({file:null,order:o}),"video/"!==t.type.substr(0,6)){s.next=21;break}return s.next=11,Object(S["a"])(t.blob,{quality:.6});case 11:return l=s.sent,s.next=14,l[0].blob.arrayBuffer();case 14:return u=s.sent,d=new File([u],"thumbnail.jpeg",{type:"image/jpeg"}),console.log(d),s.next=19,n.$store.dispatch("profile/uploadImage",{newFile:d});case 19:c=s.sent,console.log(c);case 21:return s.next=23,n.$store.dispatch("profile/uploadImage",{newFile:t,thumbId:c});case 23:p=s.sent,m=n.fileType(t.file),"video"!==m?(n.cachedMedia[i-1].file=p,n.files[i-1].file=t,n.files[i-1].progress=100,setTimeout((function(){n.files[i-1].loading=!1,clearInterval(r)}),1e3)):setTimeout((function(){n.cachedMedia[i-1].file=p,n.files[i-1].file=t,n.files[i-1].progress=100,setTimeout((function(){n.files[i-1].loading=!1,clearInterval(r)}),1e3)}),2e3),n.loading&&(n.loading=!1);case 27:case"end":return s.stop()}}),s)})))()},inputFilter:function(t,e,n){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var i,a,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t||e){o.next=29;break}if(!(t.size>=0&&t.size>s.uploadVideoParams.size)){o.next=8;break}return s.modalMessageType="error",s.modalMessage="Upload is too large,It can't be more than 1GB",s.$nextTick((function(){s.$refs.showErrorModal.onShow(),s.$nextTick((function(){s.$bvModal.show("error-modal")}))})),o.abrupt("return",n());case 8:s.$refs.showErrorModal.onHide();case 9:if(!/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name)){o.next=11;break}return o.abrupt("return",n());case 11:if(!/\.(php5?|html?|jsx?)$/i.test(t.name)){o.next=13;break}return o.abrupt("return",n());case 13:if(!t||""!==t.error||!t.file||e&&t.file===e.file){o.next=28;break}if(t.blob="",i=window.URL||window.webkitURL,i&&(t.blob=i.createObjectURL(t.file)),t.url="",!t.blob||"image/"!==t.type.substr(0,6)){o.next=22;break}t.url=t.blob,o.next=28;break;case 22:if(!t.blob||"video/"!==t.type.substr(0,6)){o.next=28;break}return o.next=25,Object(S["a"])(t.blob,{quality:.6});case 25:a=o.sent,t.url=t.blob,t.poster=a[1].blob;case 28:!t||""!==t.error||"image/"!==t.type.substr(0,6)||!t.blob||e&&t.blob===e.blob||(t.error="image parsing",r=new Image,r.onload=function(){s.$refs.upload.update(t,{error:"",height:r.height,width:r.width})},r.onerror=function(){s.$refs.upload.update(t,{error:"parsing image size"})},r.src=t.blob);case 29:case"end":return o.stop()}}),o)})))()},onImageListUpdate:function(t){t.moved&&this.mediaMover(t.moved)},mediaMover:function(t){var e=t.newIndex,n=t.oldIndex;console.log(e),this.cachedMedia.splice(e,0,this.cachedMedia.splice(n,1)[0])},removeImage:function(t){this.files.splice(t,1),this.cachedMedia.splice(t,1),this.post.media.splice(t,1)},handleBody:function(t){this.body=t},goBack:function(){this.postReady=!1,this.typeSearchText="",this.langSearchText="",this.networkSearchText="",this.body=""},onNetworkSearchInputChange:function(t){this.networkSearchText=t},onTypeSearchInputChange:function(t){this.typeSearchText=t},onLangSearchInputChange:function(t){this.langSearchText=t},updatePost:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.post.content&&!e.loading){n.next=5;break}console.log(e.post),e.errorStatus=!0,n.next=18;break;case 5:return e.loading=!0,e.replaceMentionsString(),e.post.linkPreview=e.link,s=e.post.content.length>50?50:e.post.content.length,e.post.title=e.post.content.slice(0,s),e.post.interests=e.$store.getters["post/getSelectedInterests"].map((function(t){return t.id})),e.post.media=Object(r["a"])(e.cachedMedia),n.next=14,e.$store.dispatch("feeds/updatePost",e.post);case 14:o=n.sent,e.$eventBus.$emit("POST_EDITED",{post:o}),e.loading=!1,e.closeModal(t);case 18:case"end":return n.stop()}}),n)})))()},resetPost:function(){this.networkDisplay="",this.errorStatus=!1,this.files=[],this.cachedMedia=[],this.$store.commit("post/clearSelectedInterests"),this.post={id:null,content:null,title:null,communityId:null,media:[],networkName:null,mainFeed:!0},this.type=""},onShow:function(){},onMentionsReplaced:function(t){this.replacedData=Object(r["a"])(t)},replaceMentionsString:function(){var t=this,e=document.getElementById("mentions-textarea"),n=e.getElementsByClassName("mentions-replaced");n.length&&Object(r["a"])(n).forEach((function(e){var n=e.getAttribute("data-id"),s=e.innerText;t.post.content=t.post.content.replace(e.outerHTML,"@[".concat(s,"]{").concat(n,"}"))})),this.post.content=Object(A["htmlToText"])(this.post.content,{preserveNewlines:!0,wordwrap:!1,ignoreHref:!0}),this.post.content=this.post.content.replace(/(\n\s*\n)+/g,"\n\n"),this.post.content=this.post.content.trim()},showNetworkModal:function(){var t=this;this.$nextTick((function(){t.$bvModal.show("network-modal")})),this.toggleNetworkModal(!0)},toggleNetworkModal:function(){this.$bvModal.toggle("network-modal")},selectLang:function(t){this.post.lang=t.id,this.selectedLang=t.name,this.body="",this.langSearchText=""},selectType:function(t){console.log(t),this.body="",this.typeSearchText="",this.type=t.title,this.post.postType=t.type},selectNetwork:function(t){this.body="",this.networkSearchText="",this.post.networkId=t.id,this.post.networkName=t.name,this.networkDisplay=t.networkDisplay,!0===this.postReady&&this.createPost("published"),this.$refs["network-modal"].hide(),this.$store.commit("post/clearNetworkInterests")},chooseNetwork:function(t,e){this.chosenNetworkName=e,this.chosenNetworkId=t},openInterestsModal:function(){this.$store.dispatch("post/fetchInterests",this.post.networkId),this.$bvModal.show("modal-add-interests")},onSearchInputChange:function(t){this.searchText=t},openGoToNetworkModal:function(){var t=this;this.$nextTick((function(){t.$bvModal.show("new-network-warning-modal")}))},goToNetworkPage:function(){this.$root.$emit("bv::hide::modal","edit-post-modal"),this.$router.push({path:"/hubs/discover"})},uploadPastedFile:function(t){var e=t.type.substr(0,6);"image/"!==e&&"video/"!==e||this.$refs.upload.add(t)}}},V=q,J=(n("fd24"),n("a8ba"),n("2877")),W=Object(J["a"])(V,s,o,!1,null,"197c8275",null);e["a"]=W.exports},c96a:function(t,e,n){"use strict";var s=n("23e7"),o=n("857a"),i=n("af03");s({target:"String",proto:!0,forced:i("small")},{small:function(){return o(this,"small","","")}})},ca02:function(t,e,n){"use strict";n("4adc")},ce09:function(t,e,n){"use strict";n("0668")},ce4d:function(t,e,n){"use strict";n("a50b")},d322:function(t,e,n){},d3f1:function(t,e,n){t.exports=n.p+"img/video-play.d5ab82f4.svg"},d64d:function(t,e,n){t.exports=n.p+"img/ic-like-sm.85773b87.svg"},db0f:function(t,e,n){t.exports=n.p+"img/ic-like-btn-arrow.792b940d.svg"},db1f:function(t,e,n){"use strict";n("471a")},dfc0:function(t,e,n){},e4c8:function(t,e,n){t.exports=n.p+"img/play_arrow_white_36dp.51940030.svg"},e4ca:function(t,e,n){t.exports=n.p+"img/img-desktop-ss.8a24ed67.jpg"},e67d:function(t,e){function n(t){return"function"===typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function s(t,e){if(!t||!e)return!1;for(var n=0,s=e.length;n<s;n++)try{if(t.contains(e[n]))return!0;if(e[n].contains(t))return!1}catch(o){return!1}return!1}function o(t){return"undefined"!==typeof t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,i){if(!n(e))return;function a(e){if(i.context){var n=e.path||e.composedPath&&e.composedPath();n&&n.length>0&&n.unshift(e.target),t.contains(e.target)||s(i.context.popupItem,n)||t.__vueClickOutside__.callback(e)}}t.__vueClickOutside__={handler:a,callback:e.value};const r="ontouchstart"in document.documentElement?"touchstart":"click";!o(i)&&document.addEventListener(r,a)},update:function(t,e){n(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,n){const s="ontouchstart"in document.documentElement?"touchstart":"click";!o(n)&&t.__vueClickOutside__&&document.removeEventListener(s,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},eb33:function(t,e,n){},eedb:function(t,e,n){},f183:function(t,e,n){var s=n("d012"),o=n("861d"),i=n("5135"),a=n("9bf2").f,r=n("90e3"),c=n("bb2f"),l=r("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(t){a(t,l,{value:{objectID:"O"+ ++u,weakData:{}}})},m=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,l)){if(!d(t))return"F";if(!e)return"E";p(t)}return t[l].objectID},f=function(t,e){if(!i(t,l)){if(!d(t))return!0;if(!e)return!1;p(t)}return t[l].weakData},h=function(t){return c&&g.REQUIRED&&d(t)&&!i(t,l)&&p(t),t},g=t.exports={REQUIRED:!1,fastKey:m,getWeakData:f,onFreeze:h};s[l]=!0},f4a8:function(t,e,n){t.exports=n.p+"img/img-network-cover.edf02976.jpg"},fc9d:function(t,e,n){t.exports=n.p+"img/ic-check-circle.37bffff6.svg"},fd24:function(t,e,n){"use strict";n("3f8b")}}]);